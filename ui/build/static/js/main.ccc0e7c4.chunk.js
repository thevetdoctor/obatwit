(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{49:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),a=n(38),o=n.n(a),r=(n(49),n(3)),i=n(18),l=n(5),u=n(7),m=n.n(u),j=n(12),d=n(13),b=n.n(d),x=n(15),p=n.n(x),h=n(25),g=(n(88),"https://oba-twit.herokuapp.com"),f=n(16),O=n.n(f),v=n(41),y=n(1);O.a.config();var w="865349714041-35tbv6kfmsdueb9cb018vukqpdul0shv.apps.googleusercontent.com";function S(e){var t=e.error,n=e.setError,s=(e.loading,e.setLoading),a=Object(c.useState)(JSON.parse(localStorage.getItem("signup"))),o=Object(r.a)(a,2),i=o[0],u=(o[1],"".concat(g,"/auth/").concat(i?"signup":"login")),m=Object(l.f)();return Object(y.jsx)("div",{children:Object(y.jsx)(h.GoogleLogin,{clientId:w,buttonText:i?"Signup with Google":"Login with Google",onSuccess:function(e){console.log("login suceeded"),I(!0,e.profileObj.email,null,u,t,n,s,m,e.profileObj.name,e.profileObj.imageUrl)},onFailure:function(e){console.log("login failed",e)},cookeiPolicy:"single_host_origin",style:{marginTop:"160px"}})})}var N=function(){return Object(y.jsx)("div",{children:Object(y.jsx)(h.GoogleLogout,{clientId:w,render:function(e){return Object(y.jsx)("span",{children:Object(y.jsx)(v.a,{size:25})})},buttonText:"Signout",onLogoutSuccess:function(e){console.log(e,"Logout suceeded")},style:{marginTop:"160px"}})})},k=n.p+"static/media/chat.7e8098f6.jpg",T=n(42);O.a.config();var I=function(){var e=Object(j.a)(m.a.mark((function e(){var t,n,c,s,a,o,r,i,l,u,j=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j.length>0&&void 0!==j[0]&&j[0],n=j.length>1?j[1]:void 0,c=j.length>2&&void 0!==j[2]?j[2]:null,s=j.length>3?j[3]:void 0,j.length>4?j[4]:void 0,a=j.length>5?j[5]:void 0,o=j.length>6?j[6]:void 0,r=j.length>7?j[7]:void 0,i=j.length>8?j[8]:void 0,l=j.length>9?j[9]:void 0,localStorage.setItem("img",l),o(!0),t){e.next=18;break}return e.next=15,b()({method:"POST",url:"".concat(s),data:{email:n,password:c},headers:{"Content-Type":"application/json"}}).catch((function(e){var t,n;e.response?a(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error):a("Please check your network")}));case 15:u=e.sent,e.next=21;break;case 18:return e.next=20,b()({method:"POST",url:"".concat(s),data:{email:n,password:"passs",auth:"google",name:i,imageUrl:l},headers:{"Content-Type":"application/json"}}).catch((function(e){a(e.response.data.error)}));case 20:u=e.sent;case 21:u&&u.data.success?(localStorage.setItem("email",n),localStorage.setItem("img",u.data.data.user.imageUrl),localStorage.setItem("token",u.data.data.token),o(!1),r.push("/twits")):o(!1);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function C(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(""),i=Object(r.a)(o,2),u=i[0],m=i[1],j=Object(c.useState)(""),d=Object(r.a)(j,2),b=d[0],x=d[1],h=Object(c.useState)(!1),f=Object(r.a)(h,2),O=f[0],v=f[1],w=Object(c.useState)(JSON.parse(localStorage.getItem("signup"))),N=Object(r.a)(w,2),C=N[0],E=N[1],A=localStorage.getItem("token"),F=Object(l.f)(),z="".concat(g,"/auth/").concat(C?"signup":"login"),L=function(e){"email"===e.target.name?a(e.target.value):m(e.target.value)};return Object(c.useEffect)((function(){return A||F.push("/"),function(){}}),[]),Object(y.jsxs)("div",{style:{fontFamily:"Roboto",fontWeight:"600"},className:"font-Roboto text-center align-items-center",children:[Object(y.jsxs)("p",{style:{fontFamily:"Roboto",fontWeight:"600"},className:"italic text-white-700 font-medium text-center mb-5",children:[Object(y.jsxs)("span",{className:"text-purple-900 font-bold text-xl",children:["Twitee",Object(y.jsx)("br",{})]})," .... Feel free, express yourself, network ...."]}),Object(y.jsx)("h1",{style:{fontSize:20},className:"font-bold text-md mb-7",children:C?"Signup":"Login"}),Object(y.jsx)("input",{type:"text",name:"email",value:s,placeholder:"email",onChange:L,className:"px-3 rounded mb-5"}),Object(y.jsx)("br",{}),Object(y.jsx)("input",{type:"password",name:"password",value:u,placeholder:"password",onChange:L,className:"px-3 rounded mb-5"}),Object(y.jsx)("br",{}),Object(y.jsxs)("div",{style:{flexDirection:"column"},className:"flex",children:[b&&Object(y.jsx)("span",{className:"mb-2 text-red-600",children:b}),Object(y.jsx)("div",{children:O?Object(y.jsx)("span",{className:"m-auto",children:Object(y.jsx)(p.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(y.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return I(!1,s,u,z,b,x,v,F)},className:"hover:bg-green-900 bg-green-400 font-medium p-2 rounded w-6 h-3 text-white",children:C?"Signup":"Login"})}),Object(y.jsxs)("span",{className:"text-xs mt-4 mb-4",children:[C?"Already signed up ?":"Not registered ?",Object(y.jsx)("a",{href:"/",className:"focus:text-md underline",onClick:function(){C?(E(!1),localStorage.setItem("signup",!1)):(E(!0),localStorage.setItem("signup",!0))},children:C?" Login here":" Signup here!"})]})]}),Object(y.jsx)(S,{error:b,setError:x,loading:O,setLoading:v}),Object(y.jsxs)("p",{className:"text-white-400 bold flex text-center",children:[Object(y.jsx)(T.a,{})," Twitee"]}),Object(y.jsx)("img",{src:k,alt:"CHat",className:"",style:{borderRadius:"5",width:"100"}})]})}var E=n(27),A=n.n(E),F=n(21),z=n(17),L=n(43),D=n(44);function R(e){var t=Object(c.useState)(localStorage.getItem("twitTitle")?localStorage.getItem("twitTitle"):""),n=Object(r.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(localStorage.getItem("twitText")?localStorage.getItem("twitText"):""),i=Object(r.a)(o,2),l=i[0],u=i[1],d=Object(c.useState)(160),x=Object(r.a)(d,2),h=x[0],f=x[1],O=Object(c.useState)(""),v=Object(r.a)(O,2),w=v[0],S=v[1],N=Object(c.useState)(!1),k=Object(r.a)(N,2),T=k[0],I=k[1],C=localStorage.getItem("token"),E="".concat(g,"/twits/post"),A=function(e){"title"===e.target.name?(a(e.target.value),localStorage.setItem("twitTitle",e.target.value)):(u(e.target.value),f(160-e.target.value.length),localStorage.setItem("twitText",e.target.value))},F=function(){var t=Object(j.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s&&l){t.next=3;break}return S("Inputs required"),t.abrupt("return");case 3:return I(!0),t.next=6,b()({method:"POST",url:"".concat(E),data:{title:s,text:l},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(C)}}).catch((function(e){console.log(e.response),S(e.response.data.error)}));case 6:(n=t.sent)&&n.data.success?(I(!1),localStorage.removeItem("twitTitle"),localStorage.removeItem("twitText"),e.setSync(!e.sync),e.showForm()):(I(!1),console.log("Error found"));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"text-center sticky top-5 rounded pb-1 bg-blue-200 mb-1",children:[Object(y.jsx)("h1",{style:{fontSize:20},className:"font-bold text-base mb-3",children:"New twit"}),Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",borderRadius:"20%"},children:[Object(y.jsx)("input",{type:"text",name:"title",value:s,placeholder:"title",onChange:A,className:"px-3 py-1 rounded mb-2",required:!0}),Object(y.jsx)("input",{type:"textarea",name:"text",rows:"5",cols:"8",maxLength:160,value:l,placeholder:"Drop in your twit ...",onChange:A,style:{height:"100px"},className:"px-3 rounded mb-1 text-md text-gray-600",required:!0})]}),h,Object(y.jsxs)("div",{style:{flexDirection:"column"},className:"flex mb-5",children:[w&&Object(y.jsx)("span",{className:"mb-2 text-red-800 text-md",children:w}),Object(y.jsxs)("div",{className:"justify-items-center mt-2",children:[Object(y.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.showForm()},className:"hover:bg-gray-900 bg-gray-400 font-medium p-1 rounded text-white",children:"Cancel"}),T?Object(y.jsx)("span",{className:"m-auto",children:Object(y.jsx)(p.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(y.jsx)("span",{style:{cursor:"pointer"},onClick:F,className:"hover:bg-green-900 bg-green-400 font-medium p-1 rounded text-white mx-2",children:"Send"})]})]})]})}function P(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(160),i=Object(r.a)(o,2),l=i[0],u=i[1],d=Object(c.useState)(""),x=Object(r.a)(d,2),h=x[0],f=x[1],O=Object(c.useState)(!1),v=Object(r.a)(O,2),w=v[0],S=v[1],N=localStorage.getItem("token"),k="".concat(g,"/comments"),T=function(){var t=Object(j.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.twitId){t.next=2;break}return t.abrupt("return");case 2:if(s){t.next=5;break}return f("Inputs required"),t.abrupt("return");case 5:return S(!0),t.next=8,b()({method:"POST",url:"".concat(k,"/").concat(e.twitId),data:{text:s},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)}}).catch((function(e){console.log(e.response),f(e.response.data.error)}));case 8:n=t.sent,console.log(n),n&&n.data.success?(S(!1),e.setSync(!e.sync),e.showCommentForm()):(S(!1),console.log("Error found"));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"text-center",children:[Object(y.jsx)("p",{style:{fontSize:20},className:"font-bold text-xs mb-3",children:"New Comment"}),Object(y.jsx)("input",{type:"textarea",name:"text",rows:5,cols:8,maxLength:160,value:s,placeholder:"Drop in your comment ...",onChange:function(e){"text"===e.target.name&&(a(e.target.value),u(160-e.target.value.length))},className:"px-3 rounded mb-5 h-20 text-md text-gray-600",required:!0}),Object(y.jsx)("br",{}),l,Object(y.jsxs)("div",{style:{flexDirection:"column"},className:"flex mb-5",children:[h&&Object(y.jsx)("span",{className:"mb-2 text-red-800 text-xs",children:h}),Object(y.jsxs)("div",{className:"justify-items-center",children:[Object(y.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.showCommentForm()},className:"hover:bg-gray-900 bg-gray-400 font-medium p-1 rounded text-white",children:"Cancel"}),w?Object(y.jsx)("span",{className:"m-auto",children:Object(y.jsx)(p.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(y.jsx)("span",{style:{cursor:"pointer"},onClick:T,className:"hover:bg-green-900 bg-green-400 font-medium p-1 rounded text-white mx-2",children:"Send"})]})]})]})}function U(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)([]),o=Object(r.a)(a,2),i=o[0],u=o[1],d=Object(c.useState)(!1),x=Object(r.a)(d,2),p=x[0],h=x[1],f=Object(c.useState)(!1),O=Object(r.a)(f,2),v=O[0],w=O[1],S=Object(c.useState)(0),k=Object(r.a)(S,2),T=k[0],I=k[1],C=localStorage.getItem("email")?localStorage.getItem("email"):"",E=localStorage.getItem("img")?localStorage.getItem("img"):"",A=Object(l.f)(),F=localStorage.getItem("token"),P="".concat(g,"/twits"),U=function(){h(!p)},B=function(){var e=Object(j.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()({method:t,url:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(F)}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:w(!v);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()({method:"GET",url:"".concat(P),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(F)}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:(t=e.sent)&&t.data.success?u(t.data.data.map((function(e){return e.formActive=!1,e}))):(console.log("Error found"),s("Error found"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()({method:"GET",url:"".concat(g,"/auth/users"),headers:{"Content-Type":"application/json"}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:(t=e.sent)&&t.data.success?I(t.data.data.count):(console.log("Error found"),s("Error found"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){console.log("checking open forms",i.filter((function(e){return e.formActive})));var e=i.map((function(e){return e.formActive=!1,e}));u(e),console.log("closing open forms",i.filter((function(e){return e.formActive})))};return Object(c.useEffect)((function(){return F||A.push("/"),G(),function(){console.log("cleanup twits 1")}}),[]),Object(c.useEffect)(Object(j.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(),e.abrupt("return",(function(){console.log("cleanup twits 2")}));case 2:case"end":return e.stop()}}),e)}))),[v]),Object(y.jsxs)("div",{style:{fontFamily:"Roboto",fontWeight:"600"},className:"mb-5 font-Roboto",children:[p&&Object(y.jsx)(R,{error:n,showForm:U,sync:v,setSync:w}),Object(y.jsxs)("p",{style:{fontFamily:"Roboto",fontWeight:"600"},className:"italic text-white-700 font-medium text-center",children:[Object(y.jsxs)("span",{className:"text-purple-900 font-bold text-xl",children:["Twitee",Object(y.jsx)("br",{})]})," .... Feel free, express yourself, network ...."]}),Object(y.jsxs)("div",{className:"py-2 px-2 rounded bg-blue-300 mb-4 flex justify-between",children:["null"!==E?Object(y.jsx)("span",{children:Object(y.jsx)("img",{src:E,alt:"Profile",style:{width:"30px",height:"30px",borderRadius:"50%"}})}):Object(y.jsx)("span",{className:"text-left",children:Object(y.jsx)(z.a,{size:25})}),T>0&&Object(y.jsxs)("span",{className:"text-left flex",children:[Object(y.jsx)(L.a,{size:25}),T]}),Object(y.jsx)("span",{style:{cursor:"pointer"},className:"text-right",onClick:function(){localStorage.removeItem("token"),A.push("/")},children:Object(y.jsx)(N,{})})]}),Object(y.jsxs)("div",{className:"w-full text-white-400 flex justify-between",onClick:U,children:[Object(y.jsx)("span",{}),Object(y.jsx)("span",{className:"font-bold mb-4 italic",children:"Twits"}),Object(y.jsx)("span",{style:{cursor:"pointer"},className:"sticky top-4 mr-4 -ml-6",children:Object(y.jsx)(D.a,{size:25})})]}),i.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})).map((function(e,t){return Object(y.jsx)(W,{twit:e,email:C,apiCallHook:B,baseUrl:g,sync:v,setSync:w,showForm:U,formActive:p,checkOpenForms:J},t)}))]})}var W=function(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),s=n[0],a=n[1],o=e.twit,i=o.id,l=o.title,u=o.text,m=o.twits,j=o.likes,d=o.comments,b=o.createdAt,x=e.email,p=e.apiCallHook,h=e.baseUrl,g=e.sync,f=e.setSync,O=e.checkOpenForms,v=j.filter((function(e){return e.isLiked})).length,w=function(){a(!s),e.twit.formActive=!s};return Object(y.jsxs)("div",{className:"bg-blue-100 rounded p-5 mb-2",children:[Object(y.jsx)("p",{className:"font-bold text-center",children:l}),Object(y.jsx)("span",{className:"text-xs mb-2",children:Object(y.jsx)(A.a,{fromNow:!0,children:b})}),Object(y.jsx)("p",{style:{fontFamily:"Roboto",fontWeight:"300"},className:"",children:u}),Object(y.jsxs)("p",{className:"text-xs text-gray-800 flex my-2",children:[Object(y.jsxs)("span",{className:"mx-2 flex",children:[m.imageUrl?Object(y.jsx)("span",{className:"mr-1",children:Object(y.jsx)("img",{src:m.imageUrl,alt:"Profile",style:{width:"20px",height:"20px",borderRadius:"50%"}})}):Object(y.jsx)(F.b,{size:15}),x===m.email?"Me":m.username]}),Object(y.jsxs)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){p("POST","".concat(h,"/likes/like/").concat(i))},children:[Object(y.jsx)(z.c,{color:v>0?"blue":"gray",size:15}),Object(y.jsx)("span",{className:"text-xs",children:v})]}),Object(y.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){return O(),void w()},children:Object(y.jsx)(F.a,{size:15})}),x===m.email&&Object(y.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex hover:text-red-800",onClick:function(){p("DELETE","".concat(h,"/twits/").concat(i))},children:Object(y.jsx)(z.b,{size:15,color:"red"})})]}),s&&Object(y.jsx)(P,{twitId:i,showCommentForm:w,sync:g,setSync:f}),d.length>0&&Object(y.jsx)("div",{className:"mt-2 rounded",children:d.filter((function(e){return!e.isDeleted})).map((function(e,t){return Object(y.jsx)(B,{comment:e,apiCallHook:p,email:x},t)}))})]})},B=function(e){var t=e.comment,n=t.id,c=t.text,s=t.usercomments,a=t.likecomments,o=t.createdAt,r=e.email,i=e.apiCallHook,l=a.filter((function(e){return e.isLiked})).length;return Object(y.jsxs)("div",{className:"bg-green-200 mb-2 p-2 rounded",children:[Object(y.jsx)("span",{className:"text-xs mb-2",children:Object(y.jsx)(A.a,{fromNow:!0,children:o})}),Object(y.jsx)("p",{style:{fontFamily:"Roboto",fontWeight:"400"},children:c}),Object(y.jsxs)("span",{className:"mx-2 flex items-justify text-xs",children:[s.imageUrl?Object(y.jsx)("span",{className:"mr-1",children:Object(y.jsx)("img",{src:s.imageUrl,alt:"Profile",style:{width:"20px",height:"20px",borderRadius:"50%"}})}):Object(y.jsx)(F.b,{size:15}),Object(y.jsx)("span",{className:"",children:r===s.email?"Me":s.username}),Object(y.jsxs)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){i("POST","".concat(g,"/likecomments/like/").concat(n))},children:[Object(y.jsx)(z.c,{color:l>0?"blue":"gray",size:15}),Object(y.jsx)("span",{className:"text-xs",children:l})]}),r===s.email&&Object(y.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex hover:text-red-800",onClick:function(){i("DELETE","".concat(g,"/comments/").concat(n))},children:Object(y.jsx)(z.b,{size:15,color:"red"})})]})]})};var q=function(){var e=Object(c.useState)(JSON.parse(localStorage.getItem("loggedIn"))),t=Object(r.a)(e,2),n=(t[0],t[1],Object(c.useState)(JSON.parse(localStorage.getItem("signup"))||!1)),s=Object(r.a)(n,2);return s[0],s[1],Object(y.jsx)(i.a,{children:Object(y.jsx)("div",{className:"font-Roboto h-full w-full m-0 max-w-xl max-h-xl my-0 mx-auto bg-blue-300 rounded-xl shadow-md -px-3",children:Object(y.jsx)("div",{className:"bg-white-300 rounded-xl p-4",children:Object(y.jsxs)(l.c,{children:[Object(y.jsx)(l.a,{exact:!0,path:"/",component:C}),Object(y.jsx)(l.a,{exact:!0,path:"/twits",component:U})]})})})})};O.a.config();self.__WB_MANIFEST,Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(q,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[99,1,2]]]);
//# sourceMappingURL=main.ccc0e7c4.chunk.js.map