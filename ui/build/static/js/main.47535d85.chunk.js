(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(27),c=a.n(s),o=(a(56),a(3)),l=a(18),i=a(8),u=a(4),d=a.n(u),b=a(7),j=a(9),m=a.n(j),p=a(20),h=a.n(p),f=a(33),x=window.location.host.indexOf("localhost")>=0?(console.log("localhost API"),"http://localhost:4000"):(console.log("live Url"),"https://oba-twit.herokuapp.com"),g=window.location.host.indexOf("localhost")>=0?(console.log("localhost frontendUrl"),"http://localhost:3000/twits"):(console.log("live frontendUrl"),"https://peaceful-leakey-ce2e49.netlify.app/twits"),O=a(28),v=a.n(O),w=a(45),S=a(1);v.a.config();var y="865349714041-35tbv6kfmsdueb9cb018vukqpdul0shv.apps.googleusercontent.com";function N(e){var t=e.error,a=e.setError,r=(e.loading,e.setLoading),s=Object(n.useState)(JSON.parse(localStorage.getItem("signup"))),c=Object(o.a)(s,2),l=c[0],u=(c[1],"".concat(x,"/auth/").concat(l?"signup":"login")),d=Object(i.f)();return Object(S.jsx)("div",{children:Object(S.jsx)(f.GoogleLogin,{clientId:y,buttonText:l?"Signup with Google":"Login with Google",onSuccess:function(e){console.log("login suceeded"),E(!0,e.profileObj.email,null,u,t,a,r,d,e.profileObj.name,e.profileObj.imageUrl)},onFailure:function(e){console.log("login failed",e)},cookeiPolicy:"single_host_origin",style:{marginTop:"160px"}})})}var k=function(){return Object(S.jsx)("div",{children:Object(S.jsx)(f.GoogleLogout,{clientId:y,render:function(e){return Object(S.jsx)("span",{children:Object(S.jsx)(w.a,{size:25})})},buttonText:"Signout",onLogoutSuccess:function(e){console.log(e,"Logout suceeded")},style:{marginTop:"160px"}})})},T=a.p+"static/media/chat.7e8098f6.jpg",C=a(46);v.a.config();var E=function(){var e=Object(b.a)(d.a.mark((function e(){var t,a,n,r,s,c,o,l,i,u,b,j=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j.length>0&&void 0!==j[0]&&j[0],a=j.length>1?j[1]:void 0,n=j.length>2&&void 0!==j[2]?j[2]:null,r=j.length>3?j[3]:void 0,j.length>4?j[4]:void 0,s=j.length>5?j[5]:void 0,c=j.length>6?j[6]:void 0,o=j.length>7?j[7]:void 0,l=j.length>8?j[8]:void 0,i=j.length>9?j[9]:void 0,localStorage.setItem("img",i),c(!0),t){e.next=26;break}if(a&&n){e.next=21;break}if(a){e.next=18;break}return s("Email is required"),c(!1),e.abrupt("return");case 18:return s("Password required"),c(!1),e.abrupt("return");case 21:return e.next=23,m()({method:"POST",url:"".concat(r),data:{email:a,password:n},headers:{"Content-Type":"application/json"}}).catch((function(e){if(e.isAxiosError){var t,a,n,r,c,o;if(console.log(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error),(null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error.search("NOTFOUND"))>=0)s("Please check your network");else s(null===(c=e.response)||void 0===c||null===(o=c.data)||void 0===o?void 0:o.error);console.log("Error found")}}));case 23:u=e.sent,e.next=29;break;case 26:return e.next=28,m()({method:"POST",url:"".concat(r),data:{email:a,password:"passs",auth:"google",name:l,imageUrl:i},headers:{"Content-Type":"application/json"}}).catch((function(e){s(e.response.data.error)}));case 28:u=e.sent;case 29:u&&u.data.success?(localStorage.setItem("email",a),localStorage.setItem("img",u.data.data.user.imageUrl),localStorage.setItem("username",null===(b=u.data.data.user)||void 0===b?void 0:b.username),localStorage.setItem("token",u.data.data.token),c(!1),o.push("/twits")):c(!1);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function I(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),l=Object(o.a)(c,2),u=l[0],d=l[1],b=Object(n.useState)(""),j=Object(o.a)(b,2),m=j[0],p=j[1],f=Object(n.useState)(!1),g=Object(o.a)(f,2),O=g[0],v=g[1],w=Object(n.useState)(JSON.parse(localStorage.getItem("signup"))),y=Object(o.a)(w,2),k=y[0],I=y[1],A=localStorage.getItem("token"),P=Object(i.f)(),U="".concat(x,"/auth/").concat(k?"signup":"login"),z=function(e){"email"===e.target.name?s(e.target.value):d(e.target.value)};return Object(n.useEffect)((function(){return A&&P.push("/twits"),function(){}}),[]),Object(S.jsxs)("div",{style:{fontFamily:"Roboto",fontWeight:"600"},className:"font-Roboto text-center align-items-center",children:[Object(S.jsxs)("p",{style:{fontFamily:"Architects Daughter",fontWeight:"300"},className:"italic text-center mb-2",children:[Object(S.jsxs)("span",{style:{fontSize:"1.8em"},className:"text-purple-900 font-bold",children:["Twitee",Object(S.jsx)("br",{})]}),Object(S.jsx)("span",{className:"text-md",children:" Feel free, express yourself & network "})]}),Object(S.jsx)("h1",{style:{fontSize:20},className:"font-bold text-md mb-7",children:k?"Signup":"Login"}),Object(S.jsx)("input",{type:"text",name:"email",value:r,placeholder:"email",onChange:z,className:"px-3 rounded mb-5"}),Object(S.jsx)("br",{}),Object(S.jsx)("input",{type:"password",name:"password",value:u,placeholder:"password",onChange:z,className:"px-3 rounded mb-5"}),Object(S.jsx)("br",{}),Object(S.jsxs)("div",{className:"flex flex-col mb-3",children:[m&&Object(S.jsx)("span",{className:"mb-2 text-red-600",children:m}),Object(S.jsx)("div",{className:"flex justify-center",children:O?Object(S.jsx)("span",{className:"",children:Object(S.jsx)(h.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(S.jsx)("span",{onClick:function(){return E(!1,r,u,U,m,p,v,P)},className:"cursor-pointer mb-3 bg-green-500 hover:bg-green-400 py-1 px-6 rounded text-white",children:k?"Signup":"Login"})})]}),!A&&Object(S.jsx)(N,{error:m,setError:p,loading:O,setLoading:v}),Object(S.jsxs)("div",{className:"mt-7 mb-6 text-xs",children:[k?"Already signed up ?":"Not registered ?",Object(S.jsx)("span",{className:"hover:bg-purple-400 bg-purple-500 ml-2 p-1 rounded text-white font-bold cursor-pointer",onClick:function(){k?(I(!1),localStorage.setItem("signup",!1)):(I(!0),localStorage.setItem("signup",!0))},children:k?" Switch to Login":" Switch to Signup!"})]}),Object(S.jsx)("img",{src:T,alt:"CHat",className:"",style:{borderRadius:"5",width:"100"}}),Object(S.jsxs)("p",{className:"text-white-400 bold flex text-center",children:[Object(S.jsx)(C.a,{})," Twitee"]})]})}var A=a(22),P=a.n(A),U=a(11),z=a(23),D=a(17),_=a(51),F=a(50),R=a(47);function L(e){e.imageUrl;var t=e.setImageUrl,a=Object(n.useState)(""),r=Object(o.a)(a,2),s=(r[0],r[1]),c=Object(n.useState)(""),l=Object(o.a)(c,2),i=l[0],u=l[1],j=function(){var e=Object(b.a)(d.a.mark((function e(a){var n,r,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a.target),s("loading"),n=a.target.files[0],r=new FormData,"https://api.cloudinary.com/v1_1/thevetdoctor/image/upload",r.append("file",n),r.append("upload_preset","zunt8yrw"),e.next=9,fetch("https://api.cloudinary.com/v1_1/thevetdoctor/image/upload",{method:"POST",body:r});case 9:return c=e.sent,e.next=12,c.json();case 12:o=e.sent,u(o.secure_url),t(o.secure_url),s("done");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"flex p-1 rounded ml-1",children:i?Object(S.jsx)("img",{src:i,alt:"post",style:{width:"20em",height:"9em"},className:"rounded"}):Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("label",{className:"ml-2 cursor-pointer flex",children:[Object(S.jsx)(R.a,{size:25})," ",Object(S.jsx)("span",{className:"font-semibold ml-2 text-white pr-2"}),Object(S.jsx)("input",{type:"file",placeholder:"",accept:"image/*;capture",className:"hidden",onChange:function(e){return j(e)}})]})})})}function W(e){var t=Object(n.useState)(localStorage.getItem("twitTitle")?localStorage.getItem("twitTitle"):""),a=Object(o.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(localStorage.getItem("twitText")?localStorage.getItem("twitText"):""),l=Object(o.a)(c,2),i=l[0],u=l[1],j=Object(n.useState)(localStorage.getItem("twitImage")?localStorage.getItem("twitImage"):""),p=Object(o.a)(j,2),f=p[0],g=p[1],O=Object(n.useState)(160),v=Object(o.a)(O,2),w=v[0],y=v[1],N=Object(n.useState)(""),k=Object(o.a)(N,2),T=k[0],C=k[1],E=Object(n.useState)(!1),I=Object(o.a)(E,2),A=I[0],P=I[1],U=localStorage.getItem("token"),z="".concat(x,"/twits/post"),D=function(e){"title"===e.target.name?(s(e.target.value),localStorage.setItem("twitTitle",e.target.value)):(u(e.target.value),y(160-e.target.value.length),localStorage.setItem("twitText",e.target.value))},_=function(){var t=Object(b.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&i){t.next=6;break}if(r){t.next=4;break}return C("Title is required"),t.abrupt("return");case 4:return C("Inputs required"),t.abrupt("return");case 6:return P(!0),t.next=9,m()({method:"POST",url:"".concat(z),data:{title:r,text:i,imageUrl:f},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U)}}).catch((function(e){console.log(e.response),C(e.response.data.error)}));case 9:(a=t.sent)&&a.data.success?(P(!1),localStorage.removeItem("twitTitle"),localStorage.removeItem("twitText"),e.setSync(!e.sync),e.showForm()):(P(!1),console.log("Error found"));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"sticky w-full h-full bg-gray-200 p-1 -mb-2",children:Object(S.jsxs)("div",{className:"text-center bg-blue-200 mt-3 pt-3 mb-1 pb-1 rounded",children:[Object(S.jsx)("h1",{className:"font-semibold text-md mb-3",children:"New twit"}),Object(S.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",borderRadius:"20%"},children:[Object(S.jsx)("input",{type:"text",name:"title",value:r,placeholder:"title",onChange:D,className:"px-3 py-1 rounded text-lg mb-2 font-bold",style:{width:"16em",border:"none"},required:!0}),Object(S.jsx)("textarea",{type:"textarea",name:"text",rows:4,cols:3,style:{width:"16em",height:"".concat(f?"5em":"13em"),border:"none"},maxLength:160,value:i,overflow:"hidden",placeholder:"Drop in your twit ...",onChange:D,className:"px-3 rounded mb-1 text-lg text-black font-bold",required:!0}),Object(S.jsxs)("span",{style:{display:"flex",width:"20em"},className:"justify-between px-3 mt-2 mb-2 ml-4 mr-2",children:[Object(S.jsx)(L,{imageUrl:f,setImageUrl:g}),Object(S.jsx)("span",{className:"mr-6",children:w})]})]}),Object(S.jsxs)("div",{style:{flexDirection:"column"},className:"flex mb-5",children:[T&&Object(S.jsx)("span",{className:"mb-2 text-red-800 text-md",children:T}),Object(S.jsx)("div",{className:"justify-items-center mt-2",children:A?Object(S.jsx)("span",{className:"m-auto",children:Object(S.jsx)(h.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.showForm()},className:"hover:bg-gray-900 bg-gray-400 text-lg font-medium p-1 rounded text-white",children:"Cancel"}),Object(S.jsx)("span",{style:{cursor:"pointer"},onClick:_,className:"hover:bg-green-900 bg-green-400 text-lg font-bold p-1 rounded text-white mx-2",children:"Send"})]})})]})]})})}function J(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(160),l=Object(o.a)(c,2),i=l[0],u=l[1],j=Object(n.useState)(""),p=Object(o.a)(j,2),f=p[0],g=p[1],O=Object(n.useState)(!1),v=Object(o.a)(O,2),w=v[0],y=v[1],N=localStorage.getItem("token"),k="".concat(x,"/comments"),T=function(){var t=Object(b.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.twitId){t.next=2;break}return t.abrupt("return");case 2:if(r){t.next=5;break}return g("Inputs required"),t.abrupt("return");case 5:return y(!0),t.next=8,m()({method:"POST",url:"".concat(k,"/").concat(e.twitId),data:{text:r},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)}}).catch((function(e){console.log(e.response),g(e.response.data.error)}));case 8:a=t.sent,console.log(a),a&&a.data.success?(y(!1),e.setSync(!e.sync),e.showCommentForm()):(y(!1),console.log("Error found"));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"text-center pt-4",children:[Object(S.jsx)("p",{style:{fontSize:20},className:"font-bold text-xs mb-3",children:"New Comment"}),Object(S.jsx)("textarea",{type:"textarea",name:"text",rows:5,cols:8,maxLength:160,style:{width:"15em",height:"8em"},value:r,placeholder:"Drop in your comment ...",onChange:function(e){"text"===e.target.name&&(s(e.target.value),u(160-e.target.value.length))},className:"px-3 rounded mb-5 h-20 text-md text-gray-600",required:!0}),Object(S.jsx)("br",{}),i,Object(S.jsxs)("div",{style:{flexDirection:"column"},className:"flex mb-5",children:[f&&Object(S.jsx)("span",{className:"mb-2 text-red-800 text-xs",children:f}),Object(S.jsxs)("div",{className:"justify-items-center",children:[Object(S.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.showCommentForm()},className:"hover:bg-gray-900 bg-gray-400 font-medium p-1 rounded text-white",children:"Cancel"}),w?Object(S.jsx)("span",{className:"m-auto",children:Object(S.jsx)(h.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(S.jsx)("span",{style:{cursor:"pointer"},onClick:T,className:"hover:bg-green-900 bg-green-400 font-medium p-1 rounded text-white mx-2",children:"Send"})]})]})]})}var H=a(32),Q=a(48),G=a(10),q={setTwitData:{type:"SET_TWIT_DATA"},setUserCount:{type:"SET_USER_COUNT"},setPeopleData:{type:"SET_PEOPLE_DATA"},setSearchData:{type:"SET_SEARCH_DATA"},setNewsType:{type:"SET_NEWS_TYPE"},setPage:{type:"SET_PAGE"},setTotalPages:{type:"SET_TOTAL_PAGES"},setSearchQuery:{type:"SET_SEARCH_QUERY"},setNetworkStatus:{type:"SET_NETWORK_STATUS"}};var B={twits:[],users:0,peopleData:[],searchData:[],searchQuery:"",networkStatus:!1},M=Object(H.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q.setTwitData.type:return console.log("Setting twits data"),Object(G.a)(Object(G.a)({},e),{},{twits:t.data});case q.setPeopleData.type:return console.log("Setting people data"),Object(G.a)(Object(G.a)({},e),{},{peopleData:t.data});case q.setSearchData.type:return console.log("Setting search data"),Object(G.a)(Object(G.a)({},e),{},{searchData:t.data});case q.setUserCount.type:return console.log("Setting user count"),Object(G.a)(Object(G.a)({},e),{},{users:t.data});case q.setNewsType.type:console.log("Setting News Type");var a=e.newsData.filter((function(e){return e.type===t.data}));return Object(G.a)(Object(G.a)({},e),{},{newsType:t.data,news:a,searchQuery:"",page:1,totalPages:Math.ceil(a.length/e.pageSize)});case q.setPage.type:return console.log("Setting page"),Object(G.a)(Object(G.a)({},e),{},{page:t.data});case q.setTotalPages.type:return console.log("Setting totalPages"),Object(G.a)(Object(G.a)({},e),{},{totalPages:t.data});case q.setSearchQuery.type:var n;return console.log("Setting Search Query"),n="Filter By Type"===e.newsType?""===t.data?e.newsData:e.newsData.filter((function(e){var a;return(null===e||void 0===e||null===(a=e.text)||void 0===a?void 0:a.toLowerCase().indexOf(t.data.toLowerCase()))>=0})):e.newsData.filter((function(a){var n;return(null===a||void 0===a||null===(n=a.text)||void 0===n?void 0:n.toLowerCase().indexOf(t.data.toLowerCase()))>=0&&a.type===e.newsType})),Object(G.a)(Object(G.a)({},e),{},{searchQuery:t.data,news:n,page:1,totalPages:Math.ceil(n.length/e.pageSize)});case q.setNetworkStatus.type:return console.log("Setting Network Status"),Object(G.a)(Object(G.a)({},e),{},{networkStatus:t.data});default:return e}}),Object(Q.devToolsEnhancer)()),K=M,Y=a(21);function V(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),c=Object(o.a)(s,2),l=c[0],u=c[1],j=Object(n.useState)(!1),p=Object(o.a)(j,2),h=p[0],f=p[1],O=K.getState,v=K.dispatch,w=O(),y=Object(Y.b)((function(e){return e})),N=y.twits,T=y.users;y.searchQuery,y.networkStatus;console.log(w);var C=localStorage.getItem("email")?localStorage.getItem("email"):"",E=localStorage.getItem("img")?localStorage.getItem("img"):"",I=Object(i.f)(),A=localStorage.getItem("token"),P="".concat(x,"/twits"),U=function(){u(!l)},_=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:t,url:a,data:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(A)}}).catch((function(e){var t,a,n,s;e.isAxiosError&&(console.log(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error),r(null===(n=e.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.error),console.log("Error found"))}));case 2:f(!h);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=3;break}return console.log("Not loggedin"),e.abrupt("return");case 3:return e.next=5,m()({method:"GET",url:"".concat(P),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(A)}}).catch((function(e){var t,a,n,s;e.isAxiosError&&(console.log(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error),r(null===(n=e.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.error),console.log("Error found"))}));case 5:(t=e.sent)&&t.data.success?(v({type:"SET_TWIT_DATA",data:t.data.data}),localStorage.setItem("twits",JSON.stringify(t.data.data.map((function(e){return e.formActive=!1,e}))))):(console.log("Error found"),r("Error found"),r("Please check your network"),v({type:"SET_TWIT_DATA",data:JSON.parse(localStorage.getItem("twits"))}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"GET",url:"".concat(x,"/auth/users"),headers:{"Content-Type":"application/json"}}).catch((function(e){var t,a,n,s;e.isAxiosError&&(console.log(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error),r(null===(n=e.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.error),console.log("Error found"))}));case 2:(t=e.sent)&&t.data.success?(v({type:"SET_USER_COUNT",data:t.data.data.count}),localStorage.setItem("userCount",t.data.data.count)):(console.log("Error found"),r("Error found"),r("Please check your network"),v({type:"SET_USER_COUNT",data:JSON.parse(localStorage.getItem("userCount"))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){console.log("checking open forms",N.filter((function(e){return e.formActive})));N.map((function(e){return e.formActive=!1,e}));console.log("closing open forms",N.filter((function(e){return e.formActive})))};return Object(n.useEffect)((function(){return A||I.push("/"),L(),function(){console.log("cleanup twits 1")}}),[]),Object(n.useEffect)(Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(),e.abrupt("return",(function(){console.log("cleanup twits 2")}));case 2:case"end":return e.stop()}}),e)}))),[h]),Object(n.useEffect)((function(){setTimeout((function(){var e=window.location.hash.replace("#",""),t=document.getElementById(e);t&&t.scrollIntoView()}),0)})),Object(S.jsxs)("div",{style:{fontFamily:"Roboto",fontWeight:"600",height:"90vh"},className:"mb-5 p-3",children:[Object(S.jsx)("span",{style:{cursor:"pointer",borderRadius:"50%"},className:"fixed bottom-16 right-4 bg-green-500 p-4 text-white",children:Object(S.jsx)(F.a,{size:25,onClick:U})}),l&&Object(S.jsx)(W,{error:a,showForm:U,sync:h,setSync:f}),!l&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("p",{style:{fontFamily:"Architects Daughter",fontWeight:"300"},className:"italic text-center mb-2",children:[Object(S.jsxs)("span",{style:{fontSize:"1.8em"},className:"text-purple-900 font-bold",children:["Twitee",Object(S.jsx)("br",{})]}),Object(S.jsx)("span",{style:{fontSize:"1em"},children:" Feel free, express yourself & network "})]}),Object(S.jsxs)("div",{className:"py-2 px-2 rounded mb-4 flex justify-between",children:["null"!==E?Object(S.jsx)("span",{className:"cursor-pointer",onClick:function(e){return I.push("/".concat(C.split("@")[0]))},children:Object(S.jsx)("img",{src:E,alt:"Profile",style:{width:"30px",height:"30px",borderRadius:"50%"}})}):Object(S.jsx)("span",{className:"text-left",children:Object(S.jsx)(z.a,{size:25})}),T>0&&Object(S.jsxs)("span",{className:"text-left flex cursor-pointer",onClick:function(e){return I.push("people")},children:[Object(S.jsx)(D.a,{size:30}),Object(S.jsx)("span",{className:"pt-1 pl-1",children:T})]}),Object(S.jsx)("span",{style:{cursor:"pointer"},className:"text-right",onClick:function(){localStorage.removeItem("token"),I.push("/")},children:Object(S.jsx)(k,{})})]}),a&&Object(S.jsx)("div",{style:{fontFamily:"Roboto",backgroundColor:"white",fontWeight:"bold"},className:"text-red-500 text-center py-2 m-1 rounded",children:"Please check your network !"}),Object(S.jsx)("div",{className:"",children:N.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})).map((function(e,t){return Object(S.jsx)($,{twit:e,email:C,apiCallHook:_,baseUrl:x,frontendUrl:g,sync:h,setSync:f,showForm:U,formActive:l,checkOpenForms:J},t)}))})]})]})}var $=function(e){var t=e.twit,a=t.id,r=t.title,s=t.text,c=t.imageUrl,l=t.twits,u=t.likes,j=t.comments,m=t.createdAt,p=t.updatedAt,h=e.email,f=e.apiCallHook,x=e.baseUrl,g=e.frontendUrl,O=e.sync,v=e.setSync,w=e.checkOpenForms,y=Object(n.useState)(!1),N=Object(o.a)(y,2),k=N[0],T=N[1],C=Object(n.useState)(!1),E=Object(o.a)(C,2),I=E[0],A=E[1],D=Object(n.useState)(!1),F=Object(o.a)(D,2),R=F[0],L=F[1],W=Object(n.useState)(!1),H=Object(o.a)(W,2),Q=H[0],G=H[1],q=Object(n.useState)(s),B=Object(o.a)(q,2),M=B[0],K=B[1],Y=Object(n.useState)(!1),V=Object(o.a)(Y,2),$=V[0],ee=V[1],te=Object(n.useState)(!1),ae=Object(o.a)(te,2),ne=ae[0],re=ae[1],se=Object(i.f)(),ce=function(){ee(!$),K(s)},oe=u.filter((function(e){return e.isLiked})).length,le=function(){T(!k),e.twit.formActive=!k},ie=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("clipboard"in navigator)){e.next=8;break}return console.log("Link copied"),re(!0),e.next=5,navigator.clipboard.writeText(t);case 5:return e.abrupt("return",e.sent);case 8:console.log("Link copy is not supported");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{id:"".concat(a),style:{fontSize:"1.1em"},className:"shadow-lg border border-gray-200 rounded p-5 mb-4",children:[Object(S.jsxs)("p",{className:"flex justify-between mb-2",children:[Object(S.jsx)("span",{}),Object(S.jsx)("span",{style:{fontFamily:"Roboto Slab"},className:"text-xl font-bold self-center",children:r}),Object(S.jsx)("span",{className:ne?"mr-2 mb-1 text-xs self-end":"mr-2 mb-1 invisible text-xs self-end",children:"copied"})]}),Object(S.jsxs)("span",{className:"text-xs mb-5 flex justify-between",children:[Object(S.jsx)(P.a,{fromNow:!0,children:m}),Object(S.jsxs)("span",{className:"flex",children:[h===l.email&&!$&&Object(S.jsx)("span",{className:"cursor-pointer mr-3 hover:bg-blue-400 text-black hover:text-white p-2 -mt-2 rounded-full",onClick:function(){return ce()},children:Object(S.jsx)(_.a,{size:20})}),Object(S.jsx)("span",{className:ne?"flex-col hover:bg-blue-400 rounded-full p-2 text-white bg-blue-900 cursor-pointer -mt-2 mr-3":"rounded-full hover:bg-blue-400 p-2 cursor-pointer -mt-2 mr-3",onClick:function(){return ie("".concat(g,"/#").concat(a)),void setTimeout((function(){re(!1)}),1e3)},children:Object(S.jsx)(U.c,{size:20})})]})]}),$&&Object(S.jsxs)("div",{className:"mb-5",children:[Object(S.jsx)("textarea",{className:"border-gray-200 border-2 p-2 mb-2 rounded bg-white-300 focus:outline-none",style:{width:"100%"},cols:3,rows:4,maxLength:160,value:M,onChange:function(e){K(e.target.value)},required:!0}),Object(S.jsx)("br",{}),I?Object(S.jsx)(Z,{height:20,width:20,color:"#00bfff"}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("span",{className:"cursor-pointer bg-gray-500 p-2 m-2 text-white rounded hover:bg-gray-400",onClick:function(){return ce()},children:"Cancel"}),Object(S.jsx)("span",{className:"cursor-pointer bg-green-600 p-2 mb-2 text-white rounded hover:bg-green-400 hover:text-black",onClick:function(){return f("PATCH","".concat(x,"/twits/").concat(a),{text:M}),A(!0),void setTimeout((function(){A(!1),ee(!1)}),1e3)},children:"Update Story"})]})]}),!$&&Object(S.jsxs)("div",{className:"p-3 font-semibold",children:[s,Object(S.jsx)("br",{}),new Date(p).getTime()-new Date(m).getTime()>0&&Object(S.jsxs)("span",{className:"text-xs",children:["Updated ",Object(S.jsx)(P.a,{fromNow:!0,children:p})]})]}),Object(S.jsx)("span",{children:c&&Object(S.jsx)("img",{src:c,width:"100%",alt:"imgurl",className:"rounded"})}),Object(S.jsxs)("div",{style:{fontSize:"0.8em"},className:"text-xs text-gray-800 flex mt-2",children:[Object(S.jsxs)("span",{className:"mx-2 flex cursor-pointer",onClick:function(e){return se.push("/".concat(l.username))},children:[l.imageUrl?Object(S.jsx)("span",{className:"mr-1",children:Object(S.jsx)("img",{src:l.imageUrl,alt:"Profile",style:{width:"20px",height:"20px",borderRadius:"50%"}})}):Object(S.jsx)(U.b,{size:15}),h===l.email?"Me":l.username]}),Object(S.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){return L(!0),setTimeout((function(){L(!1)}),1e3),void f("POST","".concat(x,"/likes/like/").concat(a))},children:R?Object(S.jsx)(Z,{height:20,width:20,color:"#00bfff"}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(z.c,{color:oe>0?"blue":"gray",size:15}),Object(S.jsx)("span",{className:"text-xs",children:oe})]})}),Object(S.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){return w(),void le()},children:Object(S.jsx)(U.a,{size:15})}),h===l.email&&Object(S.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex hover:text-red-800",onClick:function(){return G(!0),setTimeout((function(){G(!1)}),1e3),void f("DELETE","".concat(x,"/twits/").concat(a))},children:Q?Object(S.jsx)(Z,{height:20,width:20,color:"#00bfff"}):Object(S.jsx)(z.b,{size:15,color:"red"})})]}),k&&Object(S.jsx)(J,{twitId:a,showCommentForm:le,sync:O,setSync:v}),j.length>0&&Object(S.jsx)("div",{className:"mt-2 rounded",children:j.filter((function(e){return!e.isDeleted})).map((function(e,t){return Object(S.jsx)(X,{comment:e,apiCallHook:f,email:h},t)}))})]})},X=function(e){var t=e.comment,a=t.id,r=t.text,s=t.usercomments,c=t.likecomments,l=t.createdAt,u=e.email,d=e.apiCallHook,b=Object(n.useState)(!1),j=Object(o.a)(b,2),m=j[0],p=j[1],h=Object(n.useState)(!1),f=Object(o.a)(h,2),g=f[0],O=f[1],v=Object(i.f)(),w=null===c||void 0===c?void 0:c.filter((function(e){return e.isLiked})).length;return Object(S.jsxs)("div",{className:"bg-blue-200 mb-2 p-2 rounded",children:[Object(S.jsx)("span",{className:"text-xs mb-2",children:Object(S.jsx)(P.a,{fromNow:!0,children:l})}),Object(S.jsx)("p",{className:"p-3 font-semibold",children:r}),Object(S.jsxs)("span",{style:{fontSize:"0.8em"},className:"mx-2 flex items-justify text-xs mt-2",children:[s.imageUrl?Object(S.jsx)("span",{className:"mr-1 cursor-pointer",onClick:function(e){return v.push("/".concat(s.username))},children:Object(S.jsx)("img",{src:s.imageUrl,alt:"Profile",style:{width:"20px",height:"20px",borderRadius:"50%"}})}):Object(S.jsx)(U.b,{size:15}),Object(S.jsx)("span",{className:"cursor-pointer",onClick:function(e){return v.push("/".concat(s.username))},children:u===s.email?"Me":s.username}),Object(S.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){return p(!0),setTimeout((function(){p(!1)}),1e3),void d("POST","".concat(x,"/likecomments/like/").concat(a))},children:m?Object(S.jsx)(Z,{height:20,width:20,color:"white"}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(z.c,{color:w>0?"blue":"gray",size:15}),Object(S.jsx)("span",{className:"text-xs",children:w})]})}),u===s.email&&Object(S.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex hover:text-red-800",onClick:function(){return O(!0),setTimeout((function(){p(!1)}),1e3),void d("DELETE","".concat(x,"/comments/").concat(a))},children:g?Object(S.jsx)(Z,{height:20,width:20,color:"white"}):Object(S.jsx)(z.b,{size:15,color:"red"})})]})]})},Z=function(e){var t=e.height,a=e.width,n=e.color;return Object(S.jsx)("span",{className:"m-auto mr-4",children:Object(S.jsx)(h.a,{type:"ThreeDots",color:n,height:t,width:a})})},ee=a(19);function te(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)({}),c=Object(o.a)(s,2),l=c[0],u=c[1],j=Object(n.useState)(!1),p=Object(o.a)(j,2),h=p[0],f=p[1],g=Object(n.useState)(!1),O=Object(o.a)(g,2),v=O[0],w=O[1],y=Object(n.useState)(0),N=Object(o.a)(y,2),k=N[0],T=N[1],C=Object(n.useState)(0),E=Object(o.a)(C,2),I=E[0],A=E[1],z=Object(n.useState)(0),_=Object(o.a)(z,2),F=_[0],R=_[1],L=Object(n.useState)(!1),W=Object(o.a)(L,2),J=W[0],H=W[1],Q=Object(n.useState)(!1),G=Object(o.a)(Q,2),q=G[0],B=G[1],M=Object(i.g)().user,K=Object(i.f)(),Y=localStorage.getItem("email")?localStorage.getItem("email"):"",V=localStorage.getItem("token"),$=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:t,url:a,data:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(V)}}).catch((function(e){var t,a,n,s;e.isAxiosError&&(console.log(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error),r(null===(n=e.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.error),console.log("Error found"))}));case 2:(s=e.sent)&&s.data.success?"GET"===t?(localStorage.setItem("users",JSON.stringify(s.data.data.users)),r("")):B(!q):r("Please check your network");case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){console.log(M);var e=JSON.parse(localStorage.getItem("twits")).filter((function(e){return e.twits.username===M})),t=JSON.parse(localStorage.getItem("users")).filter((function(e){return e.username===M}))[0];console.log(t);var a=t.followers.filter((function(e){return e.follower.isFollowed})),n=t.following.filter((function(e){return e.follower.isFollowed})),r=a.filter((function(e){return e.email===Y})).length>0,s=n.filter((function(e){return e.email===Y})).length>0;u(t),T(a.length),A(n.length),f(r),w(s),R(e.length)}),[]),Object(n.useEffect)((function(){return $("GET","".concat(x,"/auth/users")),function(){console.log("cleanup profile page")}}),[q]),Object(S.jsxs)("div",{id:"".concat(M),style:{fontSize:"1.1em"},className:"shadow-lg border border-gray-200 bg-gray-200 h-full rounded p-5 mb-4",children:[Object(S.jsxs)("p",{className:"flex justify-between mb-2",children:[(null===l||void 0===l?void 0:l.imageUrl)?Object(S.jsx)("span",{children:Object(S.jsx)("img",{src:null===l||void 0===l?void 0:l.imageUrl,alt:"Profile",style:{width:"3em",height:"3em",borderRadius:"50%"}})}):Object(S.jsx)("span",{className:"text-left",children:Object(S.jsx)(U.b,{size:25})}),Object(S.jsx)("span",{style:{fontFamily:"Roboto Slab"},className:"text-xl font-bold self-center",children:null===l||void 0===l?void 0:l.username}),Object(S.jsx)("span",{className:"text-left flex cursor-pointer",onClick:function(e){return K.push("people")},children:Object(S.jsx)(D.a,{size:30})}),Object(S.jsx)("span",{className:"text-left bg-black-400 cursor-pointer hover:invisible",onClick:function(){return K.push("/twits")},children:Object(S.jsx)(ee.a,{size:35})})]}),a&&Object(S.jsx)("div",{style:{backgroundColor:"white",fontWeight:"bold"},className:"text-red-500 text-center py-2 mb-5 rounded",children:a}),Object(S.jsxs)("span",{className:"text-sm mt-3 mb-1 flex justify-between",children:[Object(S.jsxs)("span",{children:[Object(S.jsxs)("span",{className:"ml-2",children:["Member since : ",Object(S.jsx)(P.a,{fromNow:!0,children:null===l||void 0===l?void 0:l.createdAt})]}),Object(S.jsx)("br",{}),v&&Object(S.jsx)("span",{className:"text-xs text-white bg-gray-500 rounded p-1 ml-2 mb-3",children:"Follows you"})]}),Object(S.jsx)("span",{className:"flex",children:Y!==(null===l||void 0===l?void 0:l.email)&&Object(S.jsx)(S.Fragment,{children:J?Object(S.jsx)(Z,{height:20,width:20,color:""}):Object(S.jsxs)("span",{className:"flex flex-col",children:[Object(S.jsx)("span",{className:"text-white bg-blue-900 rounded hover:bg-blue-400 p-2 cursor-pointer -mt-2 mr-1",onClick:function(){return H(!0),setTimeout((function(){H(!1)}),1e3),void(h?$("PATCH","".concat(x,"/followers/unfollow"),{followerId:null===l||void 0===l?void 0:l.id}):$("POST","".concat(x,"/followers/follow"),{followerId:null===l||void 0===l?void 0:l.id}))},children:h?"Following":"Follow"}),Object(S.jsx)("span",{className:"invisible -mt-2 mr-1"})]})})})]}),Object(S.jsx)("div",{className:"flex justify-between text-sm mt-5",children:Object(S.jsxs)("span",{children:[k>0&&Object(S.jsxs)("span",{className:"text-white bg-blue-500 rounded hover:bg-blue-400 p-2 cursor-pointer mr-3",onClick:function(e){return K.push("/follower/".concat(M))},children:[k," ",k>1?"followers":"follower"]}),I>0&&Object(S.jsxs)("span",{className:" text-white bg-green-500 rounded hover:bg-green-400 p-2 cursor-pointer mr-3",onClick:function(e){return K.push("/following/".concat(M))},children:[I," following"]}),F>0&&Object(S.jsxs)("span",{className:" text-white bg-yellow-500 rounded hover:bg-yellow-400 p-2 cursor-pointer mr-3",onClick:function(e){return K.push("/twits/".concat(M))},children:[F," ",F>1?"posts":"post"]})]})}),Object(S.jsx)("span",{children:(null===l||void 0===l?void 0:l.imageUrl)?Object(S.jsx)("img",{src:null===l||void 0===l?void 0:l.imageUrl,width:"100%",alt:"imgurl",className:"mt-3 rounded-lg"}):Object(S.jsx)("div",{className:"flex",children:Object(S.jsx)("span",{className:"m-auto",children:Object(S.jsx)(U.b,{size:300})})})})]})}function ae(e){var t=e.searchQuery,a=e.setSearchQuery,n=e.handleChange;return Object(S.jsxs)("div",{className:"flex mb-2 rounded",children:[Object(S.jsx)("div",{className:"flex-grow",children:Object(S.jsx)("input",{type:"text",name:"top-search",value:t,placeholder:"Search friends",required:!0,onChange:n,className:"p-2 text-dark-3 text-md rounded font-semibold text-center bg-white-200 w-full outline-none"})}),t&&Object(S.jsx)("div",{className:"flex text-white font-bold bg-blue-900 hover:bg-blue-500 cursor-pointer px-3 rounded items-center",onClick:function(){return a("")},children:"Clear"})]})}function ne(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),c=Object(o.a)(s,2),l=c[0],u=c[1],j=Object(n.useState)({}),p=Object(o.a)(j,2),h=(p[0],p[1]),f=Object(n.useState)(!1),g=Object(o.a)(f,2),O=(g[0],g[1],Object(n.useState)(!1)),v=Object(o.a)(O,2),w=(v[0],v[1],Object(n.useState)(0)),y=Object(o.a)(w,2),N=(y[0],y[1],Object(n.useState)(0)),k=Object(o.a)(N,2),T=(k[0],k[1],Object(n.useState)(!1)),C=Object(o.a)(T,2),E=(C[0],C[1],Object(n.useState)(!1)),I=Object(o.a)(E,2),A=I[0],P=I[1],z=Object(i.g)().user,_=Object(i.f)(),F=K.getState,R=K.dispatch,L=F(),W=Object(Y.b)((function(e){return e})),J=(W.twits,W.users,W.peopleData),H=W.searchData;W.networkStatus;console.log(L);var Q=localStorage.getItem("email")?localStorage.getItem("email"):"",G=localStorage.getItem("token"),q=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:t,url:a,data:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(G)}}).catch((function(e){var t,a,n,s;e.isAxiosError&&(console.log(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error),r(null===(n=e.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.error),console.log("Error found"))}));case 2:(s=e.sent)&&s.data.success?"GET"===t?(h(s.data.data.user),R({type:"SET_PEOPLE_DATA",data:s.data.data.users}),localStorage.setItem("peopleData",JSON.stringify(s.data.data.users)),R({type:"SET_SEARCH_DATA",data:s.data.data.users}),localStorage.setItem("searchData",JSON.stringify(s.data.data.users)),localStorage.setItem("users",JSON.stringify(s.data.data.users)),r("")):P(!A):(r("Please check your network"),R({type:"SET_PEOPLE_DATA",data:JSON.parse(localStorage.getItem("peopleData"))}),R({type:"SET_SEARCH_DATA",data:JSON.parse(localStorage.getItem("searchData"))}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return q("GET","".concat(x,"/auth/users")),R({type:"SET_SEARCH_DATA",data:JSON.parse(localStorage.getItem("peopleData"))}),function(){console.log("cleanup people page1")}}),[A]),Object(n.useEffect)((function(){return function(){var e=J.filter((function(e){return e.username.toLowerCase().indexOf(l.toLowerCase())>=0}));R({type:"SET_SEARCH_DATA",data:e}),localStorage.setItem("searchData",JSON.stringify(e))}(),function(){console.log("cleanup people page2")}}),[l]),Object(S.jsxs)("div",{id:"".concat(z),style:{fontSize:"1.1em"},className:"shadow-lg border border-gray-200 bg-gray-200 h-full rounded p-5 mb-4",children:[Object(S.jsxs)("p",{className:"flex justify-between mb-2",children:[Object(S.jsx)("span",{className:"text-left",children:Object(S.jsx)(D.a,{size:25})}),Object(S.jsx)("span",{style:{fontFamily:"Roboto Slab"},className:"text-xl font-bold self-center",children:"People"}),Object(S.jsx)("span",{className:"text-left bg-black-400 cursor-pointer hover:invisible",onClick:function(){return _.push("/twits")},children:Object(S.jsx)(ee.a,{size:35})})]}),a&&Object(S.jsx)("div",{style:{backgroundColor:"white",fontWeight:"bold"},className:"text-red-500 text-center py-2 m-1 rounded",children:"Please check your network !"}),Object(S.jsx)("span",{className:"text-sm mt-3 mb-5"}),Object(S.jsx)(ae,{searchQuery:l,handleChange:function(e){var t=e.target.value;u(t)},setSearchQuery:u}),Object(S.jsx)("div",{className:"flex flex-col text-md",children:H.sort((function(e,t){return e.email.localeCompare(t.email)})).map((function(e,t){return Object(S.jsx)("span",{className:"text-white bg-blue-400 rounded hover:bg-blue-400 p-2 mb-2 cursor-pointer",onClick:function(){return _.push("/".concat(e.username))},children:Object(S.jsxs)("span",{className:"mx-2 flex cursor-pointer",onClick:function(t){return _.push("/".concat(e.username))},children:[e.imageUrl?Object(S.jsx)("span",{className:"mr-2",children:Object(S.jsx)("img",{src:e.imageUrl,alt:"Profile",style:{width:"1.5em",height:"1.5em",borderRadius:"50%"}})}):Object(S.jsx)("span",{className:"mr-2 text-black",children:Object(S.jsx)(U.b,{size:"1.5em"})}),Q===e.email?"Me":e.username]})},t)}))}),Object(S.jsx)("div",{className:"flex",children:Object(S.jsx)("span",{className:"m-auto",children:Object(S.jsx)(D.a,{size:300})})})]})}function re(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=(t[1],Object(n.useState)("")),s=Object(o.a)(r,2),c=s[0],l=s[1],u=Object(n.useState)({}),d=Object(o.a)(u,2),b=d[0],j=d[1],m=Object(n.useState)([]),p=Object(o.a)(m,2),h=p[0],f=p[1],x=Object(n.useState)([]),g=Object(o.a)(x,2),O=g[0],v=g[1],w=Object(n.useState)(!1),y=Object(o.a)(w,2),N=(y[0],y[1],Object(n.useState)(!1)),k=Object(o.a)(N,2),T=(k[0],k[1],Object(i.g)().user),C=Object(i.f)(),E=localStorage.getItem("email")?localStorage.getItem("email"):"";localStorage.getItem("token");return Object(n.useEffect)((function(){return function(){var e=O.filter((function(e){return e.username.toLowerCase().indexOf(c.toLowerCase())>=0}));f(e)}(),function(){console.log("cleanup people page2")}}),[c]),Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("users")).filter((function(e){return e.username===T}))[0],t=e.followers.filter((function(e){return e.follower.isFollowed}));j(e),f(t),v(t)}),[]),Object(S.jsxs)("div",{id:"".concat(T),style:{fontSize:"1.1em"},className:"shadow-lg border border-gray-200 bg-gray-200 h-full rounded p-5 mb-4",children:[Object(S.jsxs)("p",{className:"flex justify-between mb-2",children:[Object(S.jsx)("span",{className:"cursor-pointer",onClick:function(e){return C.push("/".concat(null===b||void 0===b?void 0:b.username))},children:(null===b||void 0===b?void 0:b.imageUrl)?Object(S.jsx)("span",{children:Object(S.jsx)("img",{src:null===b||void 0===b?void 0:b.imageUrl,alt:"Profile",style:{width:"3em",height:"3em",borderRadius:"50%"}})}):Object(S.jsx)("span",{className:"text-left",children:Object(S.jsx)(U.b,{size:25})})}),Object(S.jsx)("span",{style:{fontFamily:"Roboto Slab"},className:"text-xl font-bold self-center",children:"Followers"}),Object(S.jsx)("span",{className:"text-left bg-black-400 cursor-pointer hover:invisible",onClick:function(){return C.push("/twits")},children:Object(S.jsx)(ee.a,{size:35})})]}),a&&Object(S.jsx)("div",{style:{backgroundColor:"white",fontWeight:"bold"},className:"text-red-500 text-center py-2 m-1 rounded",children:"Please check your network !"}),Object(S.jsx)("span",{className:"text-sm mt-3 mb-5"}),Object(S.jsx)(ae,{searchQuery:c,handleChange:function(e){var t=e.target.value;l(t)},setSearchQuery:l}),Object(S.jsx)("div",{className:"flex flex-col text-md",children:h.sort((function(e,t){return e.email.localeCompare(t.email)})).map((function(e,t){return Object(S.jsx)("span",{className:"text-white bg-blue-400 rounded hover:bg-blue-400 p-2 mb-2 cursor-pointer",onClick:function(){return C.push("/".concat(e.username))},children:Object(S.jsxs)("span",{className:"mx-2 flex cursor-pointer",onClick:function(t){return C.push("/".concat(e.username))},children:[e.imageUrl?Object(S.jsx)("span",{className:"mr-2",children:Object(S.jsx)("img",{src:e.imageUrl,alt:"Profile",style:{width:"1.5em",height:"1.5em",borderRadius:"50%"}})}):Object(S.jsx)("span",{className:"mr-2 text-black",children:Object(S.jsx)(U.b,{size:"1.5em"})}),E===e.email?"Me":e.username]})},t)}))}),Object(S.jsx)("div",{className:"flex",children:Object(S.jsx)("span",{className:"m-auto",children:Object(S.jsx)(D.a,{size:300})})})]})}function se(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=(t[1],Object(n.useState)("")),s=Object(o.a)(r,2),c=s[0],l=s[1],u=Object(n.useState)({}),d=Object(o.a)(u,2),b=d[0],j=d[1],m=Object(n.useState)([]),p=Object(o.a)(m,2),h=p[0],f=p[1],x=Object(n.useState)([]),g=Object(o.a)(x,2),O=g[0],v=g[1],w=Object(n.useState)(!1),y=Object(o.a)(w,2),N=(y[0],y[1],Object(n.useState)(!1)),k=Object(o.a)(N,2),T=(k[0],k[1],Object(i.g)().user),C=Object(i.f)(),E=localStorage.getItem("email")?localStorage.getItem("email"):"";localStorage.getItem("token");return Object(n.useEffect)((function(){return function(){var e=O.filter((function(e){return e.username.toLowerCase().indexOf(c.toLowerCase())>=0}));f(e)}(),function(){console.log("cleanup people page2")}}),[c]),Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("users")).filter((function(e){return e.username===T}))[0],t=e.following.filter((function(e){return e.follower.isFollowed}));j(e),f(t),v(t)}),[]),Object(S.jsxs)("div",{id:"".concat(T),style:{fontSize:"1.1em"},className:"shadow-lg border border-gray-200 bg-gray-200 h-full rounded p-5 mb-4",children:[Object(S.jsxs)("p",{className:"flex justify-between mb-2",children:[Object(S.jsx)("span",{className:"cursor-pointer",onClick:function(e){return C.push("/".concat(null===b||void 0===b?void 0:b.username))},children:(null===b||void 0===b?void 0:b.imageUrl)?Object(S.jsx)("span",{children:Object(S.jsx)("img",{src:null===b||void 0===b?void 0:b.imageUrl,alt:"Profile",style:{width:"3em",height:"3em",borderRadius:"50%"}})}):Object(S.jsx)("span",{className:"text-left",children:Object(S.jsx)(U.b,{size:25})})}),Object(S.jsx)("span",{style:{fontFamily:"Roboto Slab"},className:"text-xl font-bold self-center",children:"People you follow"}),Object(S.jsx)("span",{className:"text-left bg-black-400 cursor-pointer hover:invisible",onClick:function(){return C.push("/twits")},children:Object(S.jsx)(ee.a,{size:35})})]}),a&&Object(S.jsx)("div",{style:{backgroundColor:"white",fontWeight:"bold"},className:"text-red-500 text-center py-2 m-1 rounded",children:"Please check your network !"}),Object(S.jsx)("span",{className:"text-sm mt-3 mb-5"}),Object(S.jsx)(ae,{searchQuery:c,handleChange:function(e){var t=e.target.value;l(t)},setSearchQuery:l}),Object(S.jsx)("div",{className:"flex flex-col text-md",children:h.sort((function(e,t){return e.email.localeCompare(t.email)})).map((function(e,t){return Object(S.jsx)("span",{className:"text-white bg-blue-400 rounded hover:bg-blue-400 p-2 mb-2 cursor-pointer",onClick:function(){return C.push("/".concat(e.username))},children:Object(S.jsxs)("span",{className:"mx-2 flex cursor-pointer",onClick:function(t){return C.push("/".concat(e.username))},children:[e.imageUrl?Object(S.jsx)("span",{className:"mr-2",children:Object(S.jsx)("img",{src:e.imageUrl,alt:"Profile",style:{width:"1.5em",height:"1.5em",borderRadius:"50%"}})}):Object(S.jsx)("span",{className:"mr-2 text-black",children:Object(S.jsx)(U.b,{size:"1.5em"})}),E===e.email?"Me":e.username]})},t)}))}),Object(S.jsx)("div",{className:"flex",children:Object(S.jsx)("span",{className:"m-auto",children:Object(S.jsx)(D.a,{size:300})})})]})}function ce(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),c=Object(o.a)(s,2),l=(c[0],c[1],Object(n.useState)({})),u=Object(o.a)(l,2),j=u[0],p=u[1],h=Object(n.useState)([]),f=Object(o.a)(h,2),O=f[0],v=f[1],w=Object(n.useState)([]),y=Object(o.a)(w,2),N=(y[0],y[1]),k=Object(n.useState)(!1),T=Object(o.a)(k,2),C=(T[0],T[1],Object(n.useState)(!1)),E=Object(o.a)(C,2),I=E[0],A=E[1],P=Object(i.g)().user,z=Object(i.f)(),D=localStorage.getItem("email")?localStorage.getItem("email"):"",_=localStorage.getItem("token"),F=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:t,url:a,data:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(_)}}).catch((function(e){e.isAxiosError&&console.log("Error found")}));case 2:(s=e.sent)&&s.data.success?"GET"===t?(p(s.data.data.user),N(s.data.data.users),v(s.data.data.users),localStorage.setItem("users",JSON.stringify(s.data.data.users)),r("")):A(!I):r("Please check your network");case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("twits")).filter((function(e){return e.twits.username===P}));p(e[0].twits),v(e),N(e),console.log(P,e)}),[]),Object(S.jsxs)("div",{id:"".concat(P),style:{fontSize:"1.1em"},className:"shadow-lg border border-gray-200 bg-gray-200 h-full rounded p-5 mb-4",children:[Object(S.jsxs)("p",{className:"flex justify-between mb-2",children:[Object(S.jsx)("span",{className:"cursor-pointer",onClick:function(e){return z.push("/".concat(null===j||void 0===j?void 0:j.username))},children:(null===j||void 0===j?void 0:j.imageUrl)?Object(S.jsx)("span",{children:Object(S.jsx)("img",{src:null===j||void 0===j?void 0:j.imageUrl,alt:"Profile",style:{width:"2.5em",height:"2.5em",borderRadius:"50%"}})}):Object(S.jsx)("span",{className:"text-left cursor-pointer",children:Object(S.jsx)(U.b,{size:25})})}),Object(S.jsx)("span",{style:{fontFamily:"Roboto Slab"},className:"text-xl font-bold self-center",children:"User's Twits"}),Object(S.jsx)("span",{className:"text-left bg-black-400 cursor-pointer hover:invisible",onClick:function(){return z.push("/twits")},children:Object(S.jsx)(ee.a,{size:35})})]}),a&&Object(S.jsx)("div",{style:{backgroundColor:"white",fontWeight:"bold"},className:"text-red-500 text-center py-2 m-1 rounded",children:"Please check your network !"}),Object(S.jsx)("span",{className:"text-sm mt-3 mb-5"}),Object(S.jsx)("div",{className:"flex flex-col text-md",children:O.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})).map((function(e,t){return Object(S.jsx)($,{twit:e,email:D,apiCallHook:F,baseUrl:x,frontendUrl:g,sync:I,setSync:A},t)}))})]})}var oe=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("loggedIn"))),t=Object(o.a)(e,2),a=(t[0],t[1],Object(n.useState)(JSON.parse(localStorage.getItem("signup"))||!1)),r=Object(o.a)(a,2),s=(r[0],r[1],K.getState),c=K.dispatch,u=s(),d=Object(Y.b)((function(e){return e}));d.searchQuery,d.networkStatus,console.log(u),Object(n.useEffect)((function(){navigator.onLine?(console.log("online"),c({type:"SET_NETWORK_STATUS",data:!0})):(console.log("offline"),c({type:"SET_NETWORK_STATUS",data:!1}))}),[]);var b=localStorage.getItem("username");function j(){var e=b?"Hello, ".concat(b):"Hello !";new Notification(e,{body:"Have you checked Twitee today?",icon:"https://res.cloudinary.com/thevetdoctor/image/upload/v1599332593/g1rozhabxswegvhp59h3.jpg"}),setTimeout(j,108e5)}return Notification.requestPermission().then((function(e){"granted"===e&&j()})),Object(S.jsx)(l.a,{children:Object(S.jsxs)(i.c,{children:[Object(S.jsx)(i.a,{exact:!0,path:"/",component:I}),Object(S.jsx)(i.a,{exact:!0,path:"/twits",component:V}),Object(S.jsx)(i.a,{exact:!0,path:"/people",component:ne}),Object(S.jsx)(i.a,{path:"/twits/:user",component:ce}),Object(S.jsx)(i.a,{path:"/following/:user",component:se}),Object(S.jsx)(i.a,{path:"/follower/:user",component:re}),Object(S.jsx)(i.a,{path:"/:user",component:te})]})})},le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(Y.a,{store:K,children:Object(S.jsx)(oe,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");le?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ie(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ie(t,e)}))}}()},56:function(e,t,a){}},[[104,1,2]]]);
//# sourceMappingURL=main.47535d85.chunk.js.map