(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{45:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(34),r=n.n(s),o=(n(45),n(3)),i=n(16),l=n(5),u=n(7),j=n.n(u),d=n(12),b=n(13),m=n.n(b),x=n(15),p=n.n(x),h=n(35),O="https://oba-twit.herokuapp.com",g=n(2);function f(e){var t=e.error,n=e.setError,a=(e.loading,e.setLoading),s=Object(c.useState)(JSON.parse(localStorage.getItem("signup"))),r=Object(o.a)(s,2),i=r[0],u=(r[1],"".concat(O,"/auth/").concat(i?"signup":"login")),j=Object(l.f)();return Object(g.jsx)("div",{children:Object(g.jsx)(h.GoogleLogin,{clientId:"865349714041-35tbv6kfmsdueb9cb018vukqpdul0shv.apps.googleusercontent.com",buttonText:i?"Signup with Google":"Login with Google",onSuccess:function(e){v(!0,e.profileObj.email,null,u,t,n,a,j,e.profileObj.name)},onFailure:function(e){console.log("login failed",e)},cookeiPolicy:"single_host_origin",style:{marginTop:"160px"}})})}var v=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n,c,a,s,r,o,i,l,u=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]&&u[0],n=u.length>1?u[1]:void 0,c=u.length>2&&void 0!==u[2]?u[2]:null,a=u.length>3?u[3]:void 0,u.length>4?u[4]:void 0,s=u.length>5?u[5]:void 0,r=u.length>6?u[6]:void 0,o=u.length>7?u[7]:void 0,i=u.length>8?u[8]:void 0,r(!0),t){e.next=16;break}return e.next=13,m()({method:"POST",url:"".concat(a),data:{email:n,password:c},headers:{"Content-Type":"application/json"}}).catch((function(e){s(e.response.data.error)}));case 13:l=e.sent,e.next=19;break;case 16:return e.next=18,m()({method:"POST",url:"".concat(a),data:{email:n,password:"passs",auth:"google",name:i},headers:{"Content-Type":"application/json"}}).catch((function(e){s(e.response.data.error)}));case 18:l=e.sent;case 19:l&&l.data.success?(localStorage.setItem("email",n),localStorage.setItem("token",l.data.data.token),r(!1),o.push("/twits")):r(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function w(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),u=i[0],j=i[1],d=Object(c.useState)(""),b=Object(o.a)(d,2),m=b[0],x=b[1],h=Object(c.useState)(!1),w=Object(o.a)(h,2),y=w[0],S=w[1],N=Object(c.useState)(JSON.parse(localStorage.getItem("signup"))),k=Object(o.a)(N,2),C=k[0],T=k[1],I=localStorage.getItem("token"),E=Object(l.f)(),A="".concat(O,"/auth/").concat(C?"signup":"login"),z=function(e){"email"===e.target.name?s(e.target.value):j(e.target.value)};return Object(c.useEffect)((function(){return I||E.push("/"),function(){}}),[]),Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)("h1",{style:{fontSize:20},className:"font-bold text-md mb-7",children:C?"Signup":"Login"}),Object(g.jsx)("input",{type:"text",name:"email",value:a,placeholder:"email",onChange:z,className:"px-3 rounded mb-5"}),Object(g.jsx)("input",{type:"password",name:"password",value:u,placeholder:"password",onChange:z,className:"px-3 rounded mb-5"}),Object(g.jsx)("br",{}),Object(g.jsxs)("div",{style:{flexDirection:"column"},className:"flex",children:[m&&Object(g.jsx)("span",{className:"mb-2 text-red-600",children:m}),Object(g.jsx)("div",{children:y?Object(g.jsx)("span",{className:"m-auto",children:Object(g.jsx)(p.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(g.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return v(!1,a,u,A,m,x,S,E)},className:"hover:bg-green-900 bg-green-400 font-medium p-2 rounded w-6 h-3 text-white",children:C?"Signup":"Login"})}),Object(g.jsxs)("span",{className:"text-xs mt-4 mb-4",children:[C?"Already signed up ?":"Not registered ?",Object(g.jsx)("a",{href:"/",className:"focus:text-md underline",onClick:function(){C?(T(!1),localStorage.setItem("signup",!1)):(T(!0),localStorage.setItem("signup",!0))},children:C?" Login here":" Signup here!"})]})]}),Object(g.jsx)(f,{error:m,setError:x,loading:y,setLoading:S})]})}var y=n(24),S=n.n(y),N=n(20),k=n(19),C=n(38),T=n(39);function I(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),l=i[0],u=i[1],b=Object(c.useState)(160),x=Object(o.a)(b,2),h=x[0],O=x[1],f=Object(c.useState)(""),v=Object(o.a)(f,2),w=v[0],y=v[1],S=Object(c.useState)(!1),N=Object(o.a)(S,2),k=N[0],C=N[1],T=localStorage.getItem("token"),I="".concat("https://oba-twit.herokuapp.com","/twits/post"),E=function(e){"title"===e.target.name?s(e.target.value):(u(e.target.value),O(160-e.target.value.length))},A=function(){var t=Object(d.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(!0),t.next=3,m()({method:"POST",url:"".concat(I),data:{title:a,text:l},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(T)}}).catch((function(e){console.log(e.response),y(e.response.data.error)}));case 3:n=t.sent,console.log(n),n&&n.data.success?(C(!1),e.setSync(!e.sync),e.showForm()):(C(!1),console.log("Error found"));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)("h1",{style:{fontSize:20},className:"font-bold text-md mb-7",children:"New twit"}),Object(g.jsx)("input",{type:"text",name:"title",value:a,placeholder:"title",onChange:E,className:"px-3 py-1 rounded mb-5"}),Object(g.jsx)("input",{type:"textarea",name:"text",rows:5,cols:8,maxLength:160,value:l,placeholder:"Drop in your twit ...",onChange:E,className:"px-3 rounded mb-5 h-40 text-md text-gray-600"}),Object(g.jsx)("br",{}),h,Object(g.jsxs)("div",{style:{flexDirection:"column"},className:"flex mb-5",children:[w&&Object(g.jsx)("span",{className:"mb-2 text-red-800 text-md",children:w}),Object(g.jsxs)("div",{className:"justify-items-center",children:[Object(g.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.showForm()},className:"hover:bg-gray-900 bg-gray-400 font-medium p-1 rounded text-white",children:"Cancel"}),k?Object(g.jsx)("span",{className:"m-auto",children:Object(g.jsx)(p.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(g.jsx)("span",{style:{cursor:"pointer"},onClick:A,className:"hover:bg-green-900 bg-green-400 font-medium p-2 rounded text-white mx-2",children:"Send"})]})]})]})}function E(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(160),i=Object(o.a)(r,2),l=i[0],u=i[1],b=Object(c.useState)(""),x=Object(o.a)(b,2),h=x[0],O=x[1],f=Object(c.useState)(!1),v=Object(o.a)(f,2),w=v[0],y=v[1],S=localStorage.getItem("token"),N="".concat("https://oba-twit.herokuapp.com","/comments"),k=function(){var t=Object(d.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.twitId){t.next=2;break}return t.abrupt("return");case 2:if(a){t.next=5;break}return O("Inputs required"),t.abrupt("return");case 5:return y(!0),t.next=8,m()({method:"POST",url:"".concat(N,"/").concat(e.twitId),data:{text:a},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(S)}}).catch((function(e){console.log(e.response),O(e.response.data.error)}));case 8:n=t.sent,console.log(n),n&&n.data.success?(y(!1),e.setSync(!e.sync),e.showCommentForm()):(y(!1),console.log("Error found"));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)("h1",{style:{fontSize:20},className:"font-bold text-xs mb-3",children:"New Comment"}),Object(g.jsx)("input",{type:"textarea",name:"text",rows:5,cols:8,maxLength:160,value:a,placeholder:"Drop in your comment ...",onChange:function(e){"text"===e.target.name&&(s(e.target.value),u(160-e.target.value.length))},className:"px-3 rounded mb-5 h-20 text-md text-gray-600",required:!0}),Object(g.jsx)("br",{}),l,Object(g.jsxs)("div",{style:{flexDirection:"column"},className:"flex mb-5",children:[h&&Object(g.jsx)("span",{className:"mb-2 text-red-800 text-xs",children:h}),Object(g.jsxs)("div",{className:"justify-items-center",children:[Object(g.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.showCommentForm()},className:"hover:bg-gray-900 bg-gray-400 font-medium p-1 rounded text-white",children:"Cancel"}),w?Object(g.jsx)("span",{className:"m-auto",children:Object(g.jsx)(p.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(g.jsx)("span",{style:{cursor:"pointer"},onClick:k,className:"hover:bg-green-900 bg-green-400 font-medium p-1 rounded text-white mx-2",children:"Send"})]})]})]})}function A(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),r=Object(o.a)(s,2),i=r[0],u=r[1],b=Object(c.useState)(!1),x=Object(o.a)(b,2),p=x[0],h=x[1],O=Object(c.useState)(!1),f=Object(o.a)(O,2),v=f[0],w=f[1],y=localStorage.getItem("email")?localStorage.getItem("email"):"",S=Object(l.f)(),N=localStorage.getItem("token"),E="https://oba-twit.herokuapp.com",A="".concat(E,"/twits"),L=function(){h(!p)},D=function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:t,url:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:w(!v);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"GET",url:"".concat(A),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:(t=e.sent)&&t.data.success?u(t.data.data):(console.log("Error found"),a("Error found"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return N||S.push("/"),function(){console.log("cleanup twits 1")}}),[]),Object(c.useEffect)(Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(),e.abrupt("return",(function(){console.log("cleanup twits 2")}));case 2:case"end":return e.stop()}}),e)}))),[v]),Object(g.jsxs)("div",{className:"mb-5",children:[p&&Object(g.jsx)(I,{error:n,showForm:L,sync:v,setSync:w}),Object(g.jsxs)("p",{className:"py-2 px-2 rounded bg-blue-500 mb-4 flex justify-between",children:[Object(g.jsx)("span",{className:"text-left",children:Object(g.jsx)(k.a,{})}),Object(g.jsx)("span",{style:{cursor:"pointer"},className:"text-right",onClick:function(){localStorage.removeItem("token"),S.push("/")},children:Object(g.jsx)(C.a,{})})]}),Object(g.jsx)("span",{style:{cursor:"pointer"},className:"text-xs my-10",onClick:L,children:Object(g.jsx)(T.a,{size:15,color:"teal"})}),Object(g.jsx)("p",{className:"text-center font-bold text-blue-500 mb-4",children:"Twits"}),i.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})).map((function(e,t){return Object(g.jsx)(z,{twit:e,email:y,apiCallHook:D,baseUrl:E,sync:v,setSync:w,showForm:L,formActive:p},t)}))]})}var z=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],s=n[1],r=e.twit,i=r.id,l=r.title,u=r.text,j=r.twits,d=r.likes,b=r.comments,m=r.createdAt,x=e.email,p=e.apiCallHook,h=e.baseUrl,O=e.sync,f=e.setSync,v=d.filter((function(e){return e.isLiked})).length,w=function(){s(!a)};return Object(g.jsxs)("div",{className:"bg-blue-100 rounded p-5 mb-2",children:[Object(g.jsx)("p",{className:"font-bold text-center",children:l}),Object(g.jsx)("span",{className:"text-xs mb-2",children:Object(g.jsx)(S.a,{fromNow:!0,children:m})}),Object(g.jsx)("p",{children:u}),Object(g.jsxs)("p",{className:"text-xs text-gray-800 flex my-2",children:[Object(g.jsxs)("span",{className:"mx-2 flex",children:[Object(g.jsx)(N.b,{size:15})," ",x===j.email?"Me":j.username]}),Object(g.jsxs)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){return console.log("like twit with id: ",i),void p("POST","".concat(h,"/likes/like/").concat(i))},children:[Object(g.jsx)(k.c,{color:v>0?"blue":"gray",size:15}),Object(g.jsx)("span",{className:"text-xs",children:v})]}),Object(g.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){return console.log("comment twit with id: ",i),void w()},children:Object(g.jsx)(N.a,{size:15})}),x===j.email&&Object(g.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex hover:text-red-800",onClick:function(){return console.log("delete twit with id: ",i),void p("DELETE","".concat(h,"/twits/").concat(i))},children:Object(g.jsx)(k.b,{size:15})})]}),a&&Object(g.jsx)(E,{twitId:i,showCommentForm:w,sync:O,setSync:f}),b.length>0&&Object(g.jsx)("div",{className:"mt-2 rounded",children:b.map((function(e,t){return Object(g.jsx)(L,{comment:e,email:x},t)}))})]})},L=function(e){var t=e.comment,n=t.text,c=t.usercomments,a=t.createdAt,s=e.email;return Object(g.jsxs)("div",{className:"bg-green-300 mb-2 p-2 rounded",children:[Object(g.jsx)("span",{className:"text-xs mb-2",children:Object(g.jsx)(S.a,{fromNow:!0,children:a})}),Object(g.jsx)("p",{children:n}),Object(g.jsxs)("span",{className:"mx-2 flex items-justify text-xs",children:[Object(g.jsx)(N.b,{size:15}),Object(g.jsx)("span",{className:"",children:s===c.email?"Me":c.username})]})]})},D=n(40);var F=function(){var e=Object(c.useState)(JSON.parse(localStorage.getItem("loggedIn"))),t=Object(o.a)(e,2),n=(t[0],t[1],Object(c.useState)(JSON.parse(localStorage.getItem("signup"))||!1)),a=Object(o.a)(n,2);return a[0],a[1],Object(g.jsx)(i.a,{children:Object(g.jsx)("div",{className:"h-full w-full m-7 max-w-sm mx-auto bg-blue-200 rounded-xl shadow-md flex",children:Object(g.jsxs)("div",{className:"bg-white-300 rounded-xl p-4",children:[Object(g.jsxs)(l.c,{children:[Object(g.jsx)(l.a,{exact:!0,path:"/",component:w}),Object(g.jsx)(l.a,{exact:!0,path:"/twits",component:A})]}),Object(g.jsxs)("p",{className:"text-white-400 bold flex text-center",children:[Object(g.jsx)(D.a,{})," Twitee"]})]})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,92)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};r.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(F,{})}),document.getElementById("root")),P()}},[[91,1,2]]]);
//# sourceMappingURL=main.fdcd8cb1.chunk.js.map