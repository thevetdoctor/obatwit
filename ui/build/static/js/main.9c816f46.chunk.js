(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{47:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),a=n(36),o=n.n(a),r=(n(47),n(3)),i=n(17),l=n(5),u=n(7),d=n.n(u),j=n(12),b=n(13),m=n.n(b),p=n(15),x=n.n(p),h=n(37),f="https://oba-twit.herokuapp.com",g=n(16),O=n.n(g),v=n(1);O.a.config();var w="865349714041-35tbv6kfmsdueb9cb018vukqpdul0shv.apps.googleusercontent.com";function y(e){var t=e.error,n=e.setError,s=(e.loading,e.setLoading),a=Object(c.useState)(JSON.parse(localStorage.getItem("signup"))),o=Object(r.a)(a,2),i=o[0],u=(o[1],"".concat(f,"/auth/").concat(i?"signup":"login")),d=Object(l.f)();return Object(v.jsx)("div",{children:Object(v.jsx)(h.GoogleLogin,{clientId:w,buttonText:i?"Signup with Google":"Login with Google",onSuccess:function(e){k(!0,e.profileObj.email,null,u,t,n,s,d,e.profileObj.name)},onFailure:function(e){console.log("login failed",e)},cookeiPolicy:"single_host_origin",style:{marginTop:"160px"}})})}console.log("id",w);var N=n.p+"static/media/chat.7e8098f6.jpg",S=n(40);O.a.config();console.log("id","865349714041-35tbv6kfmsdueb9cb018vukqpdul0shv.apps.googleusercontent.com",Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GOOGLE_CLIENT_ID:"865349714041-35tbv6kfmsdueb9cb018vukqpdul0shv.apps.googleusercontent.com",REACT_APP_LINKEDIN_CLIENT_ID:"86vhj2q7ukf83q"}));var k=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,c,s,a,o,r,i,l,u=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]&&u[0],n=u.length>1?u[1]:void 0,c=u.length>2&&void 0!==u[2]?u[2]:null,s=u.length>3?u[3]:void 0,u.length>4?u[4]:void 0,a=u.length>5?u[5]:void 0,o=u.length>6?u[6]:void 0,r=u.length>7?u[7]:void 0,i=u.length>8?u[8]:void 0,o(!0),t){e.next=16;break}return e.next=13,m()({method:"POST",url:"".concat(s),data:{email:n,password:c},headers:{"Content-Type":"application/json"}}).catch((function(e){var t,n;e.response?(a(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error),setTimeout((function(){a("")}),1e3)):(a("Please check your network"),setTimeout((function(){a("")}),1e3))}));case 13:l=e.sent,e.next=19;break;case 16:return e.next=18,m()({method:"POST",url:"".concat(s),data:{email:n,password:"passs",auth:"google",name:i},headers:{"Content-Type":"application/json"}}).catch((function(e){a(e.response.data.error),setTimeout((function(){a("")}),1e3)}));case 18:l=e.sent;case 19:l&&l.data.success?(localStorage.setItem("email",n),localStorage.setItem("token",l.data.data.token),o(!1),r.push("/twits")):o(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function C(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(""),i=Object(r.a)(o,2),u=i[0],d=i[1],j=Object(c.useState)(""),b=Object(r.a)(j,2),m=b[0],p=b[1],h=Object(c.useState)(!1),g=Object(r.a)(h,2),O=g[0],w=g[1],C=Object(c.useState)(JSON.parse(localStorage.getItem("signup"))),T=Object(r.a)(C,2),E=T[0],I=T[1],A=localStorage.getItem("token"),_=Object(l.f)(),L="".concat(f,"/auth/").concat(E?"signup":"login"),D=function(e){"email"===e.target.name?a(e.target.value):d(e.target.value)};return Object(c.useEffect)((function(){return A||_.push("/"),function(){}}),[]),Object(v.jsxs)("div",{className:" text-center align-items-center",children:[Object(v.jsxs)("p",{className:"italic text-white-700 font-medium text-center mb-5",children:[Object(v.jsx)("span",{className:"text-purple-900 font-bold text-xl",children:"Twitee"})," .... Feel free, express yourself, network ...."]}),Object(v.jsx)("h1",{style:{fontSize:20},className:"font-bold text-md mb-7",children:E?"Signup":"Login"}),Object(v.jsx)("input",{type:"text",name:"email",value:s,placeholder:"email",onChange:D,className:"px-3 rounded mb-5"}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"password",name:"password",value:u,placeholder:"password",onChange:D,className:"px-3 rounded mb-5"}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{style:{flexDirection:"column"},className:"flex",children:[m&&Object(v.jsx)("span",{className:"mb-2 text-red-600",children:m}),Object(v.jsx)("div",{children:O?Object(v.jsx)("span",{className:"m-auto",children:Object(v.jsx)(x.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(v.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return k(!1,s,u,L,m,p,w,_)},className:"hover:bg-green-900 bg-green-400 font-medium p-2 rounded w-6 h-3 text-white",children:E?"Signup":"Login"})}),Object(v.jsxs)("span",{className:"text-xs mt-4 mb-4",children:[E?"Already signed up ?":"Not registered ?",Object(v.jsx)("a",{href:"/",className:"focus:text-md underline",onClick:function(){E?(I(!1),localStorage.setItem("signup",!1)):(I(!0),localStorage.setItem("signup",!0))},children:E?" Login here":" Signup here!"})]})]}),Object(v.jsx)(y,{error:m,setError:p,loading:O,setLoading:w}),Object(v.jsxs)("p",{className:"text-white-400 bold flex text-center",children:[Object(v.jsx)(S.a,{})," Twitee"]}),Object(v.jsx)("img",{src:N,alt:"CHat",className:"",style:{borderRadius:"5",width:"100"}})]})}var T=n(26),E=n.n(T),I=n(18),A=n(21),_=n(42),L=n(41);function D(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(""),i=Object(r.a)(o,2),l=i[0],u=i[1],b=Object(c.useState)(160),p=Object(r.a)(b,2),h=p[0],g=p[1],O=Object(c.useState)(""),w=Object(r.a)(O,2),y=w[0],N=w[1],S=Object(c.useState)(!1),k=Object(r.a)(S,2),C=k[0],T=k[1],E=localStorage.getItem("token"),I="".concat(f,"/twits/post"),A=function(e){"title"===e.target.name?a(e.target.value):(u(e.target.value),g(160-e.target.value.length))},_=function(){var t=Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s&&l){t.next=3;break}return N("Inputs required"),t.abrupt("return");case 3:return T(!0),t.next=6,m()({method:"POST",url:"".concat(I),data:{title:s,text:l},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(E)}}).catch((function(e){console.log(e.response),N(e.response.data.error)}));case 6:n=t.sent,console.log(n),n&&n.data.success?(T(!1),e.setSync(!e.sync),e.showForm()):(T(!1),console.log("Error found"));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"text-center sticky top-5 rounded pb-1 bg-blue-300",children:[Object(v.jsx)("h1",{style:{fontSize:20},className:"font-bold text-base mb-3",children:"New twit"}),Object(v.jsx)("input",{type:"text",name:"title",value:s,placeholder:"title",onChange:A,className:"px-3 py-1 rounded mb-5",required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"textarea",name:"text",rows:5,cols:8,maxLength:160,value:l,placeholder:"Drop in your twit ...",onChange:A,className:"px-3 rounded mb-5 h-40 text-md text-gray-600",required:!0}),Object(v.jsx)("br",{}),h,Object(v.jsxs)("div",{style:{flexDirection:"column"},className:"flex mb-5",children:[y&&Object(v.jsx)("span",{className:"mb-2 text-red-800 text-md",children:y}),Object(v.jsxs)("div",{className:"justify-items-center mt-2",children:[Object(v.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.showForm()},className:"hover:bg-gray-900 bg-gray-400 font-medium p-1 rounded text-white",children:"Cancel"}),C?Object(v.jsx)("span",{className:"m-auto",children:Object(v.jsx)(x.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(v.jsx)("span",{style:{cursor:"pointer"},onClick:_,className:"hover:bg-green-900 bg-green-400 font-medium p-1 rounded text-white mx-2",children:"Send"})]})]})]})}function P(e){var t=Object(c.useState)(""),n=Object(r.a)(t,2),s=n[0],a=n[1],o=Object(c.useState)(160),i=Object(r.a)(o,2),l=i[0],u=i[1],b=Object(c.useState)(""),p=Object(r.a)(b,2),h=p[0],g=p[1],O=Object(c.useState)(!1),w=Object(r.a)(O,2),y=w[0],N=w[1],S=localStorage.getItem("token"),k="".concat(f,"/comments"),C=function(){var t=Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.twitId){t.next=2;break}return t.abrupt("return");case 2:if(s){t.next=5;break}return g("Inputs required"),t.abrupt("return");case 5:return N(!0),t.next=8,m()({method:"POST",url:"".concat(k,"/").concat(e.twitId),data:{text:s},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(S)}}).catch((function(e){console.log(e.response),g(e.response.data.error)}));case 8:n=t.sent,console.log(n),n&&n.data.success?(N(!1),e.setSync(!e.sync),e.showCommentForm()):(N(!1),console.log("Error found"));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"text-center",children:[Object(v.jsx)("p",{style:{fontSize:20},className:"font-bold text-base mb-3",children:"New Comment"}),Object(v.jsx)("input",{type:"textarea",name:"text",rows:5,cols:8,maxLength:160,value:s,placeholder:"Drop in your comment ...",onChange:function(e){"text"===e.target.name&&(a(e.target.value),u(160-e.target.value.length))},className:"px-3 rounded mb-5 h-20 text-md text-gray-600",required:!0}),Object(v.jsx)("br",{}),l,Object(v.jsxs)("div",{style:{flexDirection:"column"},className:"flex mb-5",children:[h&&Object(v.jsx)("span",{className:"mb-2 text-red-800 text-xs",children:h}),Object(v.jsxs)("div",{className:"justify-items-center",children:[Object(v.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.showCommentForm()},className:"hover:bg-gray-900 bg-gray-400 font-medium p-1 rounded text-white",children:"Cancel"}),y?Object(v.jsx)("span",{className:"m-auto",children:Object(v.jsx)(x.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(v.jsx)("span",{style:{cursor:"pointer"},onClick:C,className:"hover:bg-green-900 bg-green-400 font-medium p-1 rounded text-white mx-2",children:"Send"})]})]})]})}function z(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)([]),o=Object(r.a)(a,2),i=o[0],u=o[1],b=Object(c.useState)(!1),p=Object(r.a)(b,2),x=p[0],h=p[1],g=Object(c.useState)(!1),O=Object(r.a)(g,2),w=O[0],y=O[1],N=Object(c.useState)(0),S=Object(r.a)(N,2),k=S[0],C=S[1],T=localStorage.getItem("email")?localStorage.getItem("email"):"",E=Object(l.f)(),P=localStorage.getItem("token"),z="".concat(f,"/twits"),q=function(){h(!x)},R=function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:t,url:n,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(P)}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:y(!w);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"GET",url:"".concat(z),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(P)}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:(t=e.sent)&&t.data.success?u(t.data.data):(console.log("Error found"),s("Error found"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"GET",url:"".concat(f,"/auth/users"),headers:{"Content-Type":"application/json"}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:(t=e.sent)&&t.data.success?C(t.data.data.count):(console.log("Error found"),s("Error found"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return P||E.push("/"),B(),function(){console.log("cleanup twits 1")}}),[]),Object(c.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(),e.abrupt("return",(function(){console.log("cleanup twits 2")}));case 2:case"end":return e.stop()}}),e)}))),[w]),Object(v.jsxs)("div",{className:"mb-5",children:[x&&Object(v.jsx)(D,{error:n,showForm:q,sync:w,setSync:y}),Object(v.jsxs)("p",{className:"italic text-white-700 font-medium text-center",children:[Object(v.jsx)("span",{className:"text-purple-900 font-bold text-xl",children:"Twitee"})," .... Feel free, express yourself, network ...."]}),Object(v.jsxs)("p",{className:"py-2 px-2 rounded bg-blue-300 mb-4 flex justify-between",children:[Object(v.jsx)("span",{className:"text-left",children:Object(v.jsx)(A.a,{})}),k>0&&Object(v.jsxs)("span",{className:"text-left flex",children:[Object(v.jsx)(L.a,{size:25}),k]}),Object(v.jsx)("span",{style:{cursor:"pointer"},className:"text-right",onClick:function(){localStorage.removeItem("token"),E.push("/")},children:Object(v.jsx)(_.a,{})})]}),Object(v.jsxs)("div",{style:{cursor:"pointer"},className:"w-full text-white-400 flex justify-between",onClick:q,children:[Object(v.jsx)("span",{}),Object(v.jsx)("span",{className:"font-bold mb-4 italic",children:"Twits"}),Object(v.jsx)("span",{style:{position:"-webkit-sticky"},className:"sticky top-4 mr-4 -ml-6",children:Object(v.jsx)(I.b,{size:25})})]}),i.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})).map((function(e,t){return Object(v.jsx)(F,{twit:e,email:T,apiCallHook:R,baseUrl:f,sync:w,setSync:y,showForm:q,formActive:x},t)}))]})}var F=function(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),s=n[0],a=n[1],o=e.twit,i=o.id,l=o.title,u=o.text,d=o.twits,j=o.likes,b=o.comments,m=o.createdAt,p=e.email,x=e.apiCallHook,h=e.baseUrl,f=e.sync,g=e.setSync,O=j.filter((function(e){return e.isLiked})).length,w=function(){a(!s)};return Object(v.jsxs)("div",{className:"bg-blue-100 rounded p-5 mb-2",children:[Object(v.jsx)("p",{className:"font-bold text-center",children:l}),Object(v.jsx)("span",{className:"text-xs mb-2",children:Object(v.jsx)(E.a,{fromNow:!0,children:m})}),Object(v.jsx)("p",{className:"font-sans antialiased",children:u}),Object(v.jsxs)("p",{className:"text-xs text-gray-800 flex my-2",children:[Object(v.jsxs)("span",{className:"mx-2 flex",children:[Object(v.jsx)(I.c,{size:15})," ",p===d.email?"Me":d.username]}),Object(v.jsxs)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){return console.log("like twit with id: ",i),void x("POST","".concat(h,"/likes/like/").concat(i))},children:[Object(v.jsx)(A.c,{color:O>0?"blue":"gray",size:15}),Object(v.jsx)("span",{className:"text-xs",children:O})]}),Object(v.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){return console.log("comment twit with id: ",i),void w()},children:Object(v.jsx)(I.a,{size:15})}),p===d.email&&Object(v.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex hover:text-red-800",onClick:function(){return console.log("delete twit with id: ",i),void x("DELETE","".concat(h,"/twits/").concat(i))},children:Object(v.jsx)(A.b,{size:15})})]}),s&&Object(v.jsx)(P,{twitId:i,showCommentForm:w,sync:f,setSync:g}),b.length>0&&Object(v.jsx)("div",{className:"mt-2 rounded",children:b.map((function(e,t){return Object(v.jsx)(q,{comment:e,email:p},t)}))})]})},q=function(e){var t=e.comment,n=t.text,c=t.usercomments,s=t.createdAt,a=e.email;return Object(v.jsxs)("div",{className:"bg-green-300 mb-2 p-2 rounded",children:[Object(v.jsx)("span",{className:"text-xs mb-2",children:Object(v.jsx)(E.a,{fromNow:!0,children:s})}),Object(v.jsx)("p",{children:n}),Object(v.jsxs)("span",{className:"mx-2 flex items-justify text-xs",children:[Object(v.jsx)(I.c,{size:15}),Object(v.jsx)("span",{className:"",children:a===c.email?"Me":c.username})]})]})};var R=function(){var e=Object(c.useState)(JSON.parse(localStorage.getItem("loggedIn"))),t=Object(r.a)(e,2),n=(t[0],t[1],Object(c.useState)(JSON.parse(localStorage.getItem("signup"))||!1)),s=Object(r.a)(n,2);return s[0],s[1],Object(v.jsx)(i.a,{children:Object(v.jsx)("div",{className:"h-full w-full m-0 max-w-xl max-h-xl my-0 mx-auto bg-blue-200 rounded-xl shadow-md -px-3",children:Object(v.jsx)("div",{className:"bg-white-300 rounded-xl p-4",children:Object(v.jsxs)(l.c,{children:[Object(v.jsx)(l.a,{exact:!0,path:"/",component:C}),Object(v.jsx)(l.a,{exact:!0,path:"/twits",component:z})]})})})})};O.a.config();self.__WB_MANIFEST;var W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(R,{})}),document.getElementById("root")),function(e){if(console.log(e,""),"serviceWorker"in navigator){var t=new URL("",window.location.href);if(console.log(e,"",t.origin!==window.location.origin),t.origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");W?(console.log(e,"",W),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):(console.log(W),B(t,e))}))}}()}},[[94,1,2]]]);
//# sourceMappingURL=main.9c816f46.chunk.js.map