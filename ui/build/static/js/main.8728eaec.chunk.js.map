{"version":3,"sources":["components/GoogleAuth.js","components/Posts.js","redux/actions.js","redux/reducer.js","redux/store.js","components/AttachImage.js","components/TwitForm.js","components/CommentForm.js","components/Image.js","components/TopSearch.js","components/Twits.js","components/Twits/Twits.js","components/AttachProfileImage.js","components/UserAssetTab.js","components/Profile.js","components/People.js","components/Followers.js","components/Following.js","components/UserTwits.js","components/chat.jpg","components/Reset.js","components/Chat.js","components/Chats.js","components/Verified.js","components/Subscriptions.js","App.js","serviceWorkerRegistration.js","index.js","helper.js"],"names":["dotenv","config","clientId","process","GoogleAuth","props","error","setError","setLoading","loading","useState","JSON","parse","localStorage","getItem","signup","apiUrl","baseUrl","history","useHistory","buttonText","onSuccess","res","authenticate","profileObj","email","name","imageUrl","onFailure","cookiePolicy","style","marginTop","Logout","render","renderProps","size","onLogoutSuccess","a","google","password","setItem","axios","method","url","data","headers","catch","isAxiosError","response","search","success","console","log","newUser","toast","position","hideProgressBar","auth","user","id","username","token","setTimeout","push","Posts","setEmail","setPassword","setSignup","handleChange","e","target","value","useEffect","fontFamily","fontWeight","className","fontSize","type","placeholder","onChange","color","height","width","onClick","actions","setTwitData","setMessagesData","setUserCount","setPeopleData","setSearchData","setUsersData","setNewsType","setPage","setTotalPages","setSearchQuery","setNetworkStatus","setFormActive","setUser","setSubs","deleteTwit","updateTwit","setRefreshTwitData","initialState","twits","twitCount","page","perPage","messages","users","peopleData","searchData","usersData","subs","searchQuery","networkStatus","formActive","followers","following","followerCount","followingCount","userTwits","isFollower","store","createStore","state","action","newTwitData","length","userData","filter","obj","follower","isFollowed","isFollowing","newsByType","newsData","newsType","news","totalPages","Math","ceil","pageSize","newsBySearch","item","text","toLowerCase","indexOf","twitIndex","findIndex","twit","leftOvertwits","splice","updateTwitIndex","updatedTwitData","devToolsEnhancer","AttachImage","setImageUrl","setUploading","imgUrl","setImgUrl","handleImage","serviceImage","files","FormData","append","fetch","body","json","imgLink","secure_url","src","alt","accept","TwitForm","setText","textArea","setTextArea","sendTwit","removeItem","refreshData","showForm","display","flexDirection","alignItems","borderRadius","rows","cols","border","maxLength","overflow","required","justifyContent","cursor","CommentForm","sendComment","twitId","setSync","sync","showCommentForm","PopUp","show","handleShow","sourceData","Modal","onHide","dialogClassName","Header","closeButton","Title","header","Body","source","altTag","marginBottom","href","TopSearch","Twit","link","likes","comments","createdAt","updatedAt","userId","apiCallHook","frontendUrl","checkOpenForms","textIntact","handleDeleteTwit","commentFormActive","setCommentFormActive","editLoading","setEditLoading","likeLoading","setLikeLoading","deleteLoading","storyText","setStoryText","editForm","setEditForm","linkCopied","more","setMore","viewLikes","setViewLikes","viewComments","setViewComments","setShow","setSourceData","menuShow","setMenuShow","likeCount","like","isLiked","filteredComments","comment","isDeleted","userlikes","split","x","replace","showMore","editStory","fromNow","navigator","share","title","slice","then","lineHeight","fontStyle","Date","getTime","map","person","idx","sort","b","Comment","usercomments","likecomments","setDeleteLoading","llikeCount","setLikeCount","lisLiked","setIsLiked","LikeUsers","LoadSpan","Twits","scrollValue","setScrollValue","loadMore","setLoadMore","loadingMore","setLoadingMore","setRefresh","defaultSate","getState","dispatch","useSelector","img","getTwits","onScroll","window","document","documentElement","scrollTop","scrollHeight","innerHeight","refresh","stringify","getUsers","count","checkSub","sub","searchResults","handleSearch","addEventListener","removeEventListener","location","hash","element","getElementById","scrollIntoView","bottom","top","margin","newPage","getMoreTwits","backgroundColor","AttachProfileImage","limgUrl","setlImgUrl","UserAssetTab","status","Profile","followLoading","setFollowLoading","useParams","defaultUsername","goBack","verified","bioVisible","bio","followerId","UserProfile","mobile","dob","lname","setName","lusername","setUserName","lbio","setBio","llocation","setLocation","ldob","setDob","lmobile","setMobile","nameHidden","setNameHidden","usernameHidden","setUsernameHidden","bioHidden","setBioHidden","locationHidden","setLocationHidden","dobHidden","setDobHidden","mobileHidden","setMobileHidden","editProfile","handleProfileInfo","htmlFor","disabled","pattern","People","setUserData","localeCompare","Follower","userDataInStore","Following","UserTwits","twitData","userTwitData","Reset","newpass1","setNewPass1","newpass2","setNewPass2","backgroundImage","Chat","msg","texts","Message","message","sender","toLocaleTimeString","Chats","getMessages","chatSender","chatReceiver","Verified","verifyUser","Subscriptions","alert","App","onLine","exact","path","component","require","urlBase64ToUint8Array","base64String","base64","repeat","rawdata","atob","outputArray","Uint8Array","i","charCodeAt","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","pushManager","subscribe","userVisibleOnly","applicationServerKey","subscription","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","theme","classList","remove","add","ReactDOM","StrictMode","URL","origin","contentType","get","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration","host"],"mappings":"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","file":"static/js/main.8728eaec.chunk.js","sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { GoogleLogin, GoogleLogout } from 'react-google-login';\r\n// import GoogleButton from 'react-google-button'\r\nimport { authenticate } from './Posts';\r\nimport { baseUrl } from '../helper';\r\nimport dotenv from \"dotenv\";\r\nimport { FiLogOut } from 'react-icons/fi';\r\n\r\ndotenv.config();\r\nconst clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\r\n\r\nexport default function GoogleAuth(props) {\r\n    const { error, setError, loading, setLoading } = props;\r\n    \r\n    const [signup, setSignup] = useState(JSON.parse(localStorage.getItem('signup')));\r\n    const apiUrl = `${baseUrl}/auth/${signup ? 'signup' : 'login'}`; \r\n    const history = useHistory(); \r\n\r\n    const onSuccess = (res) => {\r\n        authenticate(true, res.profileObj.email, null, apiUrl, error, setError, setLoading, history, res.profileObj.name, res.profileObj.imageUrl)\r\n    }\r\n    const onFailure = (res) => {\r\n        // console.log('login failed', res);\r\n    }\r\n    return (\r\n        <div>\r\n            <GoogleLogin \r\n                clientId={clientId}\r\n                buttonText={'Use Google'}\r\n                onSuccess={onSuccess}\r\n                onFailure={onFailure}\r\n                // isSignedIn={true}\r\n                cookiePolicy={'single_host_origin'}\r\n                style={{marginTop: '160px'}}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Logout = () => {\r\n    \r\n    const onSuccess = (res) => {\r\n        // console.log(res, 'Logout suceeded');\r\n    }\r\n    return(\r\n    <div>\r\n              <GoogleLogout \r\n                clientId={clientId}\r\n                render={renderProps => (\r\n                    <span><FiLogOut size={25}/></span>\r\n                )}\r\n                buttonText='Signout' \r\n                onLogoutSuccess={onSuccess}\r\n                style={{marginTop: '160px'}}\r\n            />\r\n    </div>\r\n    )\r\n}","/* eslint-disable no-unused-vars */\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Loader from 'react-loader-spinner';\r\nimport GoogleAuth from './GoogleAuth';\r\nimport { baseUrl } from '../helper';\r\n// import LinkedinAuth from './LinkedinAuth';\r\nimport dotenv from \"dotenv\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\ndotenv.config();\r\nconst clientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\r\n\r\nexport const authenticate = async(google = false, email, password = null, apiUrl, error, setError, setLoading, history, name, imageUrl) => {\r\n    localStorage.setItem('img', imageUrl);\r\n    setLoading(true);\r\n    let res;\r\n    if(!google) {\r\n        if(!(email && password)) {\r\n            if(!email) {\r\n                setError('Email is required');\r\n                setLoading(false);\r\n                return;\r\n            }\r\n            setError('Password required');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n        res = await axios({\r\n            method: 'POST',\r\n            url: `${apiUrl}`,\r\n            data: {email, password},\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            }\r\n        })\r\n        .catch(error => {\r\n            if(error.isAxiosError) {\r\n                if(error.response?.data?.error.search('NOTFOUND') >= 0) {\r\n                    setError('Please check your network');\r\n                } else {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            }\r\n        });\r\n        if(res && res.data.success) {\r\n            console.log(\"Login successful!\", res.data.data.newUser);\r\n            if(res.data.data.newUser) {\r\n                toast.success(\"Signup successful!\", {position: \"top-center\", hideProgressBar: true,});\r\n                toast.success(\"Please check your mail to activate your account!\", {position: \"top-center\", hideProgressBar: true,});\r\n            } else {\r\n                toast.success(\"Login successful!\", {position: \"top-center\", hideProgressBar: true});\r\n            }\r\n        } else {\r\n            toast.error(\"Something went wrong!\", {position: \"top-center\", hideProgressBar: true});\r\n        }\r\n    } else {\r\n        res = await axios({\r\n            method: 'POST',\r\n            url: `${apiUrl}`,\r\n            data: {email, password: 'passs', auth: 'google', name, imageUrl},\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            }\r\n        })\r\n        .catch(error => {\r\n            setError(error.response.data.error);\r\n        });\r\n        if(res && res.data.success) {\r\n            console.log(\"Login successful!\");\r\n            if(res.data.data.newUser) {\r\n                toast.success(\"Signup successful!\", {position: \"top-center\", hideProgressBar: true});\r\n                toast.success(\"Please check your mail to activate your account!\", {position: \"top-center\", hideProgressBar: true});\r\n            } else {\r\n            toast.success(\"Login successful!\", {position: \"top-center\", hideProgressBar: true});\r\n            }\r\n        } else {\r\n            toast.error(\"Something went wrong!\", {position: \"top-center\", hideProgressBar: true});\r\n        }\r\n    }\r\n        if(res && res.data.success) {\r\n            const {user: {id, imageUrl, username}, token} = res.data.data;\r\n            localStorage.setItem('email', email);\r\n            localStorage.setItem('img', imageUrl);\r\n            localStorage.setItem('userId', id);\r\n            localStorage.setItem('username', username);\r\n            localStorage.setItem('token', token);\r\n            setLoading(false);\r\n            setTimeout(() => {\r\n                history.push('/twits');\r\n            }, 2000);\r\n        } else {\r\n            setLoading(false);\r\n        }\r\n}\r\n\r\nexport default function Posts(props) {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [signup, setSignup] = useState(JSON.parse(localStorage.getItem('signup')));\r\n    const token = localStorage.getItem('token');\r\n    const history = useHistory();\r\nconst apiUrl = `${baseUrl}/auth/${signup ? 'signup' : 'login'}`; \r\n\r\nconst handleChange = (e) => {\r\n    if(e.target.name === 'email') {\r\n        setEmail(e.target.value);\r\n    } else {\r\n        setPassword(e.target.value);\r\n    }\r\n}\r\n\r\nconst handleSignupMode = () => {\r\n    if(!signup) {\r\n        setSignup(true);\r\n        localStorage.setItem('signup', true);\r\n    } else {\r\n        setSignup(false);\r\n        localStorage.setItem('signup', false);\r\n    }\r\n}\r\n\r\nuseEffect(() => {\r\n    if(token) {\r\n        history.push('/twits');\r\n    }\r\n    return () => {\r\n    }\r\n}, []);\r\n    return (\r\n        <div style={{fontFamily: 'Roboto', fontWeight: '600'}} className='text-center align-items-center bg-gradient-to-r from-cyan-500 to-blue-500'>\r\n             <p className='text-center mb-2'>\r\n                <span style={{fontFamily: 'Architects Daughter', fontSize: '1.8em'}} className='text-purple-900 font-bold italic'>Buzz<br/>\r\n                </span> \r\n                <span className='text-md'> Feel free, express yourself & network </span>\r\n            </p>\r\n            <ToastContainer />\r\n\r\n            <h3 style={{fontSize: 20}} className='font-bold text-md mb-4 mt-7'>\r\n                {signup ?  'Signup' : 'Login'}\r\n            </h3>\r\n            <input \r\n                type='text'\r\n                name='email'\r\n                value={email} \r\n                placeholder='email'\r\n                onChange={handleChange}\r\n                className='px-3 rounded mb-5'\r\n                /><br/>\r\n            <input \r\n                type='password'\r\n                name='password'\r\n                value={password} \r\n                placeholder='password' \r\n                onChange={handleChange}\r\n                className='px-3 rounded mb-5'\r\n            /><br/>\r\n            <div className='flex flex-col mb-3'>\r\n                {error && <span className='mb-2 text-red-600'>{error}</span>}\r\n                <div className='flex justify-center'>\r\n                    {!loading ?\r\n                    <span \r\n                        onClick={() => authenticate(false, email, password, apiUrl, error, setError, setLoading, history)}\r\n                        className='cursor-pointer mb-3 bg-green-500 hover:bg-green-400 py-1 px-6 rounded text-white'\r\n                    >    \r\n                        {signup ? 'Signup' : 'Login' }\r\n                        {/* {' '}{window.innerWidth} */}\r\n                    </span>\r\n                    :\r\n                    <span className=''>\r\n                        <Loader \r\n                        type='ThreeDots'\r\n                        color='#00bfff'\r\n                        height={40} \r\n                        width={40} \r\n                        />\r\n                     </span>}\r\n                </div>\r\n            </div>\r\n            {!token && <GoogleAuth\r\n                error={error}\r\n                setError={setError}\r\n                loading={loading}\r\n                setLoading={setLoading}\r\n            />}\r\n            {/* <LinkedinAuth /> */} \r\n            <div className='mt-7 mb-6 text-xs'>\r\n                    {signup ? 'Already registered ?' : 'Not registered ?' }\r\n                    <span className='hover:bg-purple-400 bg-purple-500 ml-2 p-1 rounded text-white font-bold cursor-pointer' onClick={handleSignupMode}> \r\n                        {signup ? ' Switch to Login' : ' Switch to Signup!' }\r\n                    </span>\r\n            </div>\r\n          {/* <img \r\n            src={bg}\r\n            alt='CHat'\r\n            className='invisible'\r\n            style={{borderRadius: '0.5em'}}\r\n          /> */}\r\n            {/* <p className=\"text-white-400 bold flex text-center\"><CgCopyright /> Twitee</p>          */}\r\n        </div>\r\n    )\r\n}\r\n","const actions = {\r\n    setTwitData: { type: 'SET_TWIT_DATA'},\r\n    setMessagesData: { type: 'SET_MESSAGES_DATA'},\r\n    setUserCount: { type: 'SET_USER_COUNT'},\r\n    setPeopleData: { type: 'SET_PEOPLE_DATA'},\r\n    setSearchData: { type: 'SET_SEARCH_DATA'},\r\n    setUsersData: { type: 'SET_USERS_DATA'},\r\n    setNewsType: { type: 'SET_NEWS_TYPE'},\r\n    setPage: { type: 'SET_PAGE'},\r\n    setTotalPages: { type: 'SET_TOTAL_PAGES'},\r\n    setSearchQuery: { type: 'SET_SEARCH_QUERY'},\r\n    setNetworkStatus: { type: 'SET_NETWORK_STATUS'},\r\n    setFormActive: { type: 'SET_FORM_ACTIVE'},\r\n    setUser: { type: 'SET_USER'},\r\n    setSubs: { type: 'SET_SUBS'},\r\n    deleteTwit: { type: 'DELETE_TWIT'},\r\n    updateTwit: { type: 'UPDATE_TWIT'},\r\n    setRefreshTwitData: { type: 'SET_REFRESH_TWIT_DATA'}\r\n  }\r\n  \r\n  export default actions;\r\n  ","import actions from \"./actions\";\r\n\r\nexport default function reducer(state= initialState, action) {\r\n    switch(action.type) {\r\n        case actions.setTwitData.type:\r\n        // console.log('setting twits data', action.data);\r\n        let newTwitData;\r\n        if(state.twits.length < state.twitCount) {\r\n                newTwitData = [...state.twits, ...action.data.twits];\r\n            }  else {\r\n                newTwitData = state.twits;\r\n            }\r\n            return {\r\n              ...state,\r\n              twits: newTwitData,\r\n              twitCount: action.data.twitCount\r\n            }          \r\n        case actions.setMessagesData.type:\r\n\r\n            return {\r\n              ...state,\r\n              messages: action.data\r\n            }          \r\n        case actions.setPeopleData.type:\r\n\r\n            return {\r\n              ...state,\r\n              peopleData: action.data\r\n            }          \r\n        case actions.setSearchData.type:\r\n\r\n            return {\r\n              ...state,\r\n              searchData: action.data\r\n            }          \r\n        case actions.setUser.type:\r\n\r\n            // console.log('user is set as', action.data);\r\n            const user = action.data.user;\r\n            const email = action.data.email;\r\n            const userData = state.peopleData?.filter(obj => obj.username === user)[0];\r\n            const userTwits = state.twits?.filter(obj => obj.twits.username === user);\r\n\r\n            // const {followers, following} = userData; \r\n            const followerCount = userData?.followers?.filter(user => user.follower.isFollowed).length;\r\n            const followingCount =  userData?.following?.filter(user => user.follower.isFollowed).length;\r\n            const isFollower = userData?.followers.filter(user => user.follower.isFollowed).filter(user => user.email === email).length > 0;\r\n            const isFollowing = userData?.following.filter(user => user.follower.isFollowed).filter(user => user.email === email).length > 0;\r\n\r\n            return {\r\n              ...state,\r\n              user, userData, followers: userData?.followers, following: userData?.following, followerCount, followingCount, isFollower, isFollowing, userTwits\r\n            }          \r\n        case actions.setUsersData.type:\r\n\r\n            return {\r\n              ...state,\r\n              usersData: action.data\r\n            }          \r\n        case actions.setUserCount.type:\r\n\r\n            return {\r\n              ...state,\r\n              users: action.data\r\n            }          \r\n        case actions.setFormActive.type:\r\n\r\n            return {\r\n              ...state,\r\n              formActive: action.data\r\n            }          \r\n        case actions.setNewsType.type:\r\n            const newsByType = state.newsData.filter(type => (type.type === action.data));\r\n\r\n            return {\r\n              ...state,\r\n              newsType: action.data, news: newsByType, searchQuery: '', page: 1, totalPages: Math.ceil(newsByType.length / state.pageSize)\r\n            }          \r\n            case actions.setPage.type:\r\n                // console.log(action.data)\r\n            return {\r\n                ...state,\r\n                page: action.data\r\n            }                   \r\n            case actions.setTotalPages.type:\r\n            return {\r\n                ...state,\r\n                totalPages: action.data\r\n            }                   \r\n            case actions.setSearchQuery.type:\r\n                let newsBySearch;\r\n                if(state.newsType === 'Filter By Type') {\r\n                    if(action.data === '') {\r\n                        newsBySearch = state.newsData;\r\n                    } else {\r\n                        newsBySearch = state.newsData.filter(item => {\r\n                            return item?.text?.toLowerCase().indexOf(action.data.toLowerCase()) >= 0;\r\n                        });\r\n                    }\r\n                } else {\r\n                    newsBySearch = state.newsData.filter(item => (item?.text?.toLowerCase().indexOf(action.data.toLowerCase()) >= 0) && (item.type === state.newsType));\r\n                }\r\n                    \r\n                return {\r\n                    ...state,\r\n                    searchQuery: action.data, news: newsBySearch, page: 1, totalPages: Math.ceil(newsBySearch.length / state.pageSize)\r\n                }                   \r\n            case actions.setNetworkStatus.type:\r\n                \r\n            return {\r\n                ...state,\r\n                networkStatus: action.data\r\n            }                   \r\n            case actions.setSubs.type:\r\n                \r\n            return {\r\n                ...state,\r\n                subs: action.data\r\n            }                   \r\n            case actions.deleteTwit.type:\r\n                const twitIndex = state.twits.findIndex(twit => twit.id === action.data);\r\n                const leftOvertwits = [...state.twits];\r\n                leftOvertwits.splice(twitIndex, 1);\r\n                // console.log(twitIndex, leftOvertwits);\r\n                \r\n            return {\r\n                ...state,\r\n                twits: leftOvertwits\r\n            }                   \r\n            case actions.updateTwit.type:\r\n                const updateTwitIndex = state.twits.findIndex(twit => twit.id === action.data.twit.id)\r\n                // {\r\n                //     console.log(twit.id, action.data.twit.id)\r\n                //     return \r\n                // });\r\n                let updatedTwitData = [...state.twits];\r\n                if(updateTwitIndex >= 0) {\r\n                    updatedTwitData.splice(updateTwitIndex, 1, action.data.twit);\r\n                }\r\n                // console.log(updateTwitIndex, updatedTwitData);\r\n                \r\n            return {\r\n                ...state,\r\n                twits: updatedTwitData\r\n            }                   \r\n            case actions.setRefreshTwitData.type:\r\n                    console.log('updated feed');                \r\n            return {\r\n                ...state,\r\n                twits: action.data.twits\r\n            }                   \r\n            default:\r\n                return state;\r\n    }\r\n};\r\n \r\nexport const initialState = {\r\n    twits: [],\r\n    twitCount: 1,\r\n    page: 1,\r\n    perPage: 20,\r\n    messages: [],\r\n    users: 0,\r\n    peopleData: JSON.parse(localStorage.getItem('peopleData')) || [],\r\n    searchData: [],\r\n    usersData: [],\r\n    subs: JSON.parse(localStorage.getItem('subs')) || [],\r\n    searchQuery: '',\r\n    networkStatus: false,\r\n    formActive: false,\r\n    user: '',\r\n    followers: [], \r\n    following: [], \r\n    followerCount: 0, \r\n    followingCount: 0, \r\n    userTwits: [],\r\n    isFollower: false\r\n};\r\n","import { createStore } from 'redux';\r\nimport { devToolsEnhancer } from 'redux-devtools-extension';\r\nimport reducer from './reducer';\r\n\r\nconst store = createStore(reducer, devToolsEnhancer());\r\n\r\nexport default store;","/* eslint-disable no-unused-vars */\r\nimport React, { useState } from 'react';\r\n// import Loader from \"react-loader-spinner\";\r\nimport { FaCamera } from \"react-icons/fa\";\r\n\r\nexport default function AttachImage({imageUrl, setImageUrl}) {\r\n    \r\n    const [uploading, setUploading] = useState(\"\");\r\n    const [imgUrl, setImgUrl] = useState(\"\");\r\n\r\n    const handleImage = async(e) => {\r\n        setUploading(\"loading\");\r\n        const serviceImage = e.target.files[0];\r\n        const data = new FormData();\r\n        const url = \"https://api.cloudinary.com/v1_1/thevetdoctor/image/upload\";\r\n        data.append(\"file\", serviceImage);\r\n        data.append(\"upload_preset\", \"zunt8yrw\");\r\n        const res = await fetch(url, {\r\n          method: \"POST\",\r\n          body: data\r\n        });\r\n        const imgLink = await res.json();\r\n        setImgUrl(imgLink.secure_url);\r\n        setImageUrl(imgLink.secure_url);\r\n        // const images = [imgLink.secure_url, ...serviceImages];\r\n        // setServiceImages(images);\r\n        setUploading(\"done\");\r\n      }\r\n    return (\r\n        <div className=\"flex p-1 rounded ml-1\">\r\n            {imgUrl ? \r\n                <img \r\n                    src={imgUrl} alt='post' style={{width: '20em', height: '9em'}} className='rounded'\r\n                /> :\r\n                <>\r\n                <label className='cursor-pointer flex'>\r\n                    <span className='-ml-2 pt-1'>Upload</span>\r\n                    <span className='ml-2'><FaCamera size={25} />\r\n                    </span>\r\n                    <input \r\n                        type=\"file\"\r\n                        placeholder=\"\"\r\n                        accept=\"image/*;capture\"\r\n                        className=\"hidden\"\r\n                        onChange={e => handleImage(e)}\r\n                        />\r\n                </label>\r\n                </>\r\n            }</div>\r\n        )\r\n}\r\n        \r\n/* <span className='ml-3 cursor-pointer flex'><FaCamera size={25}  /> */\r\n/* <span className='ml-2'>Add Image</span> */\r\n/* </span> */\r\n//   {uploading === \"loading\" &&\r\n//   <Loader \r\n//       type='TailSpin'\r\n//       color='#000'\r\n//       height={20} \r\n//       width={20} \r\n//   />}\r\n//   {/* {<FaCheck />} */}","import React, { useState } from 'react'\r\nimport axios from 'axios';\r\nimport Loader from 'react-loader-spinner';\r\nimport { baseUrl } from '../helper';\r\nimport AttachImage from './AttachImage';\r\n\r\nexport default function TwitForm(props) {\r\n    // const [title, setTitle] = useState(localStorage.getItem('twitTitle') ? localStorage.getItem('twitTitle') : '');\r\n    const [text, setText] = useState(localStorage.getItem('twitText') ? localStorage.getItem('twitText') : '');\r\n    const [imageUrl, setImageUrl] = useState(localStorage.getItem('twitImage') ? localStorage.getItem('twitImage') : '');\r\n    const [textArea, setTextArea] = useState(550);\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const token = localStorage.getItem('token'); \r\n    \r\n    const apiUrl = `${baseUrl}/twits/post`; \r\n\r\n    const handleChange = (e) => {\r\n        if(e.target.name === 'text') {\r\n            setText(e.target.value);\r\n            setTextArea(550 - e.target.value.length)\r\n            localStorage.setItem('twitText', e.target.value)\r\n        } else {\r\n            setImageUrl(e.target.value);\r\n            localStorage.setItem('twitImage', e.target.value)\r\n        }\r\n    }\r\n\r\n    const sendTwit = async() => {\r\n        console.log(text, imageUrl)\r\n            if(!(text || imageUrl)) {\r\n                setError('Inputs required');\r\n                return;\r\n            }\r\n            setLoading(true);\r\n            const res = await axios({\r\n                method: 'POST',\r\n                url: `${apiUrl}`,\r\n                data: {text, imageUrl},\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    if(error.isAxiosError) {\r\n                        setError(error.response?.data?.error);\r\n                    }\r\n                    });\r\n                if(res && res.data.success) {\r\n                    setLoading(false);\r\n                    localStorage.removeItem('twitTitle');\r\n                    localStorage.removeItem('twitText');\r\n                    // props.setSync(!props.sync);\r\n                    // change logic for showing newly posted content\r\n                    props.refreshData();\r\n                    props.showForm();\r\n                } else {\r\n                    setLoading(false);\r\n                }\r\n    }\r\n\r\n    return (\r\n        <div className='sticky text-center w-full h-full bg-blue-200 p-3 -mb-2 -m-4'>\r\n            {/* <div className='text-center bg-blue-200 mt-3 pt-3 mb-1 pb-1 rounded'> */}\r\n            <h1 className='font-bold text-lg mb-3 mt-2'>\r\n                New Post \r\n            </h1>\r\n            <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', borderRadius: '20%'}}>\r\n\r\n            {/* <input \r\n                type='text'\r\n                name='title'\r\n                value={title} \r\n                placeholder='title'\r\n                onChange={handleChange}\r\n                className='px-3 py-1 rounded text-lg mb-2 font-bold'\r\n                style={{width: '16em', border: 'none'}}\r\n                required\r\n                /> */}\r\n            <textarea \r\n                type='textarea'\r\n                name='text'\r\n                rows={4}\r\n                cols={3}\r\n                style={{width: '100%', height: `${imageUrl ? '5em' : '13em'}`, border: 'none'}}\r\n                maxLength={550}\r\n                value={text}\r\n                overflow=\"hidden\"\r\n                placeholder='Write and share ...' \r\n                onChange={handleChange}\r\n                className='px-3 rounded mb-1 text-xs text-black w-full'\r\n                required\r\n            />\r\n                <div style={{display: 'flex', width: '100%', fontSize: '1.2em', justifyContent: 'flex-end'}} className='shadow-md p-1 flex-end mb-2'>\r\n                    <span>{textArea}</span>\r\n                </div>\r\n                <div style={{display: 'flex', width: '100%', fontSize: '1.2em', justifyContent: 'center'}} className='shadow-md p-1 flex-end mb-2'>\r\n                    <AttachImage imageUrl={imageUrl} setImageUrl={setImageUrl} />\r\n                </div>\r\n            </div>\r\n            <div style={{flexDirection: 'column'}} className='flex mb-3'>\r\n                {error && <span className='mb-2 text-red-800 text-md'>{error}</span>}\r\n                <div className='flex justify-center mt-2'>\r\n                    {!loading ?\r\n                    <>\r\n                    <span \r\n                        style={{cursor: 'pointer'}}\r\n                        onClick={() => props.showForm()}\r\n                        className='hover:bg-gray-900 shadow-md bg-gray-400 text-md font-medium p-2 rounded text-white'\r\n                        >    \r\n                        Cancel\r\n                    </span>\r\n\r\n                    <span \r\n                    style={{cursor: 'pointer'}}\r\n                    onClick={sendTwit}\r\n                    className='hover:bg-green-900 shadow-md bg-green-400 text-md font-bold p-2 rounded text-white mx-2'\r\n                    >    \r\n                        Send\r\n                    </span>\r\n                    </>\r\n                    :\r\n                    <span className='m-auto self-center'>\r\n                        <Loader \r\n                        type='ThreeDots'\r\n                        color='#00bfff'\r\n                        height={40} \r\n                        width={40} \r\n                        />\r\n                     </span>}\r\n                </div>\r\n            </div>\r\n            {/* </div> */}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport axios from 'axios';\r\nimport Loader from 'react-loader-spinner';\r\nimport { baseUrl } from '../helper';\r\n\r\nexport default function CommentForm(props) {\r\n    const [text, setText] = useState(localStorage.getItem('commentText') ? localStorage.getItem('commentText') : '');\r\n    const [textArea, setTextArea] = useState(550);\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const token = localStorage.getItem('token'); \r\n    \r\n    const apiUrl = `${baseUrl}/comments`; \r\n\r\n    const handleChange = (e) => {\r\n        if(e.target.name === 'text') {\r\n            setText(e.target.value);\r\n            setTextArea(550 - e.target.value.length);\r\n            localStorage.setItem('commentText', e.target.value)\r\n        }\r\n    }\r\n\r\n    const sendComment = async() => {\r\n        if(!props.twitId) return;\r\n        if(!text) {\r\n            setError('Inputs required');\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        const res = await axios({\r\n            method: 'POST',\r\n            url: `${apiUrl}/${props.twitId}`,\r\n            data: {text},\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n                }\r\n            })\r\n            .catch(error => {\r\n                    setError(error.response.data.error);\r\n            });\r\n            if(res && res.data.success) {\r\n                setLoading(false);\r\n                props.setSync(!props.sync);\r\n                props.showCommentForm();\r\n            } else {\r\n                setLoading(false);\r\n            }\r\n    }\r\n\r\n    return (\r\n        <div className='text-center pt-4'>\r\n             <p style={{fontSize: '0.9em'}} className='font-bold text-xs mb-3'>\r\n                New Comment\r\n            </p>\r\n            <textarea \r\n                type='textarea'\r\n                name='text'\r\n                rows={5}\r\n                cols={8}\r\n                maxLength={550}\r\n                style={{width: '100%', height: '8em'}}\r\n                value={text} \r\n                placeholder='Drop in your comment ...' \r\n                onChange={handleChange}\r\n                className='px-3 rounded mb-5 h-20 text-md text-gray-600'\r\n                required\r\n            /><br/>\r\n            {textArea}\r\n            <div style={{flexDirection: 'column'}} className='flex mb-5'>\r\n                {error && <span className='mb-2 text-red-800 text-xs'>{error}</span>}\r\n                <div className='justify-items-center'>\r\n                    <span \r\n                        style={{cursor: 'pointer', fontSize: '0.9em'}}\r\n                        onClick={() => props.showCommentForm()}\r\n                        className='hover:bg-gray-900 bg-gray-400 font-medium p-1 rounded text-white'\r\n                    >    \r\n                        Cancel\r\n                    </span>\r\n\r\n                    {!loading ?\r\n                    <span \r\n                        style={{cursor: 'pointer', fontSize: '0.9em'}}\r\n                        onClick={sendComment}\r\n                        className='hover:bg-green-900 text-lg bg-green-400 font-medium p-1 rounded text-white mx-2'\r\n                    >    \r\n                        Send\r\n                    </span>\r\n                    :\r\n                    <span className='m-auto'>\r\n                        <Loader \r\n                        type='ThreeDots'\r\n                        color='#00bfff'\r\n                        height={40} \r\n                        width={40} \r\n                        />\r\n                     </span>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","/* eslint-disable react/jsx-no-target-blank */\r\nimport React from 'react';\r\nimport { Modal } from 'react-bootstrap';\r\nimport { FaTwitter, FaFacebook, FaLinkedin, FaInstagram } from 'react-icons/fa';\r\n \r\nexport default function PopUp({ show, handleShow, sourceData }) {\r\n    return (\r\n        <div>\r\n            <Modal\r\n                show={show}\r\n                onHide={() => handleShow()}\r\n                dialogClassName=\"modal-90w\"\r\n                aria-labelledby=\"example-custom-modal-styling-title\"\r\n                className=\"h-full bg-gray-300\"\r\n                size=\"lg\"\r\n            >\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>\r\n                {sourceData?.header}\r\n                </Modal.Title>\r\n          </Modal.Header>\r\n\r\n          <Modal.Body>\r\n            \r\n              <div className='image_box'>\r\n\r\n                    <img\r\n                      src={sourceData?.source}\r\n                      alt={sourceData?.altTag}\r\n                      style={{width: '27em', height: '15em', borderRadius: '1em', marginBottom: '1em' }}\r\n                      className='image'\r\n                  />\r\n\r\n              </div>\r\n              \r\n            <div className='w-full h-full bg-green-400'>\r\n\r\n              <div>\r\n              {/* Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. */}\r\n              <div className='socials'>\r\n                <a href='https://www.linkedin.com/in/k-kornienko/' target='_blank'><span><FaTwitter /></span></a>\r\n                <a href='https://www.linkedin.com/in/k-kornienko/' target='_blank'><span><FaFacebook /></span></a>\r\n                <a href='https://www.linkedin.com/in/k-kornienko/' target='_blank'><span><FaLinkedin /></span></a>\r\n                <a href='https://www.linkedin.com/in/k-kornienko/' target='_blank'><span><FaInstagram /></span></a>\r\n              </div>\r\n              </div>\r\n            </div> \r\n          </Modal.Body>\r\n        </Modal>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\n// import { FaSearch } from \"react-icons/fa\";\r\n\r\nexport default function TopSearch({placeholder, searchQuery, setSearchQuery, handleChange, error}) {\r\n    if(!placeholder) placeholder = 'Search friends';\r\n    return (\r\n        <div className='flex mt-9 rounded'>\r\n            <div className='flex-grow'>\r\n                <input \r\n                    type='text'\r\n                    name='top-search'\r\n                    value={searchQuery}\r\n                    placeholder={placeholder}\r\n                    required\r\n                    onChange={handleChange}\r\n                    className='p-2 text-dark-3 text-md rounded font-semibold text-center bg-white-200 w-full outline-none mt-1'\r\n                />\r\n            </div>\r\n            {searchQuery && <div className='flex text-white font-bold bg-blue-900 hover:bg-blue-500 cursor-pointer px-3 rounded items-center' onClick={() => setSearchQuery('')}>\r\n                {/* <FaSearch\r\n                    className='w-6 h-6 text-white' \r\n                /> */}\r\n                Clear\r\n            </div>}\r\n        </div>\r\n    );\r\n}\r\n","/* eslint-disable no-unused-vars */\r\n/* eslint-disable react/jsx-no-target-blank  */\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Moment from 'react-moment';\r\nimport { BsPersonFill, BsShareFill } from 'react-icons/bs';\r\nimport { AiFillLike, AiTwotoneDelete, AiFillHome } from 'react-icons/ai';\r\nimport { IoIosPeople, IoMdClose } from 'react-icons/io';\r\nimport { MdEdit, MdEmail } from 'react-icons/md';\r\nimport { RiArrowUpLine, RiChatNewLine } from 'react-icons/ri';\r\nimport { SiSubstack } from 'react-icons/si';\r\nimport TwitForm from './TwitForm';\r\nimport CommentForm from './CommentForm';\r\nimport Image from './Image';\r\nimport { baseUrl, frontendUrl } from '../helper';\r\nimport { Logout } from './GoogleAuth';\r\nimport Loader from 'react-loader-spinner';\r\nimport store from '../redux/store';\r\nimport { useSelector } from 'react-redux';\r\nimport { FaEllipsisV, FaRegComment } from 'react-icons/fa';\r\nimport TopSearch from './TopSearch';\r\n\r\nexport default function Twits() {\r\n    const [error, setError] = useState('');\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [ twitData, setTwitData ] = useState([]);\r\n    // const [formActive, setFormActive] = useState(false);\r\n    const [sync, setSync] = useState(false);\r\n    const [scrollValue, setScrollValue] = useState(0);\r\n    const [loadMore, setLoadMore] = useState(false);\r\n    const [loadingMore, setLoadingMore] = useState(false);\r\n    const [refresh, setRefresh] = useState(false);\r\n    const [defaultSate, setDefaultState] = useState(false);\r\n\r\n    const {getState, dispatch} = store;\r\n    const state = getState(); \r\n    const { twits, twitCount, users, formActive, page, perPage } = useSelector(state => state);\r\n\r\n    const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\r\n    const username = localStorage.getItem('username') ? localStorage.getItem('username') : '';\r\n    const userId = localStorage.getItem('userId') ? localStorage.getItem('userId') : '';\r\n    const img = localStorage.getItem('img') ? localStorage.getItem('img') : '';\r\n    const history = useHistory();\r\n    const token = localStorage.getItem('token');\r\n\r\n    const apiUrl = `${baseUrl}/twits`;\r\n\r\n    const showForm = () => {\r\n        dispatch({\r\n            type: 'SET_FORM_ACTIVE',\r\n            data: !formActive\r\n        });\r\n        // setFormActive(!formActive);\r\n    }\r\n    \r\n    const refreshData = () => {\r\n    //  setRefresh(true);\r\n     getTwits(1, 50, 'refresh');\r\n    }\r\n\r\n    const scrollToTop = () => {\r\n        // console.log('scroll to top')\r\n        setTimeout(() => {\r\n        const element = document.getElementById('top');\r\n        element.scrollIntoView();\r\n        }, 0);\r\n    }\r\n\r\n    const getMoreTwits = () =>  {\r\n        // console.log(page, perPage);\r\n        setLoadingMore(true);\r\n        let newPage = page + 1;\r\n        if(twits.length < twitCount) {\r\n            getTwits(newPage);\r\n            dispatch({\r\n                type: 'SET_PAGE',\r\n                data: newPage\r\n            });\r\n        }\r\n    }\r\n\r\n    const onScroll = e => {\r\n     \r\n        setScrollValue(window.document.documentElement.scrollTop);\r\n        if(twits.length < twitCount) {\r\n            if(e.target.documentElement.scrollHeight - (window.innerHeight + e.target.documentElement.scrollTop) < 1720) {\r\n                setLoadMore(true);\r\n            } else {\r\n              setLoadMore(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('token');\r\n        history.push('/');\r\n    }\r\n\r\n    // if(!token) {\r\n    //     console.log(window.location.hash)\r\n    //     history.push('/');\r\n    // }\r\n\r\n    const handleChange = (e) => {\r\n        const target = e.target;\r\n        const value = target.value;\r\n        // console.log(searchQuery);\r\n        setSearchQuery(value);  \r\n    }\r\n\r\n    const handleSearch = () => {\r\n        const searchResults = twits.filter(twit => {\r\n            return twit.text.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0;\r\n        });\r\n        setTwitData(searchResults);\r\n    }\r\n    \r\n    useEffect(() => {\r\n        handleSearch();\r\n        \r\n        return () => {\r\n        }\r\n    }, [searchQuery]);\r\n\r\n    const apiCallHook = async(method, url, data) => {\r\n        const res = await axios({\r\n            method,\r\n            url,\r\n            data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n            // setSync(!sync);\r\n            if(method === 'POST') {\r\n                dispatch({\r\n                    type: 'UPDATE_TWIT',\r\n                    data: res.data.data\r\n                })\r\n            } else {\r\n                refreshData();\r\n            }\r\n    }\r\n\r\n    const getTwits = async(page = 1, perPage = 50, refresh = null) => {\r\n        if(!token) {\r\n            return;\r\n        }\r\n        const res = await axios({\r\n            method: 'GET',\r\n            url: `${apiUrl}?page=${page}&perPage=${perPage}`,\r\n            // url: `${apiUrl}`,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n            // console.log('get twits', res?.data)\r\n            if(res && res.data.success) {\r\n                if(refresh) {\r\n                    // console.log('refresh is', refresh)\r\n                    dispatch({\r\n                        type: 'SET_REFRESH_TWIT_DATA',\r\n                        data: res.data.data\r\n                    });\r\n                    localStorage.setItem('twits', JSON.stringify(res.data.data));\r\n                    setRefresh(false);\r\n                } else {\r\n                    dispatch({\r\n                        type: 'SET_TWIT_DATA',\r\n                        data: res.data.data\r\n                    });\r\n                    localStorage.setItem('twits', JSON.stringify(res.data.data));\r\n                    // .map(x => {\r\n                    //     x.formActive = false;\r\n                    //     return x;\r\n                    // })));\r\n                    setLoadMore(false);\r\n                    setLoadingMore(false);\r\n                }\r\n            } else {\r\n                setError('Please check your network');\r\n                dispatch({\r\n                    type: 'SET_TWIT_DATA',\r\n                    data: JSON.parse(localStorage.getItem('twits'))\r\n                });\r\n            }\r\n    }\r\n\r\n    const getUsers = async() => {\r\n        const res = await axios({\r\n            method: 'GET',\r\n            url: `${baseUrl}/auth/users`,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n            if(res && res.data.success) {\r\n                dispatch({\r\n                    type: 'SET_USER_COUNT',\r\n                    data: res.data.data.count\r\n                });\r\n                dispatch({\r\n                    type: 'SET_PEOPL_DATA',\r\n                    data: res.data.data.users\r\n                });\r\n                localStorage.setItem('userCount', res.data.data.count);\r\n            } else {\r\n                setError('Error found');\r\n                setError('Please check your network');\r\n                dispatch({\r\n                    type: 'SET_USER_COUNT',\r\n                    data: JSON.parse(localStorage.getItem('userCount'))\r\n                });\r\n            }\r\n    }\r\n\r\n    const handleDeleteTwit = (id) => {\r\n            dispatch({\r\n                type: 'DELETE_TWIT',\r\n                data: id\r\n            });\r\n    }\r\n\r\n    const checkOpenForms = () => {\r\n        let closedTwits = twits.map(twit => {\r\n            twit.formActive = false;\r\n            return twit;\r\n        });\r\n    }\r\n\r\n\r\n    const checkSub = async() => {\r\n        const sub = localStorage.getItem('sub');\r\n        // console.log('sub', sub);\r\n        if(sub) {\r\n        const res = await axios({\r\n            method: 'POST',\r\n            url: `${baseUrl}/checksub`,\r\n            data: {sub: JSON.parse(sub), id: userId},\r\n            headers: { \r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                // console.log('sub', error.response?.data?.error);\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n                if(res && res.data.success) {\r\n                    localStorage.setItem('subed', true);\r\n                }\r\n            }\r\n        }\r\n\r\n        const push = async() => {\r\n            await axios({\r\n            method: 'GET', url: `${baseUrl}/push`\r\n        }).then(res => {\r\n            dispatch({\r\n                type: 'SET_SUBS',\r\n                data: res.data.data\r\n            });\r\n            localStorage.setItem('subs', JSON.stringify(res.data.data));\r\n            return res;\r\n        });\r\n    } \r\n\r\nuseEffect(() => { \r\n    if(token) {\r\n        // getTwits((page > 1) ? page + 1 : page);\r\n        refreshData();\r\n    }\r\n\r\n    return () => {}\r\n}, [defaultSate]); \r\n\r\nuseEffect(() => {\r\n    window.addEventListener(\"scroll\", onScroll);\r\n\r\n    return () => window.removeEventListener(\"scroll\", onScroll);   \r\n  }, []);\r\n\r\nuseEffect(() => {\r\n    localStorage.setItem('hash', window.location.hash);\r\n    if(!token) {\r\n        // console.log(window.location.hash)\r\n        return history.push('/');\r\n    }\r\n    getUsers();\r\n    if(username === 'hobar') {\r\n        push();\r\n    }\r\n\r\n    // console.log(localStorage.getItem('subed'))\r\n    // if(!localStorage.getItem('subed')) {\r\n        checkSub();\r\n    // }\r\n    return () => {}\r\n}, []);\r\n\r\nuseEffect(() => {\r\n    if(token) {\r\n        setTimeout(() => {\r\n            const hash = localStorage.getItem('hash');\r\n            let id = '';\r\n            // if(hash) {\r\n            //     id = hash.replace('#', '');\r\n                // console.log('hash found', hash)\r\n            // } else {\r\n                id = window.location.hash.replace('#', '');\r\n            // }\r\n            const element = document.getElementById(id);\r\n            if (element) element.scrollIntoView();\r\n        }, 0);\r\n    }\r\n    return () => {}\r\n}, [twits]);\r\n\r\nreturn (\r\n    <div id='top' style={{fontFamily: 'Raleway', height: '90vh', fontSize: '0.8em'}} className='text-md mb-5 p-3 m-auto flex justify-center md:w-1/2'>\r\n        <span style={{cursor: 'pointer', borderRadius: '50%'}} className='text-xs mb-3 fixed bottom-10 right-2 bg-green-500 px-4 py-2 text-white'><RiChatNewLine size={25} onClick={showForm} />post</span>\r\n        {(scrollValue > 3000) && <span style={{cursor: 'pointer', borderRadius: '50%', bottom: '10em'}} className='text-xs fixed bottom-5 right-2 bg-purple-500 px-5 py-3 text-white'><RiArrowUpLine size={20} onClick={scrollToTop} />top</span>}\r\n        {formActive && <TwitForm error={error} showForm={showForm} sync={sync} setSync={setSync} refreshData={refreshData} />}\r\n        \r\n        {!formActive && \r\n        <div>\r\n            <div className='flex justify-center m-auto -mt-3 p-2 md:w-1/2 flex-col'>\r\n                <p style={{marginTop: '3em'}} className='text-center mb-2 pt-2 grow'>\r\n                <span style={{fontFamily: 'Architects Daughter', fontSize: '2em'}} className='text-purple-900 font-bold italic'>Buzz<br/>\r\n                </span> \r\n                <span style={{fontSize: '1.2em'}}> Feel free, express yourself & network </span>\r\n                </p> \r\n\r\n                <div style={{top: '0em', margin: 'auto'}} className='p-2 rounded mb-2 flex justify-between border-4 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n                    {img !== 'null' ? (\r\n                        <span className='cursor-pointer'  onClick= {e => history.push(`/${username}`)}>\r\n                            {error ? <BsPersonFill size={25} />:\r\n                            <img src={img} alt='Profile' style={{width: '30px', height: '30px', borderRadius: '50%'}} />}\r\n                        </span>) \r\n                        : <span className='text-left cursor-pointer'><BsPersonFill size={25} onClick={e => history.push(`/${username}`)} /></span>}\r\n                        {/* {twits.length}{'/'}{twitCount}{window.innerHeight} - {document.documentElement.scrollTop} - {document.scrollingElement.scrollHeight} */}\r\n                    <span className='text-left flex cursor-pointer'  onClick= {e => history.push('people')}><IoIosPeople size={30}/><span className='pt-1 pl-1'>{users > 0 && users}</span></span>\r\n                    \r\n                    <span style={{cursor: 'pointer'}} className='text-right' onClick={() => logout()}><Logout />\r\n                    </span>\r\n                </div>\r\n                    {/* <TopSearch placeholder='Search' searchQuery={searchQuery} handleChange={handleChange} setSearchQuery={setSearchQuery} error={error} /> */}\r\n                {(twits.length < twitCount) &&\r\n                <>\r\n                {loadMore && <div onClick={() => getMoreTwits()} style={{bottom: '2.5em', margin: 'auto'}} className='animate-bounce transition p-2 hover:bg-blue-400 cursor-pointer text-lg rounded flex justify-around shadow-md fixed right-0 left-0 bg-blue-500 text-white md:w-1/2'>\r\n                 {loadingMore ? 'Loading ...' : 'Load more posts ...'}\r\n                </div>}\r\n                </>\r\n                }\r\n                <div style={{bottom: '0em', margin: 'auto'}} className='pb-1 rounded flex justify-around border-2 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n                    <span className='cursor-pointer pt-1 border-t-2 border-black' onClick={() => history.push(\"/twits\")}>\r\n                        <AiFillHome size={25} color='black' />\r\n                    </span>\r\n                    {username === 'hobar' && <span className='cursor-pointer pt-3' onClick= {e => history.push('/subscriptions')}>\r\n                        <SiSubstack size={20} color='gray'/>\r\n                    </span>}\r\n                    <span className='cursor-pointer pt-2' onClick= {e => history.push('/people')}>\r\n                        <IoIosPeople size={30} color='gray'/>\r\n                    </span>\r\n\r\n                    <span className='cursor-pointer pt-2'  onClick= {e => history.push(`/chats/${username}`)}><MdEmail size={25} color='gray' />\r\n                    </span>\r\n                </div>\r\n                {error && <div style={{fontFamily: 'Roboto', backgroundColor: 'white', fontWeight: 'bold'}} className='text-red-500 text-center py-1 m-0 rounded border-3 -mx-2 md:w-300'>Please check your network !</div>}\r\n            </div>\r\n\r\n            {/* <Bars color=\"#00BFFF\" height={80} width={80} /> */}\r\n            {twits.length < 1 ? \r\n            <div className='flex justify-center items-center pt-8 m-auto'>\r\n                <Loader \r\n                type='Bars'\r\n                color='#00bfff'\r\n                height={80} \r\n                width={80} \r\n            /> \r\n            </div>:\r\n            <div className=''>\r\n            {\r\n                twits.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()).map((twit, idx) => \r\n                    <Twit key={idx} twit={twit} email={email} userId={userId} apiCallHook={apiCallHook} baseUrl={baseUrl} frontendUrl={frontendUrl} sync={sync} setSync={setSync} showForm={showForm} formActive={formActive} checkOpenForms={checkOpenForms} error={error} handleDeleteTwit={handleDeleteTwit} />\r\n                )\r\n            }\r\n            </div>}\r\n        </div>}\r\n    </div>\r\n    )\r\n}\r\n\r\nexport const Twit = (props) => {\r\n    let { twit: {id, text, imageUrl, twits, likes, comments, createdAt, updatedAt }, email, userId, apiCallHook, baseUrl, frontendUrl, sync, setSync, checkOpenForms, error, handleDeleteTwit } = props;\r\n    let textIntact = text;\r\n    const [commentFormActive, setCommentFormActive] = useState(false);\r\n    const [editLoading, setEditLoading] = useState(false);\r\n    const [likeLoading, setLikeLoading] = useState(false);\r\n    const [deleteLoading, setDeleteLoading] = useState(false);\r\n    const [storyText, setStoryText] = useState(textIntact);\r\n    const [editForm, setEditForm] = useState(false);\r\n    const [linkCopied, setLinkCopied] = useState(false);\r\n    const [more, setMore] = useState(false);\r\n    const [viewLikes, setViewLikes] = useState(false);\r\n    const [viewComments, setViewComments] = useState(false);\r\n    const [show, setShow] = useState(false);\r\n    const [sourceData, setSourceData] = useState({});\r\n    const [menuShow, setMenuShow] = useState(false);\r\n    \r\n    const history = useHistory();\r\n    const likeCount = likes.filter(like => like.isLiked).length;\r\n    const filteredComments = comments.filter(comment => !comment.isDeleted);\r\n    const isLiked = (() => {\r\n        const liked = likes.filter(like => like.userlikes.email === email && like.isLiked === true);\r\n       return liked.length ? true : false;\r\n    })();\r\n\r\n    // const [likeCount, setLikeCount] = useState(likeCount);\r\n    // let llikeCount = 0;\r\n    // let lisLiked = false;\r\n    const [lfilteredComents, setFilteredComments] = useState(filteredComments);\r\n    // const [lisLiked, setIsLiked] = useState(isLiked);\r\n\r\n    const share = (id, text) => {\r\n        // console.log('Welcome to sharing!');\r\n        if (navigator.share) {\r\n            // console.log('Sharing exist!');\r\n          navigator.share({\r\n            title: 'Buzz',\r\n            url: `https://obabuzz.netlify.app/twits/#${id}`,\r\n            text: `${text?.slice(0, 80)}...`,\r\n            // files: ['./mm.txt'],\r\n          }).then(() => {\r\n            // console.log('Thanks for sharing!', id, text?.slice(0, 80));\r\n            setMenuShow(false);\r\n          }).catch(console.error);\r\n        } else {\r\n                // console.log('Sharing is not supported!');\r\n        }\r\n    }\r\n\r\n    const handleStoryChange = (e) => {\r\n        setStoryText(e.target.value);\r\n    }\r\n\r\n    let link;\r\n    if(text.search('http') >= 0) {\r\n        const http = text.split(' ').filter(x => x.search('http') >= 0);\r\n        link = http[0].split('\\n').filter(x => x.search('http') >= 0);\r\n        text = text.replace(link, '')\r\n    }\r\n\r\n    const showMenu = () => {\r\n        if(menuShow) {\r\n            setMenuShow(false);\r\n        } else {\r\n            setMenuShow(true);\r\n        }\r\n    }\r\n\r\n    const showMore = () => {\r\n        if(more) {\r\n            setMore(false);\r\n        } else {\r\n            setMore(true);\r\n        }\r\n    }\r\n\r\n    const showLikes = () => {\r\n        if(viewLikes) {\r\n            setViewLikes(false);\r\n        } else {\r\n            setViewComments(false);\r\n            setViewLikes(true);\r\n        }\r\n    }\r\n\r\n    const showComments = () => {\r\n        if(viewComments) {\r\n            setViewComments(false);\r\n        } else {\r\n            setViewLikes(false);\r\n            setViewComments(true);\r\n        }\r\n    }\r\n\r\n    // const copyTwitLink = () => {\r\n    //     clipboardCopy(`${frontendUrl}/#${id}`);\r\n    //     setTimeout(() => {\r\n    //         setLinkCopied(false);\r\n    //     }, 1000);\r\n    //     setMenuShow(false);\r\n    // }\r\n\r\n    const editStory = () => {\r\n        // console.log(text, storyText)\r\n        setEditForm(!editForm);\r\n        setStoryText(text);\r\n        setMenuShow(false);\r\n    }\r\n   \r\n    const updateStory = () => {\r\n        apiCallHook('PATCH', `${baseUrl}/twits/${id}`, {text: storyText});\r\n        setEditLoading(true);\r\n        setTimeout(() => {\r\n            setEditLoading(false);\r\n            setEditForm(false);\r\n        }, 1000);\r\n    }\r\n    const showCommentForm = () => {\r\n        setCommentFormActive(!commentFormActive);\r\n        props.twit.formActive = !commentFormActive;\r\n    }\r\n    \r\n    const likeTwit = () => {\r\n        setLikeLoading(true); \r\n        // if(lisLiked) {\r\n        //     setIsLiked(!lisLiked);\r\n        //     // setLikeCount(likeCount - 1);\r\n        // } else {\r\n        //     setIsLiked(!lisLiked);\r\n        //     // setLikeCount(likeCount + 1);\r\n        // }\r\n        apiCallHook('POST', `${baseUrl}/likes/like/${id}`);\r\n        setTimeout(() => {\r\n            setLikeLoading(false);\r\n        }, 800);\r\n    }\r\n\r\n    const commentTwit = () => {\r\n        showCommentForm();\r\n    }\r\n    const deleteTwit = () => {\r\n        // setDeleteLoading(true);\r\n        // setTimeout(() => {\r\n        //     setDeleteLoading(false);\r\n        // }, 1000);\r\n        // handleDeleteTwit(id);\r\n        apiCallHook('DELETE', `${baseUrl}/twits/${id}`);\r\n        setMenuShow(false);\r\n    }\r\n\r\n    // const clipboardCopy = async (text) => {\r\n    //     if ('clipboard' in navigator) {\r\n    //         setLinkCopied(true);\r\n    //       return await navigator.clipboard.writeText(text);\r\n    //     } else {\r\n    //     }\r\n    //   }\r\n    \r\n    const handleShow = (source) => {\r\n        // console.log(source);\r\n        setShow(!show);\r\n        setSourceData(source);\r\n    }\r\n\r\n    return (\r\n    <div id={`${id}`} style={{fontSize: '1.1em', fontWeight: '400'}} className='bg-white text-black shadow-lg border-2 border-gray-300 rounded-lg px-2 m-0 pb-4 mb-4'>\r\n        <p className='flex justify-between mb-2'>\r\n            <span></span>\r\n            <span className={!linkCopied ? 'mr-2 mb-1 invisible text-xs self-end' : 'mr-2 mb-1 text-xs self-end'}>copied</span>\r\n        </p>\r\n        <span className='text-xs mb-2 -mt-2 flex justify-between'>\r\n            <Moment fromNow>{createdAt}</Moment>\r\n            <span className='flex'>\r\n            {menuShow &&\r\n                <>\r\n                {(email === twits.email) && !editForm && \r\n                    <>\r\n                    <span className={`flex flex-col cursor-pointer mr-2 p-2 -mt-2 rounded-full text-gray-500 ${menuShow ? '' : 'invisible'}`} onClick={() => editStory()}> \r\n                        <span className='m-auto mb-2'><MdEdit size={18} /></span><span>Edit</span>\r\n                    </span>\r\n                    <span className='cursor-pointer flex-col mr-2 p-2 -mt-2 flex text-gray-500' onClick={() => deleteTwit()}>\r\n                        {!deleteLoading ? \r\n                        <><span className='m-auto mb-2'><AiTwotoneDelete size={18} color='red'/></span><span>Clear</span></>:\r\n                        <LoadSpan height={20} width={20} color='#00bfff' />}\r\n                    </span>\r\n                    </>\r\n                }\r\n                <span className={`justify-center flex flex-col rounded-full p-2 cursor-pointer -mt-2 mr-0 text-gray-500 ${menuShow ? '' : 'invisible'}`} onClick={() => share(id, text)}> \r\n                    <span className='m-auto mb-2'><BsShareFill size={16} /></span><span>Share</span>\r\n                </span>\r\n                </>}\r\n                <span className={'justify-center flex flex-col rounded-full p-2 cursor-pointer -mt-2 mr-0 text-gray-500'} onClick={() => showMenu()}> \r\n                    {menuShow ? \r\n                    <>\r\n                        <span className='m-auto mb-2'><IoMdClose size={18} /></span><span>Hide</span>\r\n                    </>\r\n                    :\r\n                    <>\r\n                        <span className='m-auto mb-2'><FaEllipsisV size={18} /></span><span>More</span>\r\n                    </>}\r\n                </span>\r\n            </span>\r\n        </span>\r\n        {editForm && <div className='mb-5'>\r\n                <textarea \r\n                    className='border-gray-200 border-2 p-2 mb-2 rounded bg-white-300 focus:outline-none text-black'\r\n                    style={{width: '100%'}}\r\n                    cols={3}\r\n                    rows={4}\r\n                    maxLength={550}\r\n                    value={storyText}\r\n                    onChange={handleStoryChange}\r\n                    required={true}\r\n                    /><br />\r\n                {!editLoading ? \r\n                 <>\r\n                    <span \r\n                        className='text-xs cursor-pointer bg-gray-500 p-2 m-2 text-white rounded hover:bg-gray-400' onClick={() => editStory()}\r\n                    > \r\n                        Cancel \r\n                    </span>\r\n                    <span \r\n                    className='text-xs cursor-pointer bg-green-600 p-2 mb-2 text-white rounded hover:bg-green-400 hover:text-black' onClick={() => updateStory()}\r\n                    > \r\n                        Update Story \r\n                    </span>\r\n                </>\r\n                :\r\n                    <LoadSpan height={20} width={20} color='#00bfff' />}\r\n                </div>}\r\n\r\n        {!editForm && <div style={{fontSize: '1.3em', lineHeight: 2}} className='mt-6 px-2'>\r\n            {text.length > 100 ? \r\n                text.slice(0, 100) \r\n                : \r\n                <>{text} {link && <a className='underline' href={link} target='_blank'>link</a>}</>\r\n            }\r\n            {more ? \r\n                <>{text.slice(100)}\r\n                    <>{text.length > 100 && \r\n                        <span className='cursor-pointer' onClick={showMore}>\r\n                           {link && <a className='underline' href={link} target='_blank'>link</a>} \r\n                           ...<span style={{fontStyle: 'italic', fontWeight: '0.3em'}} className='underline'>See less</span>\r\n                        </span>\r\n                        }\r\n                    </>\r\n                </> :\r\n                <>\r\n                    {text.length > 100 && \r\n                        <span style={{fontStyle: 'italic', fontWeight: '0.3em'}} className='cursor-pointer' onClick={showMore}>\r\n                            ...<span className='underline'>See more</span>\r\n                        </span>\r\n                    }\r\n                </>\r\n            }\r\n        \r\n        <br />\r\n        {((new Date(updatedAt).getTime() - new Date(createdAt).getTime()) > 0) && <span className='text-xs'>Updated <Moment fromNow>{updatedAt}</Moment></span>}\r\n        </div>}\r\n        <span>\r\n            {/* {imageUrl && <img style={{width: \"100%\"}} src={imageUrl} onClick={() => handleShow()} alt='imgurl' className='rounded max-h-72 cursor-pointer' />} */}\r\n            {imageUrl && <img style={{width: \"100%\"}} src={imageUrl} alt='imgurl' className='rounded max-h-100 cursor-pointer' />}\r\n        </span> \r\n        <Image show={show} handleShow={handleShow} sourceData={sourceData} />\r\n        {/* likes and comments count section */}\r\n            {(likeCount > 0 || comments.length > 0) && \r\n            <div className='flex text-md p-1 px-3 mt-1 -mx-4'>\r\n                <span onClick={showLikes}>\r\n                    {likeCount > 0 && <span className='mr-2 cursor-pointer'>{likeCount}{' '} {likeCount > 1 ? 'likes' : 'like'} </span>}\r\n                </span>\r\n                <span onClick={showComments}>\r\n                    {filteredComments.length > 0 && <span className='cursor-pointer'>{filteredComments.length}{' '} {filteredComments.length > 1 ? 'comments' : 'comment'} </span>}\r\n                </span>\r\n            </div>}\r\n\r\n        {/*  */}\r\n        <div className='justify-between text-gray-800 flex mt-1 pt-2 px-3 -mb-3 -mx-5 border-t-2'>\r\n            <span className='mx-1 flex cursor-pointer' onClick= {e => history.push(`/${twits.username}`)}>\r\n                {twits.imageUrl !== null ? (\r\n                <span className='mr-1'>\r\n                    {(error) ? <BsPersonFill size={30}/>:\r\n                    <img src={twits.imageUrl} alt='Profile' style={{width: '30px', height: '30px', borderRadius: '50%'}} />}\r\n                </span>) \r\n                : <BsPersonFill size={30}/>}\r\n                <span className='text-md pt-1 text-blue-600'>{email === twits.email ? 'Me' : `@${twits.username}`}</span>\r\n            </span>\r\n            <span className='flex'> \r\n                {!likeLoading ? <span style={{cursor: 'pointer'}} className='flex flex-col text-xs mx-2' onClick={() => likeTwit()}>\r\n                    <span className={isLiked ? 'text-blue-500 m-auto' : 'text-gray-500 m-auto'}><AiFillLike size={18}/></span><span>Like</span>\r\n                </span> \r\n                :<LoadSpan height={20} width={18} color='#00bfff' />\r\n                }\r\n                <span className='text-xs cursor-pointer mx-2 flex text-gray-500 flex-col' onClick={() => commentTwit()}>\r\n                    <span className='m-auto'><FaRegComment size={16}/></span><span>Comment</span>\r\n                </span>\r\n                {/* {email === twits.email &&\r\n                <span className='cursor-pointer flex-col text-xs mx-2 flex' onClick={() => deleteTwit()}>\r\n                    {!deleteLoading ? \r\n                    <><span className='m-auto'><AiTwotoneDelete size={18} color='red'/></span><span>Clear</span></>:\r\n                    <LoadSpan height={20} width={20} color='#00bfff' />}\r\n                </span>} */}\r\n            </span>\r\n        </div>\r\n        {commentFormActive && <CommentForm twitId={id} showCommentForm={showCommentForm} sync={sync} setSync={setSync}/>}\r\n        \r\n        {/* {filteredComments.length > 0 &&\r\n        <div className='mt-5'><span className='text-xs mt-4 -mb-2 cursor-pointer shadow-sm border-2 p-2' onClick={showComments}>{viewComments ? 'Hide Comments' : 'View Comments'}</span></div>\r\n        } */}\r\n        {viewLikes && \r\n            <div className='border-2 border-gray-200 shadow-lg mt-4 rounded'>\r\n                {likes.map((person, idx) => (\r\n                    <LikeUsers key={idx} person={person} email={email} error={error} />\r\n                ))}\r\n            </div>\r\n        }\r\n        {viewComments && \r\n            <>{comments.length > 0 &&\r\n                    (<div className='mt-4 rounded'>\r\n                        {filteredComments.sort((a, b) => - new Date(b.createdAt).getTime() + new Date(a.createdAt).getTime()).map((comment, idx) => (\r\n                            <Comment key={idx} comment={comment} apiCallHook={apiCallHook} email={email} userId={userId} error={error} />\r\n                        )\r\n                    )}\r\n                </div>)\r\n            }</>\r\n        }\r\n    </div>\r\n    )\r\n}\r\n\r\nconst Comment = (props) => {\r\n    let { comment: { id, text, usercomments, likecomments, createdAt }, email, userId, apiCallHook, error } = props;\r\n\r\n    const [likeLoading, setLikeLoading] = useState(false);\r\n    const [deleteLoading, setDeleteLoading] = useState(false);\r\n    const [more, setMore] = useState(false);\r\n    const history = useHistory();\r\n\r\n    const showMore = () => {\r\n        if(more) {\r\n            setMore(false);\r\n        } else {\r\n            setMore(true);\r\n        }\r\n    }\r\n\r\n    const isLiked = (() => {\r\n        const liked = likecomments.filter(like => like.userId === userId && like.isLiked === true);\r\n       return liked.length ? true : false;\r\n    })();\r\n    const likeCount = likecomments?.filter(like => like.isLiked).length;\r\n\r\n    const [llikeCount, setLikeCount] = useState(likeCount);\r\n    const [lisLiked, setIsLiked] = useState(isLiked);\r\n\r\n    let link;\r\n    if(text.search('http') >= 0) {\r\n        const http = text.split(' ').filter(x => x.search('http') >= 0);\r\n        link = http[0].split('\\n').filter(x => x.search('http') >= 0);\r\n        text = text.replace(link, '')\r\n    }\r\n\r\n    const likeComment = () => {\r\n        // setLikeLoading(true);\r\n        // setTimeout(() => {\r\n        //     setLikeLoading(false);\r\n        // }, 1000);\r\n        if(lisLiked) {\r\n            setIsLiked(!lisLiked);\r\n            setLikeCount(likeCount - 1);\r\n        } else {\r\n            setIsLiked(!lisLiked);\r\n            setLikeCount(likeCount + 1);\r\n        }\r\n        apiCallHook('POST', `${baseUrl}/likecomments/like/${id}`);\r\n    }\r\n    const deleteComment = () => {\r\n        setDeleteLoading(true);\r\n        setTimeout(() => {\r\n            setLikeLoading(false);\r\n        }, 1000);\r\n        apiCallHook('DELETE', `${baseUrl}/comments/${id}`);\r\n    }\r\n\r\n    return(\r\n        <div id={`${id}`} className='bg-gray-200 border-2 border-gray-200 shadow-md mb-3 p-1 rounded'>\r\n            <span className='text-xs mb-2 ml-2'>\r\n            <Moment fromNow>{createdAt}</Moment>\r\n            </span>\r\n            <p style={{fontSize: '1.1em', lineHeight: 2}} className='p-2 pl-4'>\r\n            {/* {text.length > 100 ? text.slice(0, 100) : text} */}\r\n            {text.length > 100 ? \r\n                text.slice(0, 100) \r\n                : \r\n                <>{text} {link && <a className='underline' href={link} target='_blank'>link</a>}</>\r\n            }\r\n\r\n            {more ? \r\n                <>{text.slice(100)}\r\n                    <>{text.length > 100 && \r\n                        <span style={{color: 'gray', fontWeight: '0.3em'}} className='cursor-pointer' onClick={showMore}>\r\n                            {link && <a className='underline' href={link} target='_blank'>link</a>}\r\n                            ...<span className='italic underline'>See less</span>\r\n                        </span>\r\n                        }\r\n                    </>\r\n                </> :\r\n                <>\r\n                    {text.length > 100 && \r\n                        <span style={{color: 'gray', fontWeight: '0.3em'}} className='cursor-pointer' onClick={showMore}>\r\n                            ...<span className='italic underline'>See more</span>\r\n                        </span>\r\n                    }\r\n                </>\r\n            }\r\n            </p>\r\n\r\n        {/* likes and comments count section */}\r\n\r\n        {/* TODO refactor for replies count */}\r\n        {(llikeCount > 0) && \r\n            <div className='flex text-xs p-1 px-3 mt-1 -mx-1'>\r\n                {llikeCount > 0 && <span className='mr-2'>{llikeCount}{' '} {llikeCount > 1 ? 'likes' : 'like'} </span>}\r\n                {/* TODO refactor for replies count */}\r\n            </div>}\r\n\r\n        {/*  */}\r\n            <div style={{fontSize: '0.9em'}} className='flex justify-between text-gray-800 flex mt-1 mb-1 pt-2 -ml-1 -mr-1 border-t-2 border-gray-200'>\r\n                <span className='mx-1 flex cursor-pointer'  onClick= {e => history.push(`/${usercomments.username}`)}>\r\n                    {usercomments.imageUrl ? (\r\n                    <span className='mr-1'>\r\n                        {error ? <BsPersonFill size={20}/>:\r\n                        <img src={usercomments.imageUrl} alt='Profile' style={{width: '1.5em', height: '1.5em', borderRadius: '50%'}} />}\r\n                    </span>)\r\n                    : <BsPersonFill size={20}/>}\r\n                    <span className=' text-blue-600'>@{email === usercomments.email ? 'Me' : usercomments.username}</span>\r\n                </span>\r\n                <span className='flex'>\r\n                    <span style={{cursor: 'pointer'}} className='mx-2 flex' onClick={() => likeComment()}>\r\n                        <span className={lisLiked ? 'text-blue-500' : 'text-gray-500'}><AiFillLike size={20}/></span>\r\n                    {/* {!likeLoading ? \r\n                    <>\r\n                        </>:\r\n                        <LoadSpan height={20} width={18} color='#00bfff' />} */}\r\n                    </span>\r\n                    {/* TODO Implement reply comment component */}\r\n             \r\n                    {email === usercomments.email &&\r\n                    <span style={{cursor: 'pointer'}} className='mx-2 flex hover:text-red-800' onClick={() => deleteComment()}>\r\n                        {!deleteLoading ? \r\n                        <AiTwotoneDelete size={20} color='red'/>:\r\n                        <LoadSpan height={20} width={20} color='#00bfff' />}\r\n                    </span>}\r\n                </span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst LikeUsers = ({person, email, error}) => {\r\n    const history = useHistory();\r\n\r\n    return(\r\n            \r\n            <div className='flex cursor-pointer hover:bg-gray-300 justify-between p-2 border-t-2 border-gray-200 pb-1' onClick= {e => history.push(`/${person.userlikes.username}`)}>\r\n                <span className='mx-1 flex'>\r\n                    {person.userlikes.imageUrl ? (\r\n                    <span>\r\n                        {error ? <BsPersonFill size={23}/>:\r\n                        <img src={person.userlikes.imageUrl} alt='Profile' style={{width: '1.5em', height: '1.5em', borderRadius: '50%'}} />}\r\n                    </span>)\r\n                    : <BsPersonFill size={23}/>}\r\n                    <span className=' text-blue-600 ml-1'>@{email === person.userlikes.email ? 'Me' : person.userlikes.username}</span>\r\n                </span>\r\n            </div>\r\n        \r\n        )\r\n    }\r\n\r\nexport const LoadSpan = ({height, width, color}) => (\r\n            <span \r\n            className='m-auto mr-4'>\r\n                        <Loader \r\n                        type='ThreeDots'\r\n                        color={color}\r\n                        height={height} \r\n                        width={width} \r\n                        />\r\n            </span>\r\n            )\r\n\r\n\r\n\r\n            // console.log(e.target.documentElement.scrollHeight);\r\n            // console.log(e.target.documentElement.scrollTop);\r\n            // console.log(e.target.documentElement.scrollHeight - e.target.documentElement.scrollTop);\r\n            // console.log(e.target.documentElement.scrollHeight - (window.innerHeight + e.target.documentElement.scrollTop));","/* eslint-disable no-unused-vars */\r\n/* eslint-disable react/jsx-no-target-blank  */\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport axios from 'axios';\r\nimport Moment from 'react-moment';\r\nimport Loader from 'react-loader-spinner';\r\nimport { useSelector } from 'react-redux';\r\nimport { BsPersonFill, BsShareFill } from 'react-icons/bs';\r\nimport { AiFillLike, AiTwotoneDelete, AiFillHome } from 'react-icons/ai';\r\nimport { IoIosPeople, IoMdClose } from 'react-icons/io';\r\nimport { FaEllipsisV, FaRegComment } from 'react-icons/fa';\r\nimport { MdEdit, MdEmail } from 'react-icons/md';\r\nimport { RiArrowUpLine, RiChatNewLine } from 'react-icons/ri';\r\nimport { SiSubstack } from 'react-icons/si';\r\n\r\nimport store from '../../redux/store';\r\nimport TwitForm from './../TwitForm';\r\nimport CommentForm from './../CommentForm';\r\nimport Image from './../Image';\r\nimport { baseUrl, frontendUrl } from '../../helper';\r\nimport { Logout } from './../GoogleAuth';\r\nimport { Twit } from '../Twits';\r\n// import TopSearch from './TopSearch';\r\n\r\nexport default function Twits() {\r\n    const [error, setError] = useState('');\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [ twitData, setTwitData ] = useState([]);\r\n    // const [formActive, setFormActive] = useState(false);\r\n    const [sync, setSync] = useState(false);\r\n    const [scrollValue, setScrollValue] = useState(0);\r\n    const [loadMore, setLoadMore] = useState(false);\r\n    const [loadingMore, setLoadingMore] = useState(false);\r\n    const [refresh, setRefresh] = useState(false);\r\n    const [defaultSate, setDefaultState] = useState(false);\r\n\r\n    const {getState, dispatch} = store;\r\n    const state = getState(); \r\n    const { twits, twitCount, users, formActive, page, perPage } = useSelector(state => state);\r\n\r\n    const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\r\n    const username = localStorage.getItem('username') ? localStorage.getItem('username') : '';\r\n    const userId = localStorage.getItem('userId') ? localStorage.getItem('userId') : '';\r\n    const img = localStorage.getItem('img') ? localStorage.getItem('img') : '';\r\n    const history = useHistory();\r\n    const token = localStorage.getItem('token');\r\n    const apiUrl = `${baseUrl}/twits`;\r\n\r\n    const showForm = () => {\r\n        dispatch({\r\n            type: 'SET_FORM_ACTIVE',\r\n            data: !formActive\r\n        });\r\n        // setFormActive(!formActive);\r\n    }\r\n    \r\n    const refreshData = () => {\r\n    //  setRefresh(true);\r\n     getTwits(1, 50, 'refresh');\r\n    }\r\n\r\n    const scrollToTop = () => {\r\n        setTimeout(() => {\r\n        const element = document.getElementById('top');\r\n        element.scrollIntoView();\r\n        }, 0);\r\n    }\r\n\r\n    const getMoreTwits = () =>  {\r\n        setLoadingMore(true);\r\n        let newPage = page + 1;\r\n        if(twits.length < twitCount) {\r\n            getTwits(newPage);\r\n            dispatch({\r\n                type: 'SET_PAGE',\r\n                data: newPage\r\n            });\r\n        }\r\n    }\r\n\r\n    const onScroll = e => {\r\n     \r\n        setScrollValue(window.document.documentElement.scrollTop);\r\n        if(twits.length < twitCount) {\r\n            if(e.target.documentElement.scrollHeight - (window.innerHeight + e.target.documentElement.scrollTop) < 1720) {\r\n                setLoadMore(true);\r\n            } else {\r\n              setLoadMore(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem('token');\r\n        history.push('/');\r\n    }\r\n\r\n    const handleChange = (e) => {\r\n        const target = e.target;\r\n        const value = target.value;\r\n        setSearchQuery(value);  \r\n    }\r\n\r\n    const handleSearch = () => {\r\n        const searchResults = twits.filter(twit => {\r\n            return twit.text.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0;\r\n        });\r\n        setTwitData(searchResults);\r\n    }\r\n\r\n\r\n    const apiCallHook = async(method, url, data) => {\r\n        const res = await axios({\r\n            method,\r\n            url,\r\n            data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n            // setSync(!sync);\r\n            if(method === 'POST') {\r\n                dispatch({\r\n                    type: 'UPDATE_TWIT',\r\n                    data: res.data.data\r\n                })\r\n            } else {\r\n                refreshData();\r\n            }\r\n    }\r\n\r\n    const getTwits = async(page = 1, perPage = 50, refresh = null) => {\r\n        if(!token) {\r\n            return;\r\n        }\r\n        const res = await axios({\r\n            method: 'GET',\r\n            url: `${apiUrl}?page=${page}&perPage=${perPage}`,\r\n            // url: `${apiUrl}`,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n            // console.log('get twits', res?.data)\r\n            if(res && res.data.success) {\r\n                if(refresh) {\r\n                    // console.log('refresh is', refresh)\r\n                    dispatch({\r\n                        type: 'SET_REFRESH_TWIT_DATA',\r\n                        data: res.data.data\r\n                    });\r\n                    localStorage.setItem('twits', JSON.stringify(res.data.data));\r\n                    setRefresh(false);\r\n                } else {\r\n                    dispatch({\r\n                        type: 'SET_TWIT_DATA',\r\n                        data: res.data.data\r\n                    });\r\n                    localStorage.setItem('twits', JSON.stringify(res.data.data));\r\n                    // .map(x => {\r\n                    //     x.formActive = false;\r\n                    //     return x;\r\n                    // })));\r\n                    setLoadMore(false);\r\n                    setLoadingMore(false);\r\n                }\r\n            } else {\r\n                setError('Please check your network');\r\n                dispatch({\r\n                    type: 'SET_TWIT_DATA',\r\n                    data: JSON.parse(localStorage.getItem('twits'))\r\n                });\r\n            }\r\n    }\r\n\r\n    const getUsers = async() => {\r\n        const res = await axios({\r\n            method: 'GET',\r\n            url: `${baseUrl}/auth/users`,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n            if(res && res.data.success) {\r\n                dispatch({\r\n                    type: 'SET_USER_COUNT',\r\n                    data: res.data.data.count\r\n                });\r\n                dispatch({\r\n                    type: 'SET_PEOPL_DATA',\r\n                    data: res.data.data.users\r\n                });\r\n                localStorage.setItem('userCount', res.data.data.count);\r\n            } else {\r\n                setError('Error found');\r\n                setError('Please check your network');\r\n                dispatch({\r\n                    type: 'SET_USER_COUNT',\r\n                    data: JSON.parse(localStorage.getItem('userCount'))\r\n                });\r\n            }\r\n    }\r\n\r\n    const handleDeleteTwit = (id) => {\r\n            dispatch({\r\n                type: 'DELETE_TWIT',\r\n                data: id\r\n            });\r\n    }\r\n\r\n    const checkOpenForms = () => {\r\n        let closedTwits = twits.map(twit => {\r\n            twit.formActive = false;\r\n            return twit;\r\n        });\r\n    }\r\n\r\n    const checkSub = async() => {\r\n        const sub = localStorage.getItem('sub');\r\n        // console.log('sub', sub);\r\n        if(sub) {\r\n        const res = await axios({\r\n            method: 'POST',\r\n            url: `${baseUrl}/checksub`,\r\n            data: {sub: JSON.parse(sub), id: userId},\r\n            headers: { \r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                // console.log('sub', error.response?.data?.error);\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n                if(res && res.data.success) {\r\n                    localStorage.setItem('subed', true);\r\n                }\r\n            }\r\n        }\r\n\r\n        const push = async() => {\r\n            await axios({\r\n            method: 'GET', url: `${baseUrl}/push`\r\n        }).then(res => {\r\n            dispatch({\r\n                type: 'SET_SUBS',\r\n                data: res.data.data\r\n            });\r\n            localStorage.setItem('subs', JSON.stringify(res.data.data));\r\n            return res;\r\n        });\r\n    } \r\n\r\nuseEffect(() => {\r\n    handleSearch();\r\n    \r\n    return () => {\r\n    }\r\n}, [searchQuery]);\r\n        \r\nuseEffect(() => { \r\n    if(token) {\r\n        // getTwits((page > 1) ? page + 1 : page);\r\n        refreshData();\r\n    }\r\n\r\n    return () => {}\r\n}, [defaultSate]); \r\n\r\nuseEffect(() => {\r\n    window.addEventListener(\"scroll\", onScroll);\r\n\r\n    return () => window.removeEventListener(\"scroll\", onScroll);   \r\n  }, []);\r\n\r\nuseEffect(() => {\r\n    localStorage.setItem('hash', window.location.hash);\r\n    if(!token) {\r\n        // console.log(window.location.hash)\r\n        return history.push('/');\r\n    }\r\n    getUsers();\r\n    if(username === 'hobar') {\r\n        push();\r\n    }\r\n\r\n    // console.log(localStorage.getItem('subed'))\r\n    // if(!localStorage.getItem('subed')) {\r\n        checkSub();\r\n    // }\r\n    return () => {}\r\n}, []);\r\n\r\nuseEffect(() => {\r\n    if(token) {\r\n        setTimeout(() => {\r\n            const hash = localStorage.getItem('hash');\r\n            let id = '';\r\n            // if(hash) {\r\n            //     id = hash.replace('#', '');\r\n                // console.log('hash found', hash)\r\n            // } else {\r\n                id = window.location.hash.replace('#', '');\r\n            // }\r\n            const element = document.getElementById(id);\r\n            if (element) element.scrollIntoView();\r\n        }, 0);\r\n    }\r\n    return () => {}\r\n}, [twits]);\r\n\r\nreturn (\r\n    <div id='top' style={{fontFamily: 'Raleway', height: '90vh', fontSize: '0.8em'}} className='text-md mb-5 p-3 m-auto flex justify-center md:w-1/2'>\r\n        <span style={{cursor: 'pointer', borderRadius: '50%'}} className='text-xs mb-3 fixed bottom-10 right-2 bg-green-500 px-4 py-2 text-white'><RiChatNewLine size={25} onClick={showForm} />post</span>\r\n        {(scrollValue > 3000) && <span style={{cursor: 'pointer', borderRadius: '50%', bottom: '10em'}} className='text-xs fixed bottom-5 right-2 bg-purple-500 px-5 py-3 text-white'><RiArrowUpLine size={20} onClick={scrollToTop} />top</span>}\r\n        {formActive && <TwitForm error={error} showForm={showForm} sync={sync} setSync={setSync} refreshData={refreshData} />}\r\n        \r\n        {!formActive && \r\n        <div>\r\n            <div className='flex justify-center m-auto -mt-3 p-2 md:w-1/2 flex-col'>\r\n                <p style={{marginTop: '3em'}} className='text-center mb-2 pt-2 grow'>\r\n                <span style={{fontFamily: 'Architects Daughter', fontSize: '2em'}} className='text-purple-900 font-bold italic'>Buzz<br/>\r\n                </span> \r\n                <span style={{fontSize: '1.2em'}}> Feel free, express yourself & network </span>\r\n                </p> \r\n\r\n                <div style={{top: '0em', margin: 'auto'}} className='p-2 rounded mb-2 flex justify-between border-4 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n                    {img !== 'null' ? (\r\n                        <span className='cursor-pointer'  onClick= {e => history.push(`/${username}`)}>\r\n                            {error ? <BsPersonFill size={25} />:\r\n                            <img src={img} alt='Profile' style={{width: '30px', height: '30px', borderRadius: '50%'}} />}\r\n                        </span>) \r\n                        : <span className='text-left cursor-pointer'><BsPersonFill size={25} onClick={e => history.push(`/${username}`)} /></span>}\r\n                    <span className='text-left flex cursor-pointer'  onClick= {e => history.push('people')}><IoIosPeople size={30}/><span className='pt-1 pl-1'>{users > 0 && users}</span></span>\r\n                    \r\n                    <span style={{cursor: 'pointer'}} className='text-right' onClick={() => logout()}><Logout />\r\n                    </span>\r\n                </div>\r\n                    {/* <TopSearch placeholder='Search' searchQuery={searchQuery} handleChange={handleChange} setSearchQuery={setSearchQuery} error={error} /> */}\r\n                {(twits.length < twitCount) &&\r\n                <>\r\n                {loadMore && <div onClick={() => getMoreTwits()} style={{bottom: '2.5em', margin: 'auto'}} className='animate-bounce transition p-2 hover:bg-blue-400 cursor-pointer text-lg rounded flex justify-around shadow-md fixed right-0 left-0 bg-blue-500 text-white md:w-1/2'>\r\n                 {loadingMore ? 'Loading ...' : 'Load more posts ...'}\r\n                </div>}\r\n                </>\r\n                }\r\n                <div style={{bottom: '0em', margin: 'auto'}} className='pb-1 rounded flex justify-around border-2 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n                    <span className='cursor-pointer pt-1 border-t-2 border-black' onClick={() => history.push(\"/twits\")}>\r\n                        <AiFillHome size={25} color='black' />\r\n                    </span>\r\n                    {username === 'hobar' && <span className='cursor-pointer pt-3' onClick= {e => history.push('/subscriptions')}>\r\n                        <SiSubstack size={20} color='gray'/>\r\n                    </span>}\r\n                    <span className='cursor-pointer pt-2' onClick= {e => history.push('/people')}>\r\n                        <IoIosPeople size={30} color='gray'/>\r\n                    </span>\r\n\r\n                    <span className='cursor-pointer pt-2'  onClick= {e => history.push(`/chats/${username}`)}><MdEmail size={25} color='gray' />\r\n                    </span>\r\n                </div>\r\n                {error && <div style={{fontFamily: 'Roboto', backgroundColor: 'white', fontWeight: 'bold'}} className='text-red-500 text-center py-1 m-0 rounded border-3 -mx-2 md:w-300'>Please check your network !</div>}\r\n            </div>\r\n\r\n            {twits.length < 1 ? \r\n            <div className='flex justify-center items-center pt-8 m-auto'>\r\n                <Loader \r\n                type='Bars'\r\n                color='#00bfff'\r\n                height={80} \r\n                width={80} \r\n            /> \r\n            </div>:\r\n            <div className=''>\r\n            {\r\n                twits.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()).map((twit, idx) => \r\n                    <Twit key={idx} twit={twit} email={email} userId={userId} apiCallHook={apiCallHook} baseUrl={baseUrl} frontendUrl={frontendUrl} sync={sync} setSync={setSync} showForm={showForm} formActive={formActive} checkOpenForms={checkOpenForms} error={error} handleDeleteTwit={handleDeleteTwit} />\r\n                )\r\n            }\r\n            </div>}\r\n        </div>}\r\n    </div>\r\n    )\r\n}\r\n\r\n// export const Twit = (props) => {\r\n//     let { twit: {id, text, imageUrl, twits, likes, comments, createdAt, updatedAt }, email, userId, apiCallHook, baseUrl, frontendUrl, sync, setSync, checkOpenForms, error, handleDeleteTwit } = props;\r\n//     let textIntact = text;\r\n//     const [commentFormActive, setCommentFormActive] = useState(false);\r\n//     const [editLoading, setEditLoading] = useState(false);\r\n//     const [likeLoading, setLikeLoading] = useState(false);\r\n//     const [deleteLoading, setDeleteLoading] = useState(false);\r\n//     const [storyText, setStoryText] = useState(textIntact);\r\n//     const [editForm, setEditForm] = useState(false);\r\n//     const [linkCopied, setLinkCopied] = useState(false);\r\n//     const [more, setMore] = useState(false);\r\n//     const [viewLikes, setViewLikes] = useState(false);\r\n//     const [viewComments, setViewComments] = useState(false);\r\n//     const [show, setShow] = useState(false);\r\n//     const [sourceData, setSourceData] = useState({});\r\n//     const [menuShow, setMenuShow] = useState(false);\r\n    \r\n//     const history = useHistory();\r\n//     const likeCount = likes.filter(like => like.isLiked).length;\r\n//     const filteredComments = comments.filter(comment => !comment.isDeleted);\r\n//     const isLiked = (() => {\r\n//         const liked = likes.filter(like => like.userlikes.email === email && like.isLiked === true);\r\n//        return liked.length ? true : false;\r\n//     })();\r\n\r\n//     // const [likeCount, setLikeCount] = useState(likeCount);\r\n//     // let llikeCount = 0;\r\n//     // let lisLiked = false;\r\n//     const [lfilteredComents, setFilteredComments] = useState(filteredComments);\r\n//     // const [lisLiked, setIsLiked] = useState(isLiked);\r\n\r\n//     const share = (id, text) => {\r\n//         // console.log('Welcome to sharing!');\r\n//         if (navigator.share) {\r\n//             // console.log('Sharing exist!');\r\n//           navigator.share({\r\n//             title: 'Buzz',\r\n//             url: `https://obabuzz.netlify.app/twits/#${id}`,\r\n//             text: `${text?.slice(0, 80)}...`,\r\n//             // files: ['./mm.txt'],\r\n//           }).then(() => {\r\n//             // console.log('Thanks for sharing!', id, text?.slice(0, 80));\r\n//             setMenuShow(false);\r\n//           }).catch(console.error);\r\n//         } else {\r\n//                 // console.log('Sharing is not supported!');\r\n//         }\r\n//     }\r\n\r\n//     const handleStoryChange = (e) => {\r\n//         setStoryText(e.target.value);\r\n//     }\r\n\r\n//     let link;\r\n//     if(text.search('http') >= 0) {\r\n//         const http = text.split(' ').filter(x => x.search('http') >= 0);\r\n//         link = http[0].split('\\n').filter(x => x.search('http') >= 0);\r\n//         text = text.replace(link, '')\r\n//     }\r\n\r\n//     const showMenu = () => {\r\n//         if(menuShow) {\r\n//             setMenuShow(false);\r\n//         } else {\r\n//             setMenuShow(true);\r\n//         }\r\n//     }\r\n\r\n//     const showMore = () => {\r\n//         if(more) {\r\n//             setMore(false);\r\n//         } else {\r\n//             setMore(true);\r\n//         }\r\n//     }\r\n\r\n//     const showLikes = () => {\r\n//         if(viewLikes) {\r\n//             setViewLikes(false);\r\n//         } else {\r\n//             setViewComments(false);\r\n//             setViewLikes(true);\r\n//         }\r\n//     }\r\n\r\n//     const showComments = () => {\r\n//         if(viewComments) {\r\n//             setViewComments(false);\r\n//         } else {\r\n//             setViewLikes(false);\r\n//             setViewComments(true);\r\n//         }\r\n//     }\r\n\r\n//     // const copyTwitLink = () => {\r\n//     //     clipboardCopy(`${frontendUrl}/#${id}`);\r\n//     //     setTimeout(() => {\r\n//     //         setLinkCopied(false);\r\n//     //     }, 1000);\r\n//     //     setMenuShow(false);\r\n//     // }\r\n\r\n//     const editStory = () => {\r\n//         // console.log(text, storyText)\r\n//         setEditForm(!editForm);\r\n//         setStoryText(text);\r\n//         setMenuShow(false);\r\n//     }\r\n   \r\n//     const updateStory = () => {\r\n//         apiCallHook('PATCH', `${baseUrl}/twits/${id}`, {text: storyText});\r\n//         setEditLoading(true);\r\n//         setTimeout(() => {\r\n//             setEditLoading(false);\r\n//             setEditForm(false);\r\n//         }, 1000);\r\n//     }\r\n//     const showCommentForm = () => {\r\n//         setCommentFormActive(!commentFormActive);\r\n//         props.twit.formActive = !commentFormActive;\r\n//     }\r\n    \r\n//     const likeTwit = () => {\r\n//         setLikeLoading(true); \r\n//         // if(lisLiked) {\r\n//         //     setIsLiked(!lisLiked);\r\n//         //     // setLikeCount(likeCount - 1);\r\n//         // } else {\r\n//         //     setIsLiked(!lisLiked);\r\n//         //     // setLikeCount(likeCount + 1);\r\n//         // }\r\n//         apiCallHook('POST', `${baseUrl}/likes/like/${id}`);\r\n//         setTimeout(() => {\r\n//             setLikeLoading(false);\r\n//         }, 800);\r\n//     }\r\n\r\n//     const commentTwit = () => {\r\n//         showCommentForm();\r\n//     }\r\n//     const deleteTwit = () => {\r\n//         // setDeleteLoading(true);\r\n//         // setTimeout(() => {\r\n//         //     setDeleteLoading(false);\r\n//         // }, 1000);\r\n//         // handleDeleteTwit(id);\r\n//         apiCallHook('DELETE', `${baseUrl}/twits/${id}`);\r\n//         setMenuShow(false);\r\n//     }\r\n\r\n//     // const clipboardCopy = async (text) => {\r\n//     //     if ('clipboard' in navigator) {\r\n//     //         setLinkCopied(true);\r\n//     //       return await navigator.clipboard.writeText(text);\r\n//     //     } else {\r\n//     //     }\r\n//     //   }\r\n    \r\n//     const handleShow = (source) => {\r\n//         // console.log(source);\r\n//         setShow(!show);\r\n//         setSourceData(source);\r\n//     }\r\n\r\n//     return (\r\n//     <div id={`${id}`} style={{fontSize: '1.1em', fontWeight: '400'}} className='bg-white text-black shadow-lg border-2 border-gray-300 rounded-lg px-2 m-0 pb-4 mb-4'>\r\n//         <p className='flex justify-between mb-2'>\r\n//             <span></span>\r\n//             <span className={!linkCopied ? 'mr-2 mb-1 invisible text-xs self-end' : 'mr-2 mb-1 text-xs self-end'}>copied</span>\r\n//         </p>\r\n//         <span className='text-xs mb-2 -mt-2 flex justify-between'>\r\n//             <Moment fromNow>{createdAt}</Moment>\r\n//             <span className='flex'>\r\n//             {menuShow &&\r\n//                 <>\r\n//                 {(email === twits.email) && !editForm && \r\n//                     <>\r\n//                     <span className={`flex flex-col cursor-pointer mr-2 p-2 -mt-2 rounded-full text-gray-500 ${menuShow ? '' : 'invisible'}`} onClick={() => editStory()}> \r\n//                         <span className='m-auto mb-2'><MdEdit size={18} /></span><span>Edit</span>\r\n//                     </span>\r\n//                     <span className='cursor-pointer flex-col mr-2 p-2 -mt-2 flex text-gray-500' onClick={() => deleteTwit()}>\r\n//                         {!deleteLoading ? \r\n//                         <><span className='m-auto mb-2'><AiTwotoneDelete size={18} color='red'/></span><span>Clear</span></>:\r\n//                         <LoadSpan height={20} width={20} color='#00bfff' />}\r\n//                     </span>\r\n//                     </>\r\n//                 }\r\n//                 <span className={`justify-center flex flex-col rounded-full p-2 cursor-pointer -mt-2 mr-0 text-gray-500 ${menuShow ? '' : 'invisible'}`} onClick={() => share(id, text)}> \r\n//                     <span className='m-auto mb-2'><BsShareFill size={16} /></span><span>Share</span>\r\n//                 </span>\r\n//                 </>}\r\n//                 <span className={'justify-center flex flex-col rounded-full p-2 cursor-pointer -mt-2 mr-0 text-gray-500'} onClick={() => showMenu()}> \r\n//                     {menuShow ? \r\n//                     <>\r\n//                         <span className='m-auto mb-2'><IoMdClose size={18} /></span><span>Hide</span>\r\n//                     </>\r\n//                     :\r\n//                     <>\r\n//                         <span className='m-auto mb-2'><FaEllipsisV size={18} /></span><span>More</span>\r\n//                     </>}\r\n//                 </span>\r\n//             </span>\r\n//         </span>\r\n//         {editForm && <div className='mb-5'>\r\n//                 <textarea \r\n//                     className='border-gray-200 border-2 p-2 mb-2 rounded bg-white-300 focus:outline-none text-black'\r\n//                     style={{width: '100%'}}\r\n//                     cols={3}\r\n//                     rows={4}\r\n//                     maxLength={550}\r\n//                     value={storyText}\r\n//                     onChange={handleStoryChange}\r\n//                     required={true}\r\n//                     /><br />\r\n//                 {!editLoading ? \r\n//                  <>\r\n//                     <span \r\n//                         className='text-xs cursor-pointer bg-gray-500 p-2 m-2 text-white rounded hover:bg-gray-400' onClick={() => editStory()}\r\n//                     > \r\n//                         Cancel \r\n//                     </span>\r\n//                     <span \r\n//                     className='text-xs cursor-pointer bg-green-600 p-2 mb-2 text-white rounded hover:bg-green-400 hover:text-black' onClick={() => updateStory()}\r\n//                     > \r\n//                         Update Story \r\n//                     </span>\r\n//                 </>\r\n//                 :\r\n//                     <LoadSpan height={20} width={20} color='#00bfff' />}\r\n//                 </div>}\r\n\r\n//         {!editForm && <div style={{fontSize: '1.3em', lineHeight: 2}} className='mt-6 px-2'>\r\n//             {text.length > 100 ? \r\n//                 text.slice(0, 100) \r\n//                 : \r\n//                 <>{text} {link && <a className='underline' href={link} target='_blank'>link</a>}</>\r\n//             }\r\n//             {more ? \r\n//                 <>{text.slice(100)}\r\n//                     <>{text.length > 100 && \r\n//                         <span className='cursor-pointer' onClick={showMore}>\r\n//                            {link && <a className='underline' href={link} target='_blank'>link</a>} \r\n//                            ...<span style={{fontStyle: 'italic', fontWeight: '0.3em'}} className='underline'>See less</span>\r\n//                         </span>\r\n//                         }\r\n//                     </>\r\n//                 </> :\r\n//                 <>\r\n//                     {text.length > 100 && \r\n//                         <span style={{fontStyle: 'italic', fontWeight: '0.3em'}} className='cursor-pointer' onClick={showMore}>\r\n//                             ...<span className='underline'>See more</span>\r\n//                         </span>\r\n//                     }\r\n//                 </>\r\n//             }\r\n        \r\n//         <br />\r\n//         {((new Date(updatedAt).getTime() - new Date(createdAt).getTime()) > 0) && <span className='text-xs'>Updated <Moment fromNow>{updatedAt}</Moment></span>}\r\n//         </div>}\r\n//         <span>\r\n//             {/* {imageUrl && <img style={{width: \"100%\"}} src={imageUrl} onClick={() => handleShow()} alt='imgurl' className='rounded max-h-72 cursor-pointer' />} */}\r\n//             {imageUrl && <img style={{width: \"100%\"}} src={imageUrl} alt='imgurl' className='rounded max-h-100 cursor-pointer' />}\r\n//         </span> \r\n//         <Image show={show} handleShow={handleShow} sourceData={sourceData} />\r\n//         {/* likes and comments count section */}\r\n//             {(likeCount > 0 || comments.length > 0) && \r\n//             <div className='flex text-md p-1 px-3 mt-1 -mx-4'>\r\n//                 <span onClick={showLikes}>\r\n//                     {likeCount > 0 && <span className='mr-2 cursor-pointer'>{likeCount}{' '} {likeCount > 1 ? 'likes' : 'like'} </span>}\r\n//                 </span>\r\n//                 <span onClick={showComments}>\r\n//                     {filteredComments.length > 0 && <span className='cursor-pointer'>{filteredComments.length}{' '} {filteredComments.length > 1 ? 'comments' : 'comment'} </span>}\r\n//                 </span>\r\n//             </div>}\r\n\r\n//         {/*  */}\r\n//         <div className='justify-between text-gray-800 flex mt-1 pt-2 px-3 -mb-3 -mx-5 border-t-2'>\r\n//             <span className='mx-1 flex cursor-pointer' onClick= {e => history.push(`/${twits.username}`)}>\r\n//                 {twits.imageUrl !== null ? (\r\n//                 <span className='mr-1'>\r\n//                     {(error) ? <BsPersonFill size={30}/>:\r\n//                     <img src={twits.imageUrl} alt='Profile' style={{width: '30px', height: '30px', borderRadius: '50%'}} />}\r\n//                 </span>) \r\n//                 : <BsPersonFill size={30}/>}\r\n//                 <span className='text-md pt-1 text-blue-600'>{email === twits.email ? 'Me' : `@${twits.username}`}</span>\r\n//             </span>\r\n//             <span className='flex'> \r\n//                 {!likeLoading ? <span style={{cursor: 'pointer'}} className='flex flex-col text-xs mx-2' onClick={() => likeTwit()}>\r\n//                     <span className={isLiked ? 'text-blue-500 m-auto' : 'text-gray-500 m-auto'}><AiFillLike size={18}/></span><span>Like</span>\r\n//                 </span> \r\n//                 :<LoadSpan height={20} width={18} color='#00bfff' />\r\n//                 }\r\n//                 <span className='text-xs cursor-pointer mx-2 flex text-gray-500 flex-col' onClick={() => commentTwit()}>\r\n//                     <span className='m-auto'><FaRegComment size={16}/></span><span>Comment</span>\r\n//                 </span>\r\n//                 {/* {email === twits.email &&\r\n//                 <span className='cursor-pointer flex-col text-xs mx-2 flex' onClick={() => deleteTwit()}>\r\n//                     {!deleteLoading ? \r\n//                     <><span className='m-auto'><AiTwotoneDelete size={18} color='red'/></span><span>Clear</span></>:\r\n//                     <LoadSpan height={20} width={20} color='#00bfff' />}\r\n//                 </span>} */}\r\n//             </span>\r\n//         </div>\r\n//         {commentFormActive && <CommentForm twitId={id} showCommentForm={showCommentForm} sync={sync} setSync={setSync}/>}\r\n        \r\n//         {/* {filteredComments.length > 0 &&\r\n//         <div className='mt-5'><span className='text-xs mt-4 -mb-2 cursor-pointer shadow-sm border-2 p-2' onClick={showComments}>{viewComments ? 'Hide Comments' : 'View Comments'}</span></div>\r\n//         } */}\r\n//         {viewLikes && \r\n//             <div className='border-2 border-gray-200 shadow-lg mt-4 rounded'>\r\n//                 {likes.map((person, idx) => (\r\n//                     <LikeUsers key={idx} person={person} email={email} error={error} />\r\n//                 ))}\r\n//             </div>\r\n//         }\r\n//         {viewComments && \r\n//             <>{comments.length > 0 &&\r\n//                     (<div className='mt-4 rounded'>\r\n//                         {filteredComments.sort((a, b) => - new Date(b.createdAt).getTime() + new Date(a.createdAt).getTime()).map((comment, idx) => (\r\n//                             <Comment key={idx} comment={comment} apiCallHook={apiCallHook} email={email} userId={userId} error={error} />\r\n//                         )\r\n//                     )}\r\n//                 </div>)\r\n//             }</>\r\n//         }\r\n//     </div>\r\n//     )\r\n// }\r\n\r\nconst Comment = (props) => {\r\n    let { comment: { id, text, usercomments, likecomments, createdAt }, email, userId, apiCallHook, error } = props;\r\n\r\n    const [likeLoading, setLikeLoading] = useState(false);\r\n    const [deleteLoading, setDeleteLoading] = useState(false);\r\n    const [more, setMore] = useState(false);\r\n    const history = useHistory();\r\n\r\n    const showMore = () => {\r\n        if(more) {\r\n            setMore(false);\r\n        } else {\r\n            setMore(true);\r\n        }\r\n    }\r\n\r\n    const isLiked = (() => {\r\n        const liked = likecomments.filter(like => like.userId === userId && like.isLiked === true);\r\n       return liked.length ? true : false;\r\n    })();\r\n    const likeCount = likecomments?.filter(like => like.isLiked).length;\r\n\r\n    const [llikeCount, setLikeCount] = useState(likeCount);\r\n    const [lisLiked, setIsLiked] = useState(isLiked);\r\n\r\n    let link;\r\n    if(text.search('http') >= 0) {\r\n        const http = text.split(' ').filter(x => x.search('http') >= 0);\r\n        link = http[0].split('\\n').filter(x => x.search('http') >= 0);\r\n        text = text.replace(link, '')\r\n    }\r\n\r\n    const likeComment = () => {\r\n        // setLikeLoading(true);\r\n        // setTimeout(() => {\r\n        //     setLikeLoading(false);\r\n        // }, 1000);\r\n        if(lisLiked) {\r\n            setIsLiked(!lisLiked);\r\n            setLikeCount(likeCount - 1);\r\n        } else {\r\n            setIsLiked(!lisLiked);\r\n            setLikeCount(likeCount + 1);\r\n        }\r\n        apiCallHook('POST', `${baseUrl}/likecomments/like/${id}`);\r\n    }\r\n    const deleteComment = () => {\r\n        setDeleteLoading(true);\r\n        setTimeout(() => {\r\n            setLikeLoading(false);\r\n        }, 1000);\r\n        apiCallHook('DELETE', `${baseUrl}/comments/${id}`);\r\n    }\r\n\r\n    return(\r\n        <div id={`${id}`} className='bg-gray-200 border-2 border-gray-200 shadow-md mb-3 p-1 rounded'>\r\n            <span className='text-xs mb-2 ml-2'>\r\n            <Moment fromNow>{createdAt}</Moment>\r\n            </span>\r\n            <p style={{fontSize: '1.1em', lineHeight: 2}} className='p-2 pl-4'>\r\n            {/* {text.length > 100 ? text.slice(0, 100) : text} */}\r\n            {text.length > 100 ? \r\n                text.slice(0, 100) \r\n                : \r\n                <>{text} {link && <a className='underline' href={link} target='_blank'>link</a>}</>\r\n            }\r\n\r\n            {more ? \r\n                <>{text.slice(100)}\r\n                    <>{text.length > 100 && \r\n                        <span style={{color: 'gray', fontWeight: '0.3em'}} className='cursor-pointer' onClick={showMore}>\r\n                            {link && <a className='underline' href={link} target='_blank'>link</a>}\r\n                            ...<span className='italic underline'>See less</span>\r\n                        </span>\r\n                        }\r\n                    </>\r\n                </> :\r\n                <>\r\n                    {text.length > 100 && \r\n                        <span style={{color: 'gray', fontWeight: '0.3em'}} className='cursor-pointer' onClick={showMore}>\r\n                            ...<span className='italic underline'>See more</span>\r\n                        </span>\r\n                    }\r\n                </>\r\n            }\r\n            </p>\r\n\r\n        {/* likes and comments count section */}\r\n\r\n        {/* TODO refactor for replies count */}\r\n        {(llikeCount > 0) && \r\n            <div className='flex text-xs p-1 px-3 mt-1 -mx-1'>\r\n                {llikeCount > 0 && <span className='mr-2'>{llikeCount}{' '} {llikeCount > 1 ? 'likes' : 'like'} </span>}\r\n                {/* TODO refactor for replies count */}\r\n            </div>}\r\n\r\n        {/*  */}\r\n            <div style={{fontSize: '0.9em'}} className='flex justify-between text-gray-800 flex mt-1 mb-1 pt-2 -ml-1 -mr-1 border-t-2 border-gray-200'>\r\n                <span className='mx-1 flex cursor-pointer'  onClick= {e => history.push(`/${usercomments.username}`)}>\r\n                    {usercomments.imageUrl ? (\r\n                    <span className='mr-1'>\r\n                        {error ? <BsPersonFill size={20}/>:\r\n                        <img src={usercomments.imageUrl} alt='Profile' style={{width: '1.5em', height: '1.5em', borderRadius: '50%'}} />}\r\n                    </span>)\r\n                    : <BsPersonFill size={20}/>}\r\n                    <span className=' text-blue-600'>@{email === usercomments.email ? 'Me' : usercomments.username}</span>\r\n                </span>\r\n                <span className='flex'>\r\n                    <span style={{cursor: 'pointer'}} className='mx-2 flex' onClick={() => likeComment()}>\r\n                        <span className={lisLiked ? 'text-blue-500' : 'text-gray-500'}><AiFillLike size={20}/></span>\r\n                    {/* {!likeLoading ? \r\n                    <>\r\n                        </>:\r\n                        <LoadSpan height={20} width={18} color='#00bfff' />} */}\r\n                    </span>\r\n                    {/* TODO Implement reply comment component */}\r\n             \r\n                    {email === usercomments.email &&\r\n                    <span style={{cursor: 'pointer'}} className='mx-2 flex hover:text-red-800' onClick={() => deleteComment()}>\r\n                        {!deleteLoading ? \r\n                        <AiTwotoneDelete size={20} color='red'/>:\r\n                        <LoadSpan height={20} width={20} color='#00bfff' />}\r\n                    </span>}\r\n                </span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst LikeUsers = ({person, email, error}) => {\r\n    const history = useHistory();\r\n\r\n    return(\r\n            \r\n            <div className='flex cursor-pointer hover:bg-gray-300 justify-between p-2 border-t-2 border-gray-200 pb-1' onClick= {e => history.push(`/${person.userlikes.username}`)}>\r\n                <span className='mx-1 flex'>\r\n                    {person.userlikes.imageUrl ? (\r\n                    <span>\r\n                        {error ? <BsPersonFill size={23}/>:\r\n                        <img src={person.userlikes.imageUrl} alt='Profile' style={{width: '1.5em', height: '1.5em', borderRadius: '50%'}} />}\r\n                    </span>)\r\n                    : <BsPersonFill size={23}/>}\r\n                    <span className=' text-blue-600 ml-1'>@{email === person.userlikes.email ? 'Me' : person.userlikes.username}</span>\r\n                </span>\r\n            </div>\r\n        \r\n        )\r\n    }\r\n\r\nexport const LoadSpan = ({height, width, color}) => (\r\n            <span \r\n            className='m-auto mr-4'>\r\n                        <Loader \r\n                        type='ThreeDots'\r\n                        color={color}\r\n                        height={height} \r\n                        width={width} \r\n                        />\r\n            </span>\r\n            )\r\n\r\n\r\n\r\n            // console.log(e.target.documentElement.scrollHeight);\r\n            // console.log(e.target.documentElement.scrollTop);\r\n            // console.log(e.target.documentElement.scrollHeight - e.target.documentElement.scrollTop);\r\n            // console.log(e.target.documentElement.scrollHeight - (window.innerHeight + e.target.documentElement.scrollTop));","import React, { useState } from 'react';\r\nimport { BsPersonFill } from 'react-icons/bs';\r\nimport { baseUrl } from '../helper';\r\n\r\nexport default function AttachProfileImage({imgUrl, error, email, userData, apiCallHook}) {\r\n    \r\n    const [limgUrl, setlImgUrl] = useState(\"\");\r\n\r\n    const handleImage = async(e) => {\r\n        const serviceImage = e.target.files[0];\r\n        const data = new FormData();\r\n        const url = \"https://api.cloudinary.com/v1_1/thevetdoctor/image/upload\";\r\n        data.append(\"file\", serviceImage);\r\n        data.append(\"upload_preset\", \"zunt8yrw\");\r\n        const res = await fetch(url, {\r\n          method: \"POST\",\r\n          body: data\r\n        });\r\n        const imgLink = await res.json();\r\n        setlImgUrl(imgLink.secure_url);\r\n        apiCallHook('PATCH', `${baseUrl}/auth/imageurl/update`, {imageUrl: imgLink.secure_url});\r\n      }\r\n\r\n    return (\r\n        <div className=\"flex p-1 rounded ml-1 mr-4 md:w-1/5\">\r\n            <label className={`${(email === userData?.email) && 'cursor-pointer'} -ml-2 -mr-5 flex`}>\r\n            {(limgUrl || imgUrl) ?\r\n                <>\r\n                {!error ? \r\n                    <img style={{width: '25em'}} src={limgUrl ? limgUrl : imgUrl} alt='avatar' className='w-40 max-h-52 rounded-lg -mr-2'\r\n                    />:\r\n                    <span className='flex bg-gray-200 p-3 rounded flex-grow'>\r\n                        <BsPersonFill size={100} />\r\n                    </span>}\r\n                </>\r\n            :\r\n            <>\r\n                <span className='flex bg-gray-300 p-3 rounded flex-grow'>\r\n                    <BsPersonFill size={100} />\r\n                </span>\r\n            </>\r\n            //   {uploading === \"loading\" &&\r\n            //   <Loader \r\n            //       type='TailSpin'\r\n            //       color='#000'\r\n            //       height={20} \r\n            //       width={20} \r\n            //   />}\r\n            }\r\n            {(email === userData?.email) &&\r\n\r\n            <input \r\n                type=\"file\"\r\n                placeholder=\"\"\r\n                accept=\"image/*;capture\"\r\n                className=\"hidden\"\r\n                onChange={e => handleImage(e)}\r\n            />}\r\n        </label>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport default function UserAssetTab({url, count, status}) {\r\n    const history = useHistory();\r\n\r\n  return (\r\n    <span className={'flex-col flex text-center p-2 cursor-pointer'} onClick= {e => history.push(url)}> \r\n    {/* <span className={'flex-col flex text-center p-2 cursor-pointer'} onClick= {e => history.push(`/twits/${user}`)}>  */}\r\n        <span className='text-lg font-bold'>\r\n        {/* {userTwits.length} */}\r\n        {count}\r\n        </span>\r\n        {/* <span className='text-xs'> {userTwits.length  > 1 ? 'posts' : 'post'}</span> */}\r\n        <span className='text-xs'> {status}</span>\r\n    </span>\r\n  )\r\n}\r\n","/* eslint-disable no-unused-vars */\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport axios from 'axios';\r\nimport Moment from 'react-moment';\r\nimport { BsPersonFill, BsToggleOff, BsToggleOn } from 'react-icons/bs';\r\nimport { IoIosArrowBack, IoIosPeople, IoMdCloudUpload } from 'react-icons/io';\r\nimport { GrClose, GrEdit, GrUploadOption } from 'react-icons/gr';\r\nimport { AiFillHome } from 'react-icons/ai';\r\nimport { MdEmail } from 'react-icons/md';\r\nimport Loader from 'react-loader-spinner';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport store from '../redux/store';\r\nimport AttachProfileImage from './AttachProfileImage';\r\nimport { baseUrl } from '../helper';\r\nimport { LoadSpan } from './Twits';\r\nimport UserAssetTab from './UserAssetTab';\r\n\r\n\r\nexport default function Profile() {\r\n    const [error, setError] = useState('');\r\n    const [profileImg, setProfileImg] = useState('');\r\n    const [followLoading, setFollowLoading] = useState(false);\r\n    const [sync, setSync] = useState(false);\r\n    let { user } = useParams();\r\n    const history = useHistory();\r\n    \r\n    const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\r\n    const defaultUsername = localStorage.getItem('username') ? localStorage.getItem('username') : '';    \r\n    const img = localStorage.getItem('img') ? localStorage.getItem('img') : '';\r\n    const token = localStorage.getItem('token');\r\n    const {getState, dispatch} = store;\r\n    const state = getState();\r\n    const { twits, formActive, userData, followers, following, followerCount, isFollower, isFollowing, followingCount, userTwits } = useSelector(state => state);\r\n    \r\n    const apiCallHook = async(method, url, data) => {\r\n        const res = await axios({\r\n            method,\r\n            url,\r\n            data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n            if(res && res.data.success) {\r\n                // console.log(res.data)\r\n                    if(method === 'GET') {\r\n                    dispatch({\r\n                        type: 'SET_USERS_DATA',\r\n                        data: res.data.data.users\r\n                    });\r\n                    dispatch({\r\n                        type: 'SET_PEOPLE_DATA',\r\n                        data: res.data.data.users\r\n                    });\r\n                    dispatch({\r\n                        type: 'SET_USER',\r\n                        data: {user, email} \r\n                    });\r\n                    localStorage.setItem('peopleData', JSON.stringify(res.data.data.users));\r\n                    localStorage.setItem('usersData', JSON.stringify(res.data.data.users));\r\n                    localStorage.setItem('users', JSON.stringify(res.data.data.users));\r\n\r\n                    \r\n                    setError('');\r\n                } else{\r\n                    toast(\"updated successfully!\");\r\n                    setSync(!sync);\r\n                }\r\n            } else {\r\n                setError('Please check your network');\r\n                dispatch({\r\n                    type: 'SET_USERS_DATA',\r\n                    data: JSON.parse(localStorage.getItem('usersData'))\r\n                });\r\n                dispatch({\r\n                    type: 'SET_PEOPLE_DATA',\r\n                    data: JSON.parse(localStorage.getItem('usersData'))\r\n                });\r\n                dispatch({\r\n                    type: 'SET_USER',\r\n                    data: {user, email} \r\n                });         \r\n            }\r\n        }\r\n\r\n        const showForm = () => {\r\n            dispatch({\r\n                type: 'SET_FORM_ACTIVE',\r\n                data: !formActive\r\n        });\r\n    }\r\n\r\n    const handleFollow = () => {\r\n        setFollowLoading(true);\r\n        setTimeout(() => {\r\n            setFollowLoading(false);\r\n        }, 1000);\r\n        if(isFollower) {\r\n            apiCallHook('PATCH', `${baseUrl}/followers/unfollow`, {followerId: userData?.id});\r\n        } else {\r\n            apiCallHook('POST', `${baseUrl}/followers/follow`, {followerId: userData?.id});\r\n        }\r\n    }\r\n    \r\n    \r\n    useEffect(() => {\r\n        if(token) {\r\n            apiCallHook('GET', `${baseUrl}/auth/users`);\r\n        } else {\r\n            return history.push('/');\r\n        }\r\n        return () => {\r\n        }\r\n    }, [sync]);\r\n    \r\n    \r\n        useEffect(() => {\r\n            dispatch({\r\n                type: 'SET_USER',\r\n                data: {user, email}\r\n            });\r\n            console.log(userData);\r\n\r\n            return () => {}\r\n        }, []);\r\n \r\n            return (\r\n                <div id={`${user}`} style={{fontFamily: 'Raleway', fontSize: '1.1em'}} className='shadow-lg border border-gray-200 rounded p-2 mb-4 m-auto justify-center md:w-1/2'>\r\n            <div style={{margin: 'auto', top: '0em'}} className='flex justify-between mb-6 border-3 border -mt-2 -mx-2 shadow-md p-2 bg-white fixed right-0 left-0 md:w-1/2'>\r\n                <span className='cursor-pointer' onClick={() => history.goBack()}><IoIosArrowBack size={30} /></span>\r\n                <span style={{fontFamily: 'Raleway'}} className='text-xl font-bold self-center'>Profile</span>\r\n                <span className='invisible'>yeah</span>\r\n            </div>\r\n    \r\n            <div style={{bottom: '0em', margin: 'auto'}} className='pb-1 rounded flex justify-around border-2 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n                <span className='cursor-pointer pt-2' onClick={() => history.push(\"/twits\")}>\r\n                    <AiFillHome size={25} color='gray' />\r\n                </span>\r\n\r\n                <span className='cursor-pointer pt-2' onClick= {e => history.push('/people')}>\r\n                    <IoIosPeople size={30} color='gray'/>\r\n                </span>\r\n\r\n                <span className='cursor-pointer pt-2'  onClick= {e => history.push(`/chats/${defaultUsername}`)}><MdEmail size={25} color='gray' />\r\n                </span>\r\n            </div>\r\n\r\n            <ToastContainer />\r\n        {!userData ? \r\n        <div style={{marginTop: '3.5em'}} className='flex justify-center items-center pt-8'>\r\n            <Loader \r\n            type='Bars'\r\n            color='#00bfff'\r\n            height={80} \r\n            width={80} \r\n        />\r\n        </div>:\r\n        <>\r\n            <div style={{marginTop: '3em'}} className='mb-1 p-1 flex flex-col border-2 border shadow-md rounded bg-gray-200'>\r\n                <div className='flex flex-grow'>\r\n                    <div>\r\n                        <AttachProfileImage imgUrl={userData?.imageUrl} error={error} email={email} userData={userData} apiCallHook={apiCallHook} />\r\n                    </div>\r\n                    <div className='flex ml-3 mb-1'>\r\n                        <div className='flex flex-col text-center align-items-center'>\r\n                            <div className='flex flex-col'>\r\n                                <span className='text-xl font-semibold ml-2 mb-2'>{userData?.username}</span>\r\n                                <span className={`self-center mb-1 text-sm font-semibold bg-green-400 rounded text-white ${userData?.verified ? 'w-20' : 'w-40'}`}>{userData?.verified ? 'Verified' : 'Not verified'}</span>\r\n                            </div>\r\n                            <div className='flex justify-center rounded bg-gray-300 shadow-md'>\r\n                                <UserAssetTab url={`/follower/${user}`} count={followerCount} status={followerCount  > 1 ? 'followers' : 'follower'} />\r\n                                <UserAssetTab url={`/following/${user}`} count={followingCount} status='following' />\r\n                                <UserAssetTab url={`/twits/${user}`} count={userTwits.length} status={userTwits.length  > 1 ? 'posts' : 'post'} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='text-sm text-center font-semibold p-1 border-2 bg-gray-400 shadow-md rounded-lg'>\r\n                    <div className={`${userData?.bioVisible && 'hidden'} px-2`}>\r\n                        <div className='text-white text-center font-semibold mb-2'>About Me</div>\r\n                        <div>{userData?.bio  ? userData?.bio : 'Not yet specified'}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <>\r\n            {error && \r\n                <div style={{backgroundColor: 'white', fontSize: '0.6em'}} className='text-red-500 text-center py-1 mb-0 rounded'>\r\n                    {error}\r\n                </div>\r\n            }\r\n            </>\r\n            <span className='text-sm pt-3 pb-1 mt-1 flex justify-between bg-gray-100'>\r\n                <span>\r\n                    <span className=''>Joined: <Moment fromNow>{userData?.createdAt}</Moment></span><br />\r\n                    {isFollowing && <span className='text-xs text-white bg-gray-500 rounded p-1 mb-3'> \r\n                        Follows you\r\n                    </span>}\r\n                </span>\r\n                <span className='flex'>\r\n                {(email !== userData?.email) && \r\n                    <>\r\n                    {!followLoading ? \r\n                        <span className='flex flex-col'>\r\n                            <span className={'invisible mt-2 mr-1'}></span>\r\n                            <span className={'text-white bg-blue-900 rounded hover:bg-blue-400 p-1 cursor-pointer -mt-2 mr-1'} onClick={() => handleFollow()}> \r\n                            {!isFollower ? 'Follow' : 'Following'}\r\n                            </span>\r\n                        </span>\r\n                        :\r\n                        <LoadSpan height={20} width={20} color='' />}\r\n                    </>\r\n                }\r\n                </span>\r\n            </span>\r\n            <>\r\n            {/* {(email === userData?.email) && \r\n                <span className={'text-sm text-white bg-gray-900 rounded hover:bg-gray-400 p-2 cursor-pointer mr-3 mt-5'}  onClick= {e => history.push(`/chats/${user}`)}> \r\n                    Messages\r\n                </span>\r\n            } */}\r\n            </>\r\n            <UserProfile email={email} userData={userData} apiCallHook={apiCallHook} defaultUsername={defaultUsername} />\r\n                    \r\n        </>\r\n        }\r\n        {!userData?.username &&\r\n        <div className='flex'>\r\n            <span className='m-auto'><BsPersonFill size={300} /></span>\r\n        </div>}\r\n    </div>\r\n    )\r\n}\r\n\r\n\r\nconst UserProfile = ({userData, email, apiCallHook, defaultUsername}) => {\r\n    const {name, username, bio, location, mobile, dob} = userData;\r\n    // console.log(userData, username, defaultUsername);\r\n\r\n    const [editForm, setEditForm] = useState(false); \r\n    const [lname, setName] = useState(name);\r\n    const [lusername, setUserName] = useState(username);\r\n    const [lbio, setBio] = useState(bio);\r\n    const [llocation, setLocation] = useState(location);\r\n    const [ldob, setDob] = useState(dob);\r\n    const [lmobile, setMobile] = useState(mobile);\r\n\r\n    const [nameHidden, setNameHidden] = useState(false);\r\n    const [usernameHidden, setUsernameHidden] = useState(false);\r\n    const [bioHidden, setBioHidden] = useState(false);\r\n    const [locationHidden, setLocationHidden] = useState(false);\r\n    const [dobHidden, setDobHidden] = useState(false);\r\n    const [mobileHidden, setMobileHidden] = useState(false);\r\n\r\n    const editProfile = () => {\r\n        setEditForm(!editForm);\r\n        if(editForm) {\r\n            apiCallHook('PATCH', `${baseUrl}/auth/update`, {name: lname, username: lusername, bio: lbio, location: llocation, dob: ldob, mobile: lmobile});\r\n        }\r\n    }\r\n\r\n    const handleProfileInfo = (e) => {\r\n        if(e.target.name === 'name') {\r\n            setName(e.target.value);\r\n        } else if(e.target.name === 'username') {\r\n            setUserName(e.target.value);\r\n        } else if(e.target.name === 'bio') {\r\n            setBio(e.target.value);\r\n        } else if(e.target.name === 'location') {\r\n            setLocation(e.target.value);\r\n        } else if(e.target.name === 'date-of-birth'){\r\n            setDob(e.target.value);\r\n        } else {\r\n            setMobile(e.target.value);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className='border bg-gray-100 border-t-1 shadow-md rounded mt-1 mb-8'>\r\n        <div className='flex mt-2 justify-between mb-3'>\r\n            <span className='ml-2 underline'>Profile Information</span>\r\n            {(email === userData?.email) &&\r\n            <>\r\n                {!editForm && <span className=' flex cursor-pointer text-black p-2 rounded-full justify-items-end' onClick={() => editProfile()}> \r\n                    <GrEdit size={18} /> <span className='text-sm ml-1'>Edit</span>\r\n                </span>}\r\n                {editForm && <span className='flex cursor-pointer text-black p-2 rounded-full' onClick={() => setEditForm()}> \r\n                    <GrClose size={18} /><span className='text-sm ml-1'>Cancel</span>\r\n                </span>}\r\n                {editForm && <span className='flex cursor-pointer text-black p-2 rounded-full' onClick={() => editProfile()}> \r\n                    <GrUploadOption size={18} /><span className='text-sm ml-1'>Update</span>\r\n                </span>}\r\n            </>\r\n            }\r\n        </div>\r\n        <div className='mb-2'>\r\n            <div className='flex justify-between'>\r\n                <label htmlFor=\"Name\" className='px-2 font-bold'> Name</label>\r\n                {(email === userData?.email) &&\r\n                <span className='cursor-pointer mr-4'>\r\n                    {nameHidden ? \r\n                    <span className='text-green-400' onClick={() => setNameHidden(false)}><BsToggleOff size={30} /></span> \r\n                    : \r\n                    <span className='text-green-400' onClick={() => setNameHidden(true)}><BsToggleOn size={30} /></span>}\r\n                </span>}\r\n            </div>\r\n            {editForm && <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={lname ? lname : name}\r\n            style={{width: '16em'}}\r\n            onChange={handleProfileInfo}\r\n            placeholder=\"Your name\"\r\n            className='p-1 my-1 rounded-lg'\r\n            />}\r\n            {!editForm && <span style={{fontSize: '0.7em'}} className={`${nameHidden && 'hidden'} px-2`}>{name ? name : 'Not available'}</span>}\r\n        </div>\r\n        <div className='mb-2'>\r\n            <div className='flex justify-between'>\r\n                <label htmlFor=\"Username\" className='px-2 font-bold'> Username</label>\r\n                {(email === userData?.email) &&\r\n                <span className='cursor-pointer mr-4'>\r\n                    {usernameHidden ? \r\n                    <span className='text-green-400' onClick={() => setUsernameHidden(false)}><BsToggleOff size={30} /></span> \r\n                    : \r\n                    <span className='text-green-400' onClick={() => setUsernameHidden(true)}><BsToggleOn size={30} /></span>}\r\n                </span>}\r\n            </div>\r\n            {editForm && <input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            value={lusername ? lusername : username}\r\n            style={{width: '16em'}}\r\n            onChange={handleProfileInfo}\r\n            disabled\r\n            placeholder=\"Update your username\"\r\n            className='p-1 my-1 rounded-lg'\r\n            />}\r\n            {!editForm && <div style={{fontSize: '0.7em'}} className={`${usernameHidden && 'hidden'} px-2`}>{username ? username : 'Not available'}</div>}\r\n        </div>\r\n        <div className='mb-2'>\r\n            <div className='flex justify-between'>\r\n                <label htmlFor=\"Bio\" className='px-2 font-bold'> Bio</label>\r\n                {(email === userData?.email) &&\r\n                <span className='cursor-pointer mr-4'>\r\n                    {bioHidden ? \r\n                    <span className='text-green-400' onClick={() => setBioHidden(false)}><BsToggleOff size={30} /></span> \r\n                    : \r\n                    <span className='text-green-400' onClick={() => setBioHidden(true)}><BsToggleOn size={30} /></span>}\r\n                </span>}\r\n            </div>\r\n            {editForm && <textarea\r\n            type=\"textarea\"\r\n            name=\"bio\"\r\n            value={lbio ? lbio : bio}\r\n            rows={4}\r\n            cols={3}\r\n            style={{width: '18em', height: '8em'}}\r\n            onChange={handleProfileInfo} \r\n            placeholder=\"Tell the world briefly about yourself\"\r\n            className='text-sm p-1 my-1 rounded-lg'\r\n            />}\r\n            {!editForm && <div style={{fontSize: '0.7em'}} className={`${bioHidden && 'hidden'} px-2`}>{bio  ? bio : 'Not available'}</div>}\r\n        </div>\r\n        <div className='mb-2'>\r\n            <div className='flex justify-between'>\r\n                <label htmlFor=\"Location\" className='px-2 font-bold'> Location</label>\r\n                {(email === userData?.email) &&\r\n                <span className='cursor-pointer mr-4'>\r\n                    {locationHidden ? \r\n                    <span className='text-green-400' onClick={() => setLocationHidden(false)}><BsToggleOff size={30} /></span> \r\n                    : \r\n                    <span className='text-green-400' onClick={() => setLocationHidden(true)}><BsToggleOn size={30} /></span>}\r\n                </span>}\r\n            </div>\r\n            {editForm && <input\r\n            type=\"text\"\r\n            name=\"location\"\r\n            value={llocation ? llocation : location}\r\n            style={{width: '16em'}}\r\n            onChange={handleProfileInfo}\r\n            placeholder=\"Share your location\"\r\n            className='p-1 my-1 rounded-lg'\r\n            />}\r\n            {!editForm && <div style={{fontSize: '0.7em'}} className={`${locationHidden && 'hidden'} px-2`}>{location ? location : 'Not available'}</div>}\r\n        </div>\r\n        <div className='mb-2'>\r\n            <div className='flex justify-between'>\r\n                <label htmlFor=\"Date of Birth\" className='px-2 font-bold'> Date of Birth</label>\r\n                {(email === userData?.email) &&\r\n                <span className='cursor-pointer mr-4'>\r\n                    {dobHidden ? \r\n                    <span className='text-green-400' onClick={() => setDobHidden(false)}><BsToggleOff size={30} /></span> \r\n                    : \r\n                    <span className='text-green-400' onClick={() => setDobHidden(true)}><BsToggleOn size={30} /></span>}\r\n                </span>}\r\n            </div>\r\n            {editForm && <input\r\n            type=\"date\"\r\n            name=\"date-of-birth\"\r\n            value={ldob ? ldob : dob}\r\n            style={{width: '16em'}}\r\n            onChange={handleProfileInfo}\r\n            placeholder=\"Date of Birth\"\r\n            className='p-1 my-1 rounded-lg'\r\n            />}\r\n            {!editForm && <div style={{fontSize: '0.7em'}} className={`${dobHidden && 'hidden'} px-2`}>{dob ? dob : 'Not available'}</div>}\r\n        </div>\r\n        <div className='mb-2'>\r\n            <div className='flex justify-between'>\r\n                <label htmlFor=\"Phone Number\" className='px-2 font-bold'> Phone Number</label>\r\n                {(email === userData?.email) &&\r\n                <span className='cursor-pointer mr-4'>\r\n                    {mobileHidden ? \r\n                    <span className='text-green-400' onClick={() => setMobileHidden(false)}><BsToggleOff size={30} /></span> \r\n                    : \r\n                    <span className='text-green-400' onClick={() => setMobileHidden(true)}><BsToggleOn size={30} /></span>}\r\n                </span>}\r\n            </div>\r\n            {editForm && <input\r\n            name=\"mobile\"\r\n            value={lmobile ? lmobile : mobile}\r\n            type=\"tel\"\r\n            pattern=\"/^[0]\\d{10, 12}$/\"\r\n            style={{width: '16em'}}\r\n            onChange={handleProfileInfo}\r\n            placeholder=\"Drop your mobile number \"\r\n            className='p-1 my-1 rounded-lg'\r\n            />}\r\n            {!editForm && <div style={{fontSize: '0.7em'}} className={`${mobileHidden && 'hidden'} px-2`}>{mobile ? mobile : 'Not available'}</div>}\r\n        </div>\r\n      </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n                    // const userTwits = twits.filter(obj => obj.twits.username === user);\r\n                    // const userDataInStore = res.data.data.users.filter(obj => obj.username === user)[0];\r\n                    // const followers = userDataInStore.followers.filter(user => user.follower.isFollowed);\r\n                    // const following = userDataInStore.following.filter(user => user.follower.isFollowed);\r\n                    // const checkIsFollower = followers.filter(user => user.email === email).length > 0;\r\n                    // const checkIsFollowing = following.filter(user => user.email === email).length > 0;\r\n                    // dispatch({\r\n                        //     type: 'SET_USER_DATA',\r\n                        //     data: userDataInStore\r\n                        // });\r\n                        // setFollowerCount(followers.length);\r\n                        // setFollowingCount(following.length);\r\n                        // setIsFollower(checkIsFollower);\r\n                        // setIsFollowing(checkIsFollowing);\r\n                    // setTwitCount(userTwits.length);\r\n                    \r\n                    // if(userDataInStore.imageUrl) {\r\n                        //     localStorage.setItem('profileImg', userDataInStore.imageUrl);\r\n                    //     setProfileImg(userDataInStore.imageUrl);\r\n                    // }","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { IoCloseCircle } from 'react-icons/io5';\r\nimport { BsPersonFill } from 'react-icons/bs';\r\nimport { IoIosArrowBack, IoIosPeople } from 'react-icons/io';\r\nimport Moment from 'react-moment';\r\nimport axios from 'axios';\r\nimport { baseUrl } from '../helper';\r\nimport { LoadSpan } from './Twits';\r\nimport TopSearch from './TopSearch';\r\nimport store from '../redux/store';\r\nimport { useSelector } from 'react-redux';\r\nimport { AiFillHome } from 'react-icons/ai';\r\nimport Loader from 'react-loader-spinner';\r\nimport { RiChatNewLine } from 'react-icons/ri';\r\nimport { MdEmail } from 'react-icons/md';\r\nimport { SiSubstack } from 'react-icons/si';\r\n\r\nexport default function People() {\r\n    const [error, setError] = useState('');\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [ userData, setUserData ] = useState({});\r\n    // const [ searchData, setSearchData ] = useState([]);\r\n    // const [ peopleData, setPeopleData ] = useState([]);\r\n    const [ isFollower, setIsFollower ] = useState(false);\r\n    const [ isFollowing, setIsFollowing ] = useState(false);\r\n    const [ followerCount, setFollowerCount ] = useState(0);\r\n    const [ followingCount, setFollowingCount ] = useState(0);\r\n    const [followLoading, setFollowLoading] = useState(false);\r\n    const [sync, setSync] = useState(false);\r\n    let { user } = useParams();\r\n    const history = useHistory();\r\n\r\n    const {getState, dispatch} = store;\r\n    const state = getState();\r\n    const { twits, users, peopleData, searchData, networkStatus, formActive } = useSelector(state => state);\r\n\r\n    const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\r\n    const username = localStorage.getItem('username') ? localStorage.getItem('username') : '';    \r\n    const img = localStorage.getItem('img') ? localStorage.getItem('img') : '';    \r\n    const token = localStorage.getItem('token');\r\n\r\n    const handleChange = (e) => {\r\n        const target = e.target;\r\n        const value = target.value;\r\n        setSearchQuery(value);\r\n      \r\n    }\r\n\r\n    const showForm = () => {\r\n        dispatch({\r\n            type: 'SET_FORM_ACTIVE',\r\n            data: !formActive\r\n        });\r\n    }\r\n\r\n    const handleSearch = () => {\r\n        const searchResults = peopleData.filter(person => {\r\n            return person.username.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0;\r\n        });\r\n        dispatch({\r\n            type: 'SET_SEARCH_DATA',\r\n            data: searchResults\r\n        });\r\n        localStorage.setItem('searchData', JSON.stringify(searchResults));\r\n    }\r\n\r\n    const apiCallHook = async(method, url, data) => {\r\n        const res = await axios({\r\n            method,\r\n            url,\r\n            data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n            if(res && res.data.success) {\r\n                    if(method === 'GET') {\r\n                    setUserData(res.data.data.user);\r\n                    dispatch({\r\n                        type: 'SET_PEOPLE_DATA',\r\n                        data: res.data.data.users\r\n                    });\r\n                    localStorage.setItem('peopleData', JSON.stringify(res.data.data.users));\r\n                    dispatch({\r\n                        type: 'SET_SEARCH_DATA',\r\n                        data: res.data.data.users\r\n                    });\r\n                    localStorage.setItem('searchData', JSON.stringify(res.data.data.users));\r\n                    localStorage.setItem('users', JSON.stringify(res.data.data.users));\r\n                    setError('');\r\n                } else{\r\n                    setSync(!sync); \r\n                }\r\n            } else {\r\n                setError('Please check your network');\r\n                dispatch({\r\n                    type: 'SET_PEOPLE_DATA',\r\n                    data: JSON.parse(localStorage.getItem('peopleData'))\r\n                });            \r\n                dispatch({\r\n                    type: 'SET_SEARCH_DATA',\r\n                    data: JSON.parse(localStorage.getItem('peopleData'))\r\n                });            \r\n            }\r\n    }\r\n\r\n    const handleFollow = () => {\r\n        setFollowLoading(true);\r\n        setTimeout(() => {\r\n            setFollowLoading(false);\r\n        }, 1000);\r\n        if(isFollower) {\r\n            apiCallHook('PATCH', `${baseUrl}/followers/unfollow`, {followerId: userData?.id});\r\n        } else {\r\n            apiCallHook('POST', `${baseUrl}/followers/follow`, {followerId: userData?.id});\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        apiCallHook('GET', `${baseUrl}/auth/users`);\r\n        dispatch({\r\n            type: 'SET_SEARCH_DATA',\r\n            data: JSON.parse(localStorage.getItem('peopleData'))\r\n        });\r\n\r\n        return () => {\r\n        }\r\n    }, [sync]);\r\n  \r\n    useEffect(() => {\r\n        handleSearch();\r\n        \r\n        return () => {\r\n        }\r\n    }, [searchQuery]);\r\n    return (\r\n        <div id={`${user}`} style={{fontFamily: 'Raleway', fontSize: '1.1em'}} className='shadow-lg border border-gray-200 h-full rounded p-2 mb-4 m-auto md:w-1/2'>\r\n        <div style={{margin: 'auto', top: '0em'}} className='bg-white flex justify-between p-2 mb-2 border-3 border shadow-md -mt-2 -mx-2 fixed right-0 left-0 md:w-1/2'>\r\n            <span className='cursor-pointer text-left' onClick={() => history.goBack()}><IoIosArrowBack size={30} /></span>\r\n            <span style={{fontFamily: 'Raleway'}} className='text-xl font-bold self-center'>Buzzers</span>\r\n            <span></span>\r\n        </div>\r\n        <div style={{bottom: '0em', margin: 'auto'}} className='pb-1 rounded flex justify-around border-2 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n            <span className='cursor-pointer pt-2' onClick={() => history.push(\"/twits\")}>\r\n                <AiFillHome size={25} color='gray' />\r\n            </span>\r\n            {username === 'hobar' && <span className='cursor-pointer pt-2' onClick= {e => history.push('/subscriptions')}>\r\n                        <SiSubstack size={20} color='gray'/>\r\n            </span>}\r\n            <span className='cursor-pointer pt-1 border-t-2 border-black' onClick= {e => history.push('/people')}>\r\n                <IoIosPeople size={30} color='black'/>\r\n            </span>\r\n\r\n            <span className='cursor-pointer pt-2'  onClick= {e => history.push(`/chats/${username}`)}><MdEmail size={25} color='gray' />\r\n            </span>\r\n        </div>\r\n\r\n\r\n        {error && <div style={{backgroundColor: 'white', fontWeight: 'bold', marginTop: '2.5em'}} className='text-red-500 text-center py-1 -mb-9 m-1 rounded'>Please check your network !</div>}\r\n        {/* <span className='text-sm mt-3 mb-2'>\r\n        </span> */}\r\n        {!peopleData.length > 0 ? \r\n            <div className='flex mt-9 justify-center items-center pt-8'>\r\n                <Loader \r\n                type='Bars'\r\n                color='#00bfff'\r\n                height={80} \r\n                width={80} \r\n            />\r\n            </div>:\r\n            <>\r\n            <TopSearch searchQuery={searchQuery} handleChange={handleChange} setSearchQuery={setSearchQuery} error={error} />\r\n            <div className='flex flex-col text-md'>\r\n                {searchData.sort((a, b) => a.email.localeCompare(b.email)).map((person, idx) => (\r\n                    <span key={idx} \r\n                        className={'bg-gray-200 rounded hover:bg-gray-400 p-2 mb-2 cursor-pointer'} \r\n                        onClick= {() => history.push(`/${person.username}`)}\r\n                    > \r\n                    <span className='mx-2 flex cursor-pointer'  onClick= {e => history.push(`/${person.username}`)}>\r\n                    {person.imageUrl ? (\r\n                    <span className='mr-2'>\r\n                        {error ? <BsPersonFill size={'1.5em'} color='black' />:\r\n                        <img src={person.imageUrl} alt='Profile' style={{width: '1.5em', height: '1.5em', borderRadius: '50%'}} />}\r\n                    </span>)\r\n                    : <span className='mr-2 text-black'><BsPersonFill size={'1.5em'}/></span>}\r\n                    {email === person.email ? 'Me' : person.username}\r\n                </span>\r\n                    </span>\r\n                ))}\r\n            </div>\r\n        </>}\r\n        <div className='flex'>\r\n            <span className='m-auto'><IoIosPeople size={300} /></span>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { IoCloseCircle } from 'react-icons/io5';\r\nimport { BsPersonFill } from 'react-icons/bs';\r\nimport { IoIosArrowBack, IoIosPeople } from 'react-icons/io';\r\nimport axios from 'axios';\r\nimport { baseUrl } from '../helper';\r\nimport { LoadSpan } from './Twits';\r\nimport TopSearch from './TopSearch';\r\nimport { AiFillHome } from 'react-icons/ai';\r\nimport { MdEmail } from 'react-icons/md';\r\n\r\nexport default function Follower() {\r\n    const [error, setError] = useState('');\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [ userData, setUserData ] = useState({});\r\n    const [ searchData, setSearchData ] = useState([]);\r\n    const [ peopleData, setPeopleData ] = useState([]);\r\n    const [followLoading, setFollowLoading] = useState(false);\r\n    const [sync, setSync] = useState(false);\r\n    let { user } = useParams();\r\n    const history = useHistory();\r\n\r\n    const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\r\n    const defaultUsername = localStorage.getItem('username') ? localStorage.getItem('username') : '';\r\n    const img = localStorage.getItem('img') ? localStorage.getItem('img') : '';\r\n    const token = localStorage.getItem('token');\r\n\r\n\r\n    const handleChange = (e) => {\r\n        const target = e.target;\r\n        const value = target.value;\r\n        setSearchQuery(value);  \r\n    }\r\n\r\n    const handleSearch = () => {\r\n        const searchResults = peopleData.filter(person => {\r\n            return person.username.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0;\r\n        });\r\n        setSearchData(searchResults);\r\n    }\r\n\r\n    const apiCallHook = async(method, url, data) => {\r\n        const res = await axios({\r\n            method,\r\n            url,\r\n            data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                }\r\n            });\r\n            if(res && res.data.success) {\r\n                    if(method === 'GET') {\r\n                    setUserData(res.data.data.user);\r\n                    setPeopleData(res.data.data.users);\r\n                    setSearchData(res.data.data.users);\r\n                    localStorage.setItem('users', JSON.stringify(res.data.data.users));\r\n                    setError('');\r\n                } else{\r\n                    setSync(!sync); \r\n                }\r\n            } else {\r\n                setError('Please check your network');\r\n            }\r\n    }\r\n\r\n    const handleFollow = () => {\r\n        setFollowLoading(true);\r\n        setTimeout(() => {\r\n            setFollowLoading(false);\r\n        }, 1000);\r\n            apiCallHook('PATCH', `${baseUrl}/followers/unfollow`, {followerId: userData?.id});\r\n    }\r\n  \r\n    useEffect(() => {\r\n        handleSearch();\r\n        \r\n        return () => {\r\n        }\r\n    }, [searchQuery]);\r\n    \r\n    useEffect(() => {\r\n        const userDataInStore = JSON.parse(localStorage.getItem('users')).filter(obj => obj.username === user)[0];\r\n        const followers = userDataInStore.followers.filter(user => user.follower.isFollowed);\r\n        setUserData(userDataInStore);\r\n        setSearchData(followers);\r\n        setPeopleData(followers);\r\n\r\n        return () => {}\r\n    }, []);\r\n    \r\n    return (\r\n        <div id={`${user}`} style={{fontFamily: 'Raleway', fontSize: '1.1em'}} className='shadow-lg border border-gray-200 h-full rounded p-2 mb-4 md:w-1/2 m-auto'>\r\n        <p className='flex justify-between mb-6 p-2 border-3 border shadow-md -mt-2 -mx-2 '>\r\n            <span className='cursor-pointer' onClick={() => history.goBack()}><IoIosArrowBack size={30} /></span>\r\n            <span style={{fontFamily: 'Raleway'}} className='text-xl font-bold self-center'>Followers</span>\r\n            <span></span>\r\n        </p>\r\n        <div style={{bottom: '0em', margin: 'auto'}} className='pb-1 rounded flex justify-around border-2 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n                <span className='cursor-pointer pt-2' onClick={() => history.push(\"/twits\")}>\r\n                    <AiFillHome size={25} color='gray' />\r\n                </span>\r\n\r\n                <span className='cursor-pointer pt-2' onClick= {e => history.push('/people')}>\r\n                    <IoIosPeople size={30} color='gray'/>\r\n                </span>\r\n\r\n                <span className='cursor-pointer pt-2'  onClick= {e => history.push(`/chats/${defaultUsername}`)}><MdEmail size={25} color='gray' />\r\n                </span>\r\n            </div>\r\n\r\n\r\n        {error && <div style={{backgroundColor: 'white', fontWeight: 'bold'}} className='text-red-500 text-center py-2 m-1 rounded'>Please check your network !</div>}\r\n        <div className='-mb-9'>\r\n            {userData?.imageUrl ?\r\n            <span className='flex'>\r\n                    {error ? <BsPersonFill size={'1.7em'} color='black' />:\r\n                <img src={userData?.imageUrl} alt='Profile' style={{width: '2em', height: '2em', borderRadius: '50%'}} />}\r\n                <span className='text-xl font-semibold ml-2 mb-2'>{userData?.username}</span>\r\n            </span>\r\n            : \r\n            <span className='flex'>\r\n                <BsPersonFill size={30} />\r\n                <span className='text-xl font-semibold ml-2 mb-2'>{userData?.username}</span>\r\n            </span>}\r\n        </div>\r\n        <TopSearch searchQuery={searchQuery} handleChange={handleChange} setSearchQuery={setSearchQuery}/>\r\n        <div className='flex flex-col text-md'>\r\n            {searchData.sort((a, b) => a.email.localeCompare(b.email)).map((person, idx) => (\r\n                <span key={idx} \r\n                    className={'bg-gray-200 rounded hover:bg-gray-400 p-2 mb-2 cursor-pointer'} \r\n                    onClick= {() => history.push(`/${person.username}`)}\r\n                > \r\n                <span className='mx-2 flex cursor-pointer'  onClick= {e => history.push(`/${person.username}`)}>{error}\r\n                {person.imageUrl ? (\r\n                <span className='mr-2'>\r\n                    {error ? <BsPersonFill size={'1.5em'} color='black' />:\r\n                    <img src={person.imageUrl} alt='Profile' style={{width: '1.5em', height: '1.5em', borderRadius: '50%'}} />}\r\n                </span>)\r\n                : <span className='mr-2 text-black'><BsPersonFill size={'1.5em'}/></span>}\r\n                {email === person.email ? 'Me' : person.username}{error}\r\n            </span>\r\n                </span>\r\n            ))}\r\n        </div>\r\n        <div className='flex'>\r\n            <span className='m-auto'><IoIosPeople size={300} /></span>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { IoCloseCircle } from 'react-icons/io5';\r\nimport { BsPersonFill } from 'react-icons/bs';\r\nimport { IoIosArrowBack, IoIosPeople } from 'react-icons/io';\r\nimport axios from 'axios';\r\nimport { baseUrl } from '../helper';\r\nimport { LoadSpan } from './Twits';\r\nimport TopSearch from './TopSearch';\r\nimport { AiFillHome } from 'react-icons/ai';\r\nimport { MdEmail } from 'react-icons/md';\r\n\r\nexport default function Following() {\r\n    const [error, setError] = useState('');\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [ userData, setUserData ] = useState({});\r\n    const [ searchData, setSearchData ] = useState([]);\r\n    const [ peopleData, setPeopleData ] = useState([]);\r\n    const [followLoading, setFollowLoading] = useState(false);\r\n    const [sync, setSync] = useState(false);\r\n    let { user } = useParams();\r\n    const history = useHistory();\r\n\r\n    const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\r\n    const defaultUsername = localStorage.getItem('username') ? localStorage.getItem('username') : '';    \r\n    const img = localStorage.getItem('img') ? localStorage.getItem('img') : '';    \r\n    const token = localStorage.getItem('token');\r\n\r\n\r\n    const handleChange = (e) => {\r\n        const target = e.target;\r\n        const value = target.value;\r\n        setSearchQuery(value);  \r\n    }\r\n\r\n    const handleSearch = () => {\r\n        const searchResults = peopleData.filter(person => {\r\n            return person.username.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0;\r\n        });\r\n        setSearchData(searchResults);\r\n    }\r\n\r\n    const apiCallHook = async(method, url, data) => {\r\n        const res = await axios({\r\n            method,\r\n            url,\r\n            data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                }\r\n            });\r\n            if(res && res.data.success) {\r\n                    if(method === 'GET') {\r\n                    setUserData(res.data.data.user);\r\n                    setPeopleData(res.data.data.users);\r\n                    setSearchData(res.data.data.users);\r\n                    localStorage.setItem('users', JSON.stringify(res.data.data.users));\r\n                    setError('');\r\n                } else{\r\n                    setSync(!sync); \r\n                }\r\n            } else {\r\n                setError('Please check your network');\r\n            }\r\n    }\r\n\r\n    const handleFollow = () => {\r\n        setFollowLoading(true);\r\n        setTimeout(() => {\r\n            setFollowLoading(false);\r\n        }, 1000);\r\n            apiCallHook('PATCH', `${baseUrl}/followers/unfollow`, {followerId: userData?.id});\r\n    }\r\n  \r\n    useEffect(() => {\r\n        handleSearch();\r\n        \r\n        return () => {\r\n        }\r\n    }, [searchQuery]);\r\n    \r\n    useEffect(() => {\r\n        const userDataInStore = JSON.parse(localStorage.getItem('users')).filter(obj => obj.username === user)[0];\r\n        const following = userDataInStore.following.filter(user => user.follower.isFollowed);\r\n        setUserData(userDataInStore);\r\n        setSearchData(following);\r\n        setPeopleData(following);\r\n\r\n        return () => {}\r\n    }, []);\r\n    \r\n    return (\r\n        <div id={`${user}`} style={{fontFamily: 'Raleway', fontSize: '1.1em'}} className='shadow-lg border border-gray-200 h-full rounded p-2 mb-4 md:w-1/2 m-auto'>\r\n        <p className='flex justify-between mb-6 border-3 border shadow-md p-2 -mt-2 -mx-2 '>\r\n            <span className='cursor-pointer' onClick={() => history.goBack()}><IoIosArrowBack size={30} /></span>\r\n            <span style={{fontFamily: 'Raleway'}} className='text-xl font-bold self-center'>Following</span>\r\n            <span></span>\r\n        </p>\r\n        <div style={{bottom: '0em', margin: 'auto'}} className='pb-1 rounded flex justify-around border-2 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n                <span className='cursor-pointer pt-2' onClick={() => history.push(\"/twits\")}>\r\n                    <AiFillHome size={25} color='gray' />\r\n                </span>\r\n\r\n                <span className='cursor-pointer pt-2' onClick= {e => history.push('/people')}>\r\n                    <IoIosPeople size={30} color='gray'/>\r\n                </span>\r\n\r\n                <span className='cursor-pointer pt-2'  onClick= {e => history.push(`/chats/${defaultUsername}`)}><MdEmail size={25} color='gray' />\r\n                </span>\r\n            </div>\r\n\r\n        {error && <div style={{backgroundColor: 'white', fontWeight: 'bold'}} className='text-red-500 text-center py-2 m-1 rounded'>Please check your network !</div>}\r\n        <div className='-mb-9'>\r\n            {userData?.imageUrl ?\r\n            <span className='flex'>\r\n                    {error ? <BsPersonFill size={'1.7em'} color='black' />:\r\n                <img src={userData?.imageUrl} alt='Profile' style={{width: '2em', height: '2em', borderRadius: '50%'}} />}\r\n                <span className='text-xl font-semibold ml-2 mb-2'>{userData?.username}</span>\r\n            </span>\r\n            : \r\n            <span className='flex'>\r\n                <BsPersonFill size={30} />\r\n                <span className='text-xl font-semibold ml-2 mb-2'>{userData?.username}</span>\r\n            </span>}\r\n        </div>\r\n        <TopSearch searchQuery={searchQuery} handleChange={handleChange} setSearchQuery={setSearchQuery}/>\r\n        <div className='flex flex-col text-md'>\r\n            {searchData.sort((a, b) => a.email.localeCompare(b.email)).map((person, idx) => (\r\n                <span key={idx} \r\n                    className={'bg-gray-200 rounded hover:bg-gray-400 p-2 mb-2 cursor-pointer'} \r\n                    onClick= {() => history.push(`/${person.username}`)}\r\n                > \r\n                <span className='mx-2 flex cursor-pointer' onClick= {e => history.push(`/${person.username}`)}>\r\n                {person.imageUrl ? (\r\n                <span className='mr-2'>\r\n                    {!error ? <BsPersonFill size={'1.5em'} color='black' />:\r\n                    <img src={person.imageUrl} alt='Profile' style={{width: '1.5em', height: '1.5em', borderRadius: '50%'}} />}\r\n                </span>)\r\n                : <span className='mr-2 text-black'><BsPersonFill size={'1.5em'}/></span>}\r\n                {email === person.email ? 'Me' : person.username}\r\n            </span>\r\n                </span>\r\n            ))}\r\n        </div>\r\n        <div className='flex'>\r\n            <span className='m-auto'><IoIosPeople size={300} /></span>\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { BsPersonFill } from 'react-icons/bs';\r\nimport { IoIosArrowBack, IoIosPeople } from 'react-icons/io';\r\nimport axios from 'axios';\r\nimport { baseUrl, frontendUrl } from '../helper';\r\nimport { LoadSpan, Twit } from './Twits';\r\nimport { AiFillHome } from 'react-icons/ai';\r\nimport store from '../redux/store';\r\nimport { useSelector } from 'react-redux';\r\nimport { MdEmail } from 'react-icons/md';\r\n\r\nexport default function UserTwits() {\r\n    const [error, setError] = useState('');\r\n    const [ userData, setUserData ] = useState({});\r\n    const [ twitData, setTwitData ] = useState([]);\r\n    const [sync, setSync] = useState(false);\r\n    let { user } = useParams();\r\n    const history = useHistory();\r\n\r\n    const {getState, dispatch} = store;\r\n    const state = getState();\r\n    const { twits } = useSelector(state => state);\r\n    \r\n    const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\r\n    const defaultUsername = localStorage.getItem('username') ? localStorage.getItem('username') : '';    \r\n    const img = localStorage.getItem('img') ? localStorage.getItem('img') : '';    \r\n    const token = localStorage.getItem('token');\r\n    const apiUrl = `${baseUrl}/twits`;\r\n\r\n    const apiCallHook = async(method, url, data) => {\r\n        const res = await axios({\r\n            method,\r\n            url,\r\n            data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                }\r\n            });\r\n            if(res && res.data.success) {\r\n                    if(method === 'GET') {\r\n                    setUserData(res.data.data.user);\r\n                    setTwitData(res.data.data.users);\r\n                    localStorage.setItem('users', JSON.stringify(res.data.data.users));\r\n                    setError('');\r\n                } else{\r\n                    setSync(!sync); \r\n                }\r\n            } else {\r\n                setError('Please check your network');\r\n            }\r\n    }\r\n\r\n    const getTwits = async() => {\r\n        if(!token) {\r\n            return;\r\n        }\r\n        const res = await axios({\r\n            method: 'GET',\r\n            url: `${apiUrl}`,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n            if(res && res.data.success) {\r\n                dispatch({\r\n                    type: 'SET_TWIT_DATA',\r\n                    data: res.data.data\r\n                });\r\n                localStorage.setItem('twits', JSON.stringify(res.data.data));\r\n                // .map(x => {\r\n                //     x.formActive = false;\r\n                //     return x;\r\n                // })));\r\n                const userTwitData = res.data.data.twits.filter(obj => obj.twits.username === user);\r\n                setUserData(userTwitData[0]?.twits);\r\n                setTwitData(userTwitData);\r\n            } else {\r\n                setError('Please check your network');\r\n                dispatch({\r\n                    type: 'SET_TWIT_DATA',\r\n                    data: JSON.parse(localStorage.getItem('twits'))\r\n                });\r\n            }\r\n    }\r\n    \r\n    useEffect(() => {\r\n        const userTwitData = twits.filter(obj => obj.twits.username === user);\r\n        setUserData(userTwitData[0]?.twits);\r\n        setTwitData(userTwitData);\r\n\r\n        return () => {}\r\n    }, []);\r\n    \r\n    useEffect(async() => {\r\n        getTwits();\r\n    \r\n        return () => {\r\n        }\r\n    }, [sync]);\r\n\r\n    return (\r\n        <div id={`${user}`} style={{fontFamily: 'Raleway', fontSize: '1em'}} className='shadow-lg border border-gray-200 h-full rounded p-2 mb-4 md:w-1/2 m-auto'>\r\n        <p className='flex justify-between mb-6 border-3 border shadow-md p-2 -mt-2 -mx-2 '>\r\n        <span className='cursor-pointer text-left' onClick={() => history.goBack()}><IoIosArrowBack size={30} /></span>\r\n        <span style={{fontFamily: 'Raleway'}} className='text-xl font-bold self-center'>Posts</span>\r\n            <span></span>\r\n        </p>\r\n        <div style={{bottom: '0em', margin: 'auto'}} className='pb-1 rounded flex justify-around border-2 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n                <span className='cursor-pointer pt-2' onClick={() => history.push(\"/twits\")}>\r\n                    <AiFillHome size={25} color='gray' />\r\n                </span>\r\n\r\n                <span className='cursor-pointer pt-2' onClick= {e => history.push('/people')}>\r\n                    <IoIosPeople size={30} color='gray'/>\r\n                </span>\r\n\r\n                <span className='cursor-pointer pt-2'  onClick= {e => history.push(`/chats/${defaultUsername}`)}><MdEmail size={25} color='gray' />\r\n                </span>\r\n            </div>\r\n\r\n        {error && <div style={{backgroundColor: 'white', fontWeight: 'bold'}} className='text-red-500 text-center py-2 m-1 rounded'>Please check your network !</div>}\r\n        <div className='mb-1'>\r\n        <>\r\n            {userData?.imageUrl ?\r\n            <span className='flex'>\r\n                    {error ? <BsPersonFill size={'1.7em'} color='black' />:\r\n                <img src={userData?.imageUrl} alt='Profile' style={{width: '2em', height: '2em', borderRadius: '50%'}} />}\r\n                <span className='font-semibold ml-2 mb-2'>{userData?.username}</span>\r\n            </span>\r\n            : \r\n            <span className='flex'>\r\n                <BsPersonFill size={30} />\r\n                <span className='font-semibold ml-2 mb-2'>{userData?.username}</span>\r\n            </span>}\r\n            </>\r\n        </div>\r\n        <div>\r\n            {twitData.length > 0 ?\r\n        <>{\r\n            twitData.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()).map((twit, idx) => \r\n                <div  key={idx} style={{backgroundColor: 'white', fontWeight: ''}}>\r\n                    <Twit key={idx} twit={twit} email={email} apiCallHook={apiCallHook} baseUrl={baseUrl} frontendUrl={frontendUrl} sync={sync} setSync={setSync} />\r\n                </div>\r\n            )\r\n        }</>\r\n        :\r\n        <div className='text-center'>No post available for now</div>}\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/chat.7e8098f6.jpg\";","/* eslint-disable no-unused-vars */\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Loader from 'react-loader-spinner';\r\nimport { baseUrl } from '../helper';\r\nimport chat from './chat.jpg';\r\nimport { CgCopyright } from 'react-icons/cg';\r\n\r\nexport default function Reset(props) {\r\n    const [newpass1, setNewPass1] = useState('');\r\n    const [newpass2, setNewPass2] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const history = useHistory();\r\n\r\nconst apiUrl = `${baseUrl}/auth/reset`; \r\n\r\nconst handleChange = (e) => {\r\n    if(e.target.name === 'newpass1') {\r\n        console.log(e.target.value);\r\n        setNewPass1(e.target.value);\r\n    } else {\r\n        console.log(e.target.value);\r\n        setNewPass2(e.target.value);\r\n    }\r\n}\r\n\r\nuseEffect(() => {\r\n\r\n    return () => {\r\n    }\r\n}, []);\r\n    return (\r\n        <div style={{fontFamily: 'Roboto', fontWeight: '600', backgroundImage: 'url(\"./bg.png\")'}} className='font-Roboto text-center align-items-center bg-cover bg-center'>\r\n             <p className='text-center mb-2'>\r\n                <span style={{fontFamily: 'Architects Daughter', fontSize: '1.8em'}} className='text-purple-900 font-bold italic'>Buzz<br/>\r\n                </span> \r\n                <span className='text-md'> Feel free, express yourself & network </span>\r\n            </p>\r\n            <h3 className='font-bold text-md mt-8 mb-4'>\r\n                Set up a new password\r\n            </h3>\r\n            <input \r\n                type='text'\r\n                name='newpass1'\r\n                value={newpass1} \r\n                placeholder='Enter a new password'\r\n                onChange={handleChange}\r\n                className='px-3 rounded mb-5 text-xs'\r\n                /><br/>\r\n            <input \r\n                type='text'\r\n                name='newpass2'\r\n                value={newpass2} \r\n                placeholder='Confirm new password' \r\n                onChange={handleChange}\r\n                className='px-3 rounded mb-5 text-xs'\r\n            /><br/>\r\n            <div className='flex flex-col mb-3'>\r\n                {error && <span className='mb-2 text-red-600'>{error}</span>}\r\n                <div className='flex justify-center'>\r\n                    {!loading ?\r\n                    <span \r\n                        // onClick={() => authenticate(false, email, password, apiUrl, error, setError, setLoading, history)}\r\n                        className='cursor-pointer mb-3 bg-green-500 hover:bg-green-400 py-2 px-3 font-bold shadow-md rounded text-white text-xs'\r\n                    >   \r\n                    Update Password\r\n                    </span>\r\n                    :\r\n                    <span className=''>\r\n                        <Loader \r\n                        type='ThreeDots'\r\n                        color='#00bfff'\r\n                        height={40} \r\n                        width={40} \r\n                        />\r\n                     </span>}\r\n                </div>\r\n            </div>\r\n          \r\n          {/* <img \r\n            src={chat}\r\n            alt='Chat'\r\n            className=''\r\n            style={{borderRadius: '5', width: '40'}}\r\n          /> */}\r\n            <p className=\"text-white-400 bold flex text-center\"><CgCopyright /> Twitee</p>         \r\n        </div>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { BsPersonFill } from 'react-icons/bs';\r\n\r\nexport default function Chat({messages}) {\r\n    // const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\r\n\r\n    // const messageLine = messages.map(message => email === message.chatSender.email ? message.chatReceiver : message.chatSender);\r\n    // console.log(messages, messageLine);\r\n\r\n    return (\r\n        <div>\r\n            {messages.map((msg, idx) => (\r\n                <Message key={idx} texts={msg}/>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Message = ({texts}) => {\r\n    const history = useHistory();\r\n\r\n    const {messages } = texts;\r\n    return (\r\n        <div>\r\n            Message ({messages.length})\r\n            {messages.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()).map((message, idx) => (\r\n                <div key={idx} className='border border-gray-200 shadow-lg mb-2 p-1 rounded'>\r\n                    <div className='flex justify-between'>\r\n                        <span className='mx-1 flex cursor-pointer'  onClick= {e => history.push(`/${message.sender.username}`)}>\r\n                        {message.sender.imageUrl ? (\r\n                        <span className='mr-1'>\r\n                            <img src={message.sender.imageUrl} alt='Profile' style={{width: '2em', height: '2em', borderRadius: '50%'}} />\r\n                        </span>)\r\n                        : <BsPersonFill size={20}/>}\r\n                        <span className='text-md'>{message.sender.username}</span>\r\n                        </span>\r\n                        <span>{new Date(message.createdAt).toLocaleTimeString()}</span>\r\n                    </div>                \r\n                    <span className='ml-9'>{message.text}</span>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}","/* eslint-disable react-hooks/exhaustive-deps */\r\n/* eslint-disable no-unused-vars */\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { BsPersonFill } from 'react-icons/bs';\r\nimport { IoIosArrowBack, IoIosPeople } from 'react-icons/io';\r\nimport axios from 'axios';\r\nimport { baseUrl, frontendUrl } from '../helper';\r\nimport { LoadSpan, Twit } from './Twits';\r\nimport { AiFillHome } from 'react-icons/ai';\r\nimport store from '../redux/store';\r\nimport { useSelector } from 'react-redux';\r\nimport Chat from './Chat';\r\nimport { MdEmail } from 'react-icons/md';\r\nimport { RiChatNewLine } from 'react-icons/ri';\r\nimport { SiSubstack } from 'react-icons/si';\r\n\r\nexport default function Chats() {\r\n    const [error, setError] = useState('');\r\n    // const [ userMessages, setUserMessages ] = useState({});\r\n    const [sync, setSync] = useState(false);\r\n    let { user } = useParams();\r\n    const history = useHistory();\r\n\r\n    const {getState, dispatch} = store;\r\n    const state = getState();\r\n    const { messages, formActive } = useSelector(state => state);\r\n    // console.log(messages)\r\n\r\n    const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\r\n    const defaultUsername = localStorage.getItem('username') ? localStorage.getItem('username') : '';    \r\n    const username = localStorage.getItem('username') ? localStorage.getItem('username') : '';\r\n    const img = localStorage.getItem('img') ? localStorage.getItem('img') : '';      \r\n    const token = localStorage.getItem('token');\r\n    const apiUrl = `${baseUrl}/messages`;\r\n\r\n    const apiCallHook = async(method, url, data) => {\r\n        const res = await axios({\r\n            method,\r\n            url,\r\n            data,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                }\r\n            });\r\n            if(res && res.data.success) {\r\n                    if(method === 'GET') {\r\n                        console.log(res.data)\r\n                    // setUserData(res.data.data.user);\r\n                    // setTwitData(res.data.data.users);\r\n                    localStorage.setItem('users', JSON.stringify(res.data.data.users));\r\n                    setError('');\r\n                } else{\r\n                    setSync(!sync); \r\n                }\r\n            } else {\r\n                setError('Please check your network');\r\n            }\r\n    }\r\n\r\n    const showForm = () => {\r\n        dispatch({\r\n            type: 'SET_FORM_ACTIVE',\r\n            data: !formActive\r\n        });\r\n    }\r\n\r\n    const getMessages = async() => {\r\n        if(!token) {\r\n            return;\r\n        }\r\n        const res = await axios({\r\n            method: 'GET',\r\n            url: `${apiUrl}/chats`,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n            if(res && res.data.success) {\r\n                dispatch({\r\n                    type: 'SET_MESSAGES_DATA',\r\n                    data: res.data.data\r\n                });\r\n                localStorage.setItem('messages', JSON.stringify(res.data.data));\r\n                // const userMessages = res.data.data.filter(obj => obj.twits.username === user);\r\n                // setUserData(userTwitData[0]?.twits);\r\n                // setTwitData(userTwitData);\r\n            } else {\r\n                setError('Please check your network');\r\n                dispatch({\r\n                    type: 'SET_MESSAGES_DATA',\r\n                    data: JSON.parse(localStorage.getItem('messages'))\r\n                });\r\n            }\r\n    }\r\n    \r\n    useEffect(() => {\r\n        getMessages();\r\n     \r\n        return () => {\r\n        }\r\n    }, [sync]);\r\n\r\n    const messageLine = messages.map(message => email === message.chatSender.email ? message.chatReceiver : message.chatSender);\r\n    // console.log(messages, messageLine);\r\n    \r\n    return (\r\n        <div id={`${user}`} style={{fontFamily: 'Raleway', fontSize: '1.1em'}} className='shadow-lg border border-gray-200 h-full rounded p-2 mb-4 md:w-1/2 m-auto'>\r\n        <p className='flex justify-between mb-4 border-3 border shadow-md p-2'>\r\n            <span className='cursor-pointer text-left' onClick={() => history.goBack()}><IoIosArrowBack size={30} /></span>\r\n            <span style={{fontFamily: 'Raleway'}} className='text-xl font-bold self-center'>Messages</span>\r\n            <span></span>\r\n        </p>\r\n        \r\n        <div style={{bottom: '0em', margin: 'auto'}} className='pb-1 rounded flex justify-around border-2 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n                <span className='cursor-pointer pt-2' onClick={() => history.push(\"/twits\")}>\r\n                    <AiFillHome size={25} color='gray' />\r\n                </span>\r\n                {username === 'hobar' && <span className='cursor-pointer pt-2' onClick= {e => history.push('/subscriptions')}>\r\n                        <SiSubstack size={20} color='gray'/>\r\n                    </span>}\r\n                <span className='cursor-pointer pt-2' onClick= {e => history.push('/people')}>\r\n                    <IoIosPeople size={30} color='gray'/>\r\n                </span>\r\n\r\n                <span className='cursor-pointer pt-2 border-t-2 border-black'  onClick= {e => history.push(`/chats/${defaultUsername}`)}><MdEmail size={25} color='black' />\r\n                </span>\r\n            </div>\r\n        \r\n        {error && <div style={{backgroundColor: 'white', fontWeight: 'bold'}} className='text-red-500 text-center py-1 m-1 rounded'>Please check your network !</div>}\r\n        <div className='mb-1'>\r\n            {messages.length ? \r\n            <Chat messages={messages} />\r\n            :\r\n            <div className='text-center'>You have not started any conversation</div>}\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n","/* eslint-disable no-unused-vars */\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport { BsPersonFill } from 'react-icons/bs';\r\nimport { IoIosArrowBack, IoIosPeople } from 'react-icons/io';\r\nimport Moment from 'react-moment';\r\nimport axios from 'axios';\r\nimport { baseUrl } from '../helper';\r\nimport { LoadSpan } from './Twits';\r\nimport store from '../redux/store';\r\nimport { useSelector } from 'react-redux';\r\nimport { AiFillHome } from 'react-icons/ai';\r\n\r\nexport default function Verified() {\r\n    const [error, setError] = useState('');\r\n    const [userData, setUserData] = useState({});\r\n    let { user } = useParams();\r\n    const history = useHistory();\r\n\r\n    const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\r\n    const token = localStorage.getItem('token');\r\n    const {getState, dispatch} = store;\r\n    const state = getState();\r\n    \r\n    const verifyUser = async() => {\r\n        const res = await axios({\r\n            method: 'GET',\r\n            url: `${baseUrl}/auth/verify/${user}`,\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n            })\r\n            .catch(error => {\r\n                if(error.isAxiosError) {\r\n                    setError(error.response?.data?.error);\r\n                }\r\n            });\r\n            if(res && res.data.success) {             \r\n            } else {\r\n                setError('Please check your network');\r\n              \r\n            }\r\n    }\r\n\r\n    useEffect(() => {\r\n        verifyUser();\r\n\r\n        return () => {}\r\n    }, []);\r\n\r\n    return (\r\n        <div id={`${user}`} style={{fontSize: '1.1em'}} className='shadow-lg border border-gray-200 h-full rounded p-2 mb-4 m-auto justify-center md:w-1/2'>\r\n        <p className='flex justify-between mb-6 border-3 border shadow-md p-2'>\r\n            <span className='cursor-pointer' onClick={() => history.goBack()}><IoIosArrowBack size={30} /></span>\r\n            {<span className='flex cursor-pointer' onClick= {e => history.push('/people')}><IoIosPeople size={35}/></span>}\r\n            <span className='bg-black-400 cursor-pointer' onClick={() => history.push(\"/twits\")}><AiFillHome size={28} /></span>\r\n        </p>\r\n        <div className='mb-1'>\r\n        <>\r\n            {userData?.imageUrl ?\r\n            <span className='flex'>\r\n                    {error ? <BsPersonFill size={'1.7em'} color='black' />:\r\n                <img src={userData?.imageUrl} alt='Profile' style={{width: '2em', height: '2em', borderRadius: '50%'}} />}\r\n                <span className='text-xl font-semibold ml-2 mb-2'>{user}</span>\r\n            </span>\r\n            : \r\n            <span className='flex'>\r\n                <BsPersonFill size={30} />\r\n                <span className='text-xl font-semibold ml-2 mb-2'>{user}</span>\r\n            </span>}\r\n            </>\r\n        </div>\r\n        Your account is now verified!\r\n\r\n        {error && <div style={{backgroundColor: 'white', fontWeight: 'bold'}} className='text-red-500 text-center py-2 mb-5 rounded'>{error}</div>}\r\n        <span className='text-sm mt-3 mb-1 flex justify-between'>\r\n         \r\n            <span className='flex'>\r\n                <>\r\n                    <span className='flex flex-col'>\r\n                        <span className={'text-xs text-white bg-blue-900 rounded hover:bg-blue-400 p-1 cursor-pointer -mt-2 mr-1'} onClick={() => history.push(`/${user}`)}> \r\n                            Go to your profile\r\n                        </span>\r\n                    </span>\r\n                </>\r\n            </span>\r\n        </span>\r\n        \r\n        <span>\r\n            {userData?.imageUrl ? \r\n            <>{error ? <BsPersonFill size={300} color='black' />:\r\n            <img src={userData?.imageUrl} width='100%' alt='imgurl' className='mt-3 rounded-lg' />}</>\r\n            :\r\n            <div className='flex'>\r\n                <span className='m-auto'><BsPersonFill size={300} /></span>\r\n            </div>}\r\n        </span>\r\n        \r\n        \r\n    </div>\r\n    )\r\n}\r\n","/* eslint-disable no-unused-vars */\r\n/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport { IoIosArrowBack, IoIosPeople } from 'react-icons/io';\r\nimport { BsPersonFill } from 'react-icons/bs';\r\nimport { MdEmail } from 'react-icons/md';\r\nimport { AiFillHome } from 'react-icons/ai';\r\nimport { SiSubstack } from 'react-icons/si';\r\nimport { Logout } from './GoogleAuth';\r\nimport store from '../redux/store';\r\nimport { baseUrl } from '../helper';\r\nimport { useSelector } from 'react-redux';\r\n\r\nexport default function Subscriptions() {\r\n    const [error, setError] = useState('');\r\n    const [subData, setSubData] = useState([]);\r\n\r\n    const {getState, dispatch} = store;\r\n    const state = getState();\r\n    const { subs, users } = useSelector(state => state);\r\n    const email = localStorage.getItem('email') ? localStorage.getItem('email') : '';\r\n    const img = localStorage.getItem('img') ? localStorage.getItem('img') : '';\r\n    const username = localStorage.getItem('username') ? localStorage.getItem('username') : '';\r\n    const token = localStorage.getItem('token');\r\n    const history = useHistory();\r\n \r\n    const logout = () => {\r\n        localStorage.removeItem('token');\r\n        history.push('/');\r\n    } \r\n\r\n    const push = async() => {\r\n        await axios({\r\n        method: 'GET', url: `${baseUrl}/push`\r\n    }).then(res => {\r\n        dispatch({\r\n            type: 'SET_SUBS',\r\n            data: res.data.data\r\n        });\r\n        localStorage.setItem('subs', JSON.stringify(res.data.data));\r\n        return res;\r\n    });\r\n}\r\n\r\n    useEffect(() => {\r\n        if(!token) {\r\n            return history.push('/');\r\n        }\r\n        if(username === 'hobar') {\r\n            push();\r\n        }\r\n        return () => {}\r\n    }, []);\r\n\r\n  return (<div>\r\n            <div className='flex flex-col text-md md:w-1/2 m-auto'>\r\n                <div style={{top: '0em', margin: 'auto'}} className='p-2 rounded mb-2 flex justify-between border-4 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n                        {img !== 'null' ? (\r\n                            <span className='cursor-pointer'  onClick= {e => history.push(`/${username}`)}>\r\n                                {error ? <BsPersonFill size={25} />:\r\n                            <img src={img} alt='Profile' style={{width: '30px', height: '30px', borderRadius: '50%'}} />}\r\n                        </span>) \r\n                        : <span className='text-left cursor-pointer'><BsPersonFill size={25} onClick={e => history.push(`/${username}`)} /></span>}\r\n                    <span className='text-left flex cursor-pointer'  onClick= {e => history.push('people')}><IoIosPeople size={30}/><span className='pt-1 pl-1'>{users > 0 && users}</span></span>\r\n                    \r\n                    <span style={{cursor: 'pointer'}} className='text-right' onClick={() => logout()}><Logout />\r\n                    </span>\r\n                </div>\r\n                <p style={{marginTop: '3em'}} className='flex justify-between mb-1 p-2 border-3 border shadow-md mx-1 '>\r\n                    <span className='cursor-pointer' onClick={() => history.goBack()}><IoIosArrowBack size={30} /></span>\r\n                    <span style={{fontFamily: 'Raleway'}} className='text-xl font-bold self-center'>Subscriptions{' ('}{subs.length}{' / '}{subs.filter(sub => sub.users).length}{')'}</span>\r\n                    <span></span>\r\n                </p>\r\n                <div style={{bottom: '0em', margin: 'auto'}} className='pb-1 rounded flex justify-around border-2 border shadow-md fixed right-0 left-0 bg-white md:w-1/2'>\r\n                    <span className='cursor-pointer pt-1' onClick={() => history.push(\"/twits\")}>\r\n                        <AiFillHome size={25} color='gray' /> \r\n                    </span>\r\n                    {username === 'hobar' && <span className='cursor-pointer pt-2 border-t-2 border-black' onClick= {e => history.push('/subscriptions')}>\r\n                        <SiSubstack size={20} color='black'/>\r\n                    </span>}\r\n                    <span className='cursor-pointer pt-2' onClick= {e => history.push('/people')}>\r\n                        <IoIosPeople size={30} color='gray'/>\r\n                    </span>\r\n\r\n                    <span className='cursor-pointer pt-2'  onClick= {e => history.push(`/chats/${username}`)}><MdEmail size={25} color='gray' />\r\n                    </span>\r\n                </div>\r\n\r\n                {subs.sort((a, b) => a.users?.username.localeCompare(b.users?.username)).map((person, idx) => (\r\n                    <span key={idx} \r\n                        className={'bg-gray-200 rounded hover:bg-gray-400 p-2 mb-2 cursor-pointer'} \r\n                        onClick= {person?.users !== null ? (e => history.push(`/${person.users?.username}`)) : (() => alert('User unknown'))}\r\n                    > \r\n                    <span className='mx-2 flex cursor-pointer'>\r\n                    {person.users?.imageUrl ? (\r\n                    <span className='mr-2'>\r\n                        {error ? <BsPersonFill size={'1.5em'} color='black' />:\r\n                        <img src={person.users?.imageUrl} alt='Profile' style={{width: '1.5em', height: '1.5em', borderRadius: '50%'}} />}\r\n                    </span>)\r\n                    : <span className='mr-2 text-black'><BsPersonFill size={'1.5em'}/></span>}\r\n                    {email === person.user?.email ? 'Me' : person.users?.username}\r\n                </span>\r\n                    </span>\r\n                ))}\r\n            </div>\r\n            <div className='flex'>\r\n                    <span className='m-auto'><IoIosPeople size={300} /></span>\r\n            </div>\r\n        </div>);\r\n        }\r\n","/* eslint-disable react-hooks/exhaustive-deps */\n/* eslint-disable no-unused-vars */\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Posts from \"./components/Posts\";\nimport Twits from './components/Twits/Twits.js';\nimport Profile from './components/Profile';\nimport People from './components/People';\nimport Follower from './components/Followers';\nimport Following from './components/Following';\nimport UserTwits from './components/UserTwits';\nimport store from './redux/store';\nimport { useSelector } from 'react-redux';\nimport Reset from './components/Reset';\nimport Chats from './components/Chats';\nimport Verified from './components/Verified';\nimport Subscriptions from './components/Subscriptions';\n// import { useHistory } from 'react-router-dom';\n\nfunction App() {\n    const [loggedIn, setLoggedIn] = useState(JSON.parse(localStorage.getItem('loggedIn')));\n    const [signup, setSignup] = useState(JSON.parse(localStorage.getItem('signup')) || false);\n    \n    const {getState, dispatch} = store;\n    const state = getState();\n    const { searchQuery, networkStatus } = useSelector(state => state);\n    // console.log(state);\n  //   const history = useHistory();\n  //   const token = localStorage.getItem('token');\n  //   if(!token) {\n  //     console.log(window.location.hash)\n  //     history?.push('/');\n  // }\n    useEffect(() => {\n      if(navigator.onLine) {\n        dispatch({\n          type: 'SET_NETWORK_STATUS',\n          data: true\n        });\n      } else {\n        dispatch({\n          type: 'SET_NETWORK_STATUS',\n          data: false\n        });\n      } \n    }, []);\n\n    //   const username = localStorage.getItem('username');\n    //   Notification.requestPermission().then((result) => {\n    //     if (result === 'granted') {\n    //       // randomNotification();\n    //     }\n    //   });\n\n    // function randomNotification() {\n    //   const notifTitle = username ? `Hello, ${username}` : 'Hello !';\n    //   const notifBody = `Have you checked Twitee today?`;\n    //   const notifImg = `https://res.cloudinary.com/thevetdoctor/image/upload/v1599332593/g1rozhabxswegvhp59h3.jpg`;\n    //   const options = {\n    //     body: notifBody,\n    //     icon: notifImg,\n    //   };\n    //   new Notification(notifTitle, options);\n    //   setTimeout(randomNotification, 3 * 60 * 60 * 1000);\n    // }\n// console.log(window.document.body.scrollHeight)\n\n\n  return (\n    <Router>\n        {/* <div className=\"h-full w-full m-0 max-w-sm mx-auto bg-blue-200 rounded-xl shadow-md flex\"> */}\n        {/* <div className=\"font-Roboto w-full m-0 max-w-xl max-h-xl my-0 mx-auto rounded-xl shadow-md -px-3\"> */}\n              {/* <div className=\"bg-gray-200 rounded-xl p-4\"> */}\n      <Switch>\n              <Route exact path=\"/\" component={Posts} />\n              <Route exact path=\"/twits\" component={Twits} />\n              <Route exact path=\"/people\" component={People} />\n              <Route exact path=\"/subscriptions\" component={Subscriptions} />\n              <Route exact path=\"/reset\" component={Reset} />\n              <Route exact path=\"/verify/:user\" component={Verified} />\n              <Route path=\"/twits/:user\" component={UserTwits} />\n              <Route path=\"/chats/:user\" component={Chats} />\n              <Route path=\"/following/:user\" component={Following} />\n              <Route path=\"/follower/:user\" component={Follower} />\n              <Route path=\"/:user\" component={Profile} />\n      </Switch>\n          {/* </div>ff */}\n        {/* </div>  */}\n    </Router>\n  );\n}\n\nexport default App;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable no-useless-escape */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst {baseUrl} = require('./helper');\nconsole.log(process.env.REACT_APP_PUBLIC_VAPID ? 'Valid' : 'Invalid');\n\nconst urlBase64ToUint8Array = (base64String) => {\n    const padding = '='.repeat((4 - base64String.length % 4) % 4);\n    const base64 = (base64String + padding).replace(/\\-/g, '+').replace(/_/g, '/');\n\n    const rawdata = window.atob(base64);\n    const outputArray = new Uint8Array(rawdata.length);\n\n    for(let i = 0; i < rawdata.length; ++i) {\n        outputArray[i] = rawdata.charCodeAt(i);\n    }\n    return outputArray;\n}\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  console.log('Registering service worker');\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(async (registration) => {\n\n      console.log('Service worker registered');\n\n      console.log('Registering Push Manager');\n  \n      const subscription = await registration.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: urlBase64ToUint8Array(process.env.REACT_APP_PUBLIC_VAPID)\n      });\n      console.log('Push Manager registered');\n  \n      console.log('Sending Push');\n  \n      const sub = await fetch(`${baseUrl}/subscribe`, {\n          method: 'POST',\n          body: JSON.stringify(subscription),\n          headers: {\n              'content-type': 'application/json'\n          }\n      });\n      localStorage.setItem('sub', JSON.stringify(subscription))\n      console.log('Push Sent');\n\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\n// import reportWebVitals from './reportWebVitals';\n// import * as serviceWorker from \"./service-worker\";\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nif (localStorage.theme === 'dark' || (!('theme' in localStorage))) {\n  document.documentElement.classList.add('dark')\n} else {\n  document.documentElement.classList.remove('dark')\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\nserviceWorkerRegistration.register();\n","export const baseUrl = (() => {\r\n    if(window.location.host.indexOf('localhost') >= 0){\r\n    return 'http://localhost:4000';\r\n    } else {\r\n    return 'https://oba-twit.herokuapp.com';\r\n    }\r\n})();\r\n\r\nexport const frontendUrl = (() => {\r\n    if(window.location.host.indexOf('localhost') >= 0){\r\n    return 'http://localhost:3000/twits';\r\n    } else {\r\n    return 'https://obabuzz.netlify.app/twits';\r\n    }\r\n})();"],"sourceRoot":""}