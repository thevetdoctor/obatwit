(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{51:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(39),s=n.n(a),o=(n(51),n(3)),i=n(16),l=n(6),u=n(4),d=n.n(u),j=n(8),b=n(9),m=n.n(b),h=n(15),p=n.n(h),x=n(28),f="https://oba-twit.herokuapp.com",g=n(23),O=n.n(g),v=n(42),w=n(1);O.a.config();var y="865349714041-35tbv6kfmsdueb9cb018vukqpdul0shv.apps.googleusercontent.com";function S(e){var t=e.error,n=e.setError,r=(e.loading,e.setLoading),a=Object(c.useState)(JSON.parse(localStorage.getItem("signup"))),s=Object(o.a)(a,2),i=s[0],u=(s[1],"".concat(f,"/auth/").concat(i?"signup":"login")),d=Object(l.f)();return Object(w.jsx)("div",{children:Object(w.jsx)(x.GoogleLogin,{clientId:y,buttonText:i?"Signup with Google":"Login with Google",onSuccess:function(e){console.log("login suceeded"),T(!0,e.profileObj.email,null,u,t,n,r,d,e.profileObj.name,e.profileObj.imageUrl)},onFailure:function(e){console.log("login failed",e)},cookeiPolicy:"single_host_origin",style:{marginTop:"160px"}})})}var N=function(){return Object(w.jsx)("div",{children:Object(w.jsx)(x.GoogleLogout,{clientId:y,render:function(e){return Object(w.jsx)("span",{children:Object(w.jsx)(v.a,{size:25})})},buttonText:"Signout",onLogoutSuccess:function(e){console.log(e,"Logout suceeded")},style:{marginTop:"160px"}})})},k=n.p+"static/media/chat.7e8098f6.jpg",C=n(43);O.a.config();var T=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,c,r,a,s,o,i,l,u,j,b=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=b.length>0&&void 0!==b[0]&&b[0],n=b.length>1?b[1]:void 0,c=b.length>2&&void 0!==b[2]?b[2]:null,r=b.length>3?b[3]:void 0,b.length>4?b[4]:void 0,a=b.length>5?b[5]:void 0,s=b.length>6?b[6]:void 0,o=b.length>7?b[7]:void 0,i=b.length>8?b[8]:void 0,l=b.length>9?b[9]:void 0,localStorage.setItem("img",l),s(!0),t){e.next=18;break}return e.next=15,m()({method:"POST",url:"".concat(r),data:{email:n,password:c},headers:{"Content-Type":"application/json"}}).catch((function(e){var t,n;e.response?a(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error):a("Please check your network")}));case 15:u=e.sent,e.next=21;break;case 18:return e.next=20,m()({method:"POST",url:"".concat(r),data:{email:n,password:"passs",auth:"google",name:i,imageUrl:l},headers:{"Content-Type":"application/json"}}).catch((function(e){a(e.response.data.error)}));case 20:u=e.sent;case 21:u&&u.data.success?(localStorage.setItem("email",n),localStorage.setItem("img",u.data.data.user.imageUrl),localStorage.setItem("username",null===(j=u.data.data.user)||void 0===j?void 0:j.username),localStorage.setItem("token",u.data.data.token),s(!1),o.push("/twits")):s(!1);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function I(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(""),i=Object(o.a)(s,2),u=i[0],d=i[1],j=Object(c.useState)(""),b=Object(o.a)(j,2),m=b[0],h=b[1],x=Object(c.useState)(!1),g=Object(o.a)(x,2),O=g[0],v=g[1],y=Object(c.useState)(JSON.parse(localStorage.getItem("signup"))),N=Object(o.a)(y,2),I=N[0],z=N[1],E=localStorage.getItem("token"),A=Object(l.f)(),F="".concat(f,"/auth/").concat(I?"signup":"login"),P=function(e){"email"===e.target.name?a(e.target.value):d(e.target.value)};return Object(c.useEffect)((function(){return E&&A.push("/twits"),function(){}}),[]),Object(w.jsxs)("div",{style:{fontFamily:"Roboto",fontWeight:"600"},className:"font-Roboto text-center align-items-center",children:[Object(w.jsxs)("p",{style:{fontFamily:"Architects Daughter",fontWeight:"300"},className:"italic text-center mb-2",children:[Object(w.jsxs)("span",{style:{fontSize:"1.8em"},className:"text-purple-900 font-bold",children:["Twitee",Object(w.jsx)("br",{})]}),Object(w.jsx)("span",{style:{fontSize:"1em"},children:".... Feel free, express yourself, network ...."})]}),Object(w.jsx)("h1",{style:{fontSize:20},className:"font-bold text-md mb-7",children:I?"Signup":"Login"}),Object(w.jsx)("input",{type:"text",name:"email",value:r,placeholder:"email",onChange:P,className:"px-3 rounded mb-5"}),Object(w.jsx)("br",{}),Object(w.jsx)("input",{type:"password",name:"password",value:u,placeholder:"password",onChange:P,className:"px-3 rounded mb-5"}),Object(w.jsx)("br",{}),Object(w.jsxs)("div",{className:"flex flex-col mb-3",children:[m&&Object(w.jsx)("span",{className:"mb-2 text-red-600",children:m}),Object(w.jsx)("div",{className:"flex justify-center",children:O?Object(w.jsx)("span",{className:"",children:Object(w.jsx)(p.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(w.jsx)("span",{onClick:function(){return T(!1,r,u,F,m,h,v,A)},className:"cursor-pointer mb-3 bg-green-500 hover:bg-green-400 py-1 px-6 rounded text-white",children:I?"Signup":"Login"})})]}),!E&&Object(w.jsx)(S,{error:m,setError:h,loading:O,setLoading:v}),Object(w.jsxs)("div",{className:"mt-7 mb-6",children:[I?"Already signed up ?":"Not registered ?",Object(w.jsx)("span",{className:"hover:bg-purple-400 bg-purple-500 ml-2 p-1 rounded text-white font-bold cursor-pointer",onClick:function(){I?(z(!1),localStorage.setItem("signup",!1)):(z(!0),localStorage.setItem("signup",!0))},children:I?" Switch to Login":" Switch to Signup!"})]}),Object(w.jsx)("img",{src:k,alt:"CHat",className:"",style:{borderRadius:"5",width:"100"}}),Object(w.jsxs)("p",{className:"text-white-400 bold flex text-center",children:[Object(w.jsx)(C.a,{})," Twitee"]})]})}var z=n(17),E=n.n(z),A=n(14),F=n(20),P=n(18),U=n(46),L=n(45),D=n(44);function R(e){e.imageUrl;var t=e.setImageUrl,n=Object(c.useState)(""),r=Object(o.a)(n,2),a=(r[0],r[1]),s=Object(c.useState)(""),i=Object(o.a)(s,2),l=i[0],u=i[1],b=function(){var e=Object(j.a)(d.a.mark((function e(n){var c,r,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n.target),a("loading"),c=n.target.files[0],r=new FormData,"https://api.cloudinary.com/v1_1/thevetdoctor/image/upload",r.append("file",c),r.append("upload_preset","zunt8yrw"),e.next=9,fetch("https://api.cloudinary.com/v1_1/thevetdoctor/image/upload",{method:"POST",body:r});case 9:return s=e.sent,e.next=12,s.json();case 12:o=e.sent,u(o.secure_url),t(o.secure_url),a("done");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"flex",children:l?Object(w.jsx)("img",{src:l,alt:"post",style:{width:"20em",height:"9em"},className:"rounded"}):Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("label",{className:"ml-3 cursor-pointer flex",children:[Object(w.jsx)(D.a,{size:25})," "," ",Object(w.jsx)("span",{className:"ml-2",children:"Add Image"}),Object(w.jsx)("input",{type:"file",placeholder:"",accept:"image/*;capture",className:"hidden",onChange:function(e){return b(e)}})]})})})}function W(e){var t=Object(c.useState)(localStorage.getItem("twitTitle")?localStorage.getItem("twitTitle"):""),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(localStorage.getItem("twitText")?localStorage.getItem("twitText"):""),i=Object(o.a)(s,2),l=i[0],u=i[1],b=Object(c.useState)(localStorage.getItem("twitImage")?localStorage.getItem("twitImage"):""),h=Object(o.a)(b,2),x=h[0],g=h[1],O=Object(c.useState)(160),v=Object(o.a)(O,2),y=v[0],S=v[1],N=Object(c.useState)(""),k=Object(o.a)(N,2),C=k[0],T=k[1],I=Object(c.useState)(!1),z=Object(o.a)(I,2),E=z[0],A=z[1],F=localStorage.getItem("token"),P="".concat(f,"/twits/post"),U=function(e){"title"===e.target.name?(a(e.target.value),localStorage.setItem("twitTitle",e.target.value)):(u(e.target.value),S(160-e.target.value.length),localStorage.setItem("twitText",e.target.value))},L=function(){var t=Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&l){t.next=6;break}if(r){t.next=4;break}return T("Title is required"),t.abrupt("return");case 4:return T("Inputs required"),t.abrupt("return");case 6:return A(!0),t.next=9,m()({method:"POST",url:"".concat(P),data:{title:r,text:l,imageUrl:x},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(F)}}).catch((function(e){console.log(e.response),T(e.response.data.error)}));case 9:(n=t.sent)&&n.data.success?(A(!1),localStorage.removeItem("twitTitle"),localStorage.removeItem("twitText"),e.setSync(!e.sync),e.showForm()):(A(!1),console.log("Error found"));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"text-center sticky top-0 rounded pb-1 bg-blue-200 mt-3 pt-3 mb-1",children:[Object(w.jsx)("h1",{style:{fontSize:"1.5em"},className:"font-bold text-base mb-3",children:"New twit"}),Object(w.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",borderRadius:"20%"},children:[Object(w.jsx)("input",{type:"text",name:"title",value:r,placeholder:"title",onChange:U,className:"px-3 py-1 rounded mb-2",style:{width:"20em",border:"none"},required:!0}),Object(w.jsx)("textarea",{type:"textarea",name:"text",rows:4,cols:3,style:{width:"20em",height:"".concat(x?"5em":"13em"),border:"none"},maxLength:160,value:l,overflow:"hidden",placeholder:"Drop in your twit ...",onChange:U,className:"px-3 rounded mb-1 text-md text-gray-600",required:!0}),Object(w.jsxs)("span",{style:{display:"flex",width:"20em"},className:"justify-between px-3 mt-2 mb-2",children:[Object(w.jsx)(R,{imageUrl:x,setImageUrl:g}),Object(w.jsx)("span",{children:y})]})]}),Object(w.jsxs)("div",{style:{flexDirection:"column"},className:"flex mb-5",children:[C&&Object(w.jsx)("span",{className:"mb-2 text-red-800 text-md",children:C}),Object(w.jsx)("div",{className:"justify-items-center mt-2",children:E?Object(w.jsx)("span",{className:"m-auto",children:Object(w.jsx)(p.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.showForm()},className:"hover:bg-gray-900 bg-gray-400 font-medium p-1 rounded text-white",children:"Cancel"}),Object(w.jsx)("span",{style:{cursor:"pointer"},onClick:L,className:"hover:bg-green-900 bg-green-400 font-medium p-1 rounded text-white mx-2",children:"Send"})]})})]})]})}function q(e){var t=Object(c.useState)(""),n=Object(o.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(160),i=Object(o.a)(s,2),l=i[0],u=i[1],b=Object(c.useState)(""),h=Object(o.a)(b,2),x=h[0],g=h[1],O=Object(c.useState)(!1),v=Object(o.a)(O,2),y=v[0],S=v[1],N=localStorage.getItem("token"),k="".concat(f,"/comments"),C=function(){var t=Object(j.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.twitId){t.next=2;break}return t.abrupt("return");case 2:if(r){t.next=5;break}return g("Inputs required"),t.abrupt("return");case 5:return S(!0),t.next=8,m()({method:"POST",url:"".concat(k,"/").concat(e.twitId),data:{text:r},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)}}).catch((function(e){console.log(e.response),g(e.response.data.error)}));case 8:n=t.sent,console.log(n),n&&n.data.success?(S(!1),e.setSync(!e.sync),e.showCommentForm()):(S(!1),console.log("Error found"));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"text-center",children:[Object(w.jsx)("p",{style:{fontSize:20},className:"font-bold text-xs mb-3",children:"New Comment"}),Object(w.jsx)("textarea",{type:"textarea",name:"text",rows:5,cols:8,maxLength:160,style:{width:"15em",height:"8em"},value:r,placeholder:"Drop in your comment ...",onChange:function(e){"text"===e.target.name&&(a(e.target.value),u(160-e.target.value.length))},className:"px-3 rounded mb-5 h-20 text-md text-gray-600",required:!0}),Object(w.jsx)("br",{}),l,Object(w.jsxs)("div",{style:{flexDirection:"column"},className:"flex mb-5",children:[x&&Object(w.jsx)("span",{className:"mb-2 text-red-800 text-xs",children:x}),Object(w.jsxs)("div",{className:"justify-items-center",children:[Object(w.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.showCommentForm()},className:"hover:bg-gray-900 bg-gray-400 font-medium p-1 rounded text-white",children:"Cancel"}),y?Object(w.jsx)("span",{className:"m-auto",children:Object(w.jsx)(p.a,{type:"ThreeDots",color:"#00bfff",height:40,width:40})}):Object(w.jsx)("span",{style:{cursor:"pointer"},onClick:C,className:"hover:bg-green-900 bg-green-400 font-medium p-1 rounded text-white mx-2",children:"Send"})]})]})]})}function G(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(JSON.parse(localStorage.getItem("twits"))||[]),s=Object(o.a)(a,2),i=s[0],u=s[1],b=Object(c.useState)(!1),h=Object(o.a)(b,2),p=h[0],x=h[1],g=Object(c.useState)(!1),O=Object(o.a)(g,2),v=O[0],y=O[1],S=Object(c.useState)(0),k=Object(o.a)(S,2),C=k[0],T=k[1],I=localStorage.getItem("email")?localStorage.getItem("email"):"",z=localStorage.getItem("img")?localStorage.getItem("img"):"",E=Object(l.f)(),A=localStorage.getItem("token"),U="".concat(f,"/twits"),D=function(){x(!p)},R=function(){var e=Object(j.a)(d.a.mark((function e(t,n,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:t,url:n,data:c,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(A)}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:y(!v);case 3:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A){e.next=3;break}return console.log("Not loggedin"),e.abrupt("return");case 3:return e.next=5,m()({method:"GET",url:"".concat(U),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(A)}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 5:(t=e.sent)&&t.data.success?(u(t.data.data.map((function(e){return e.formActive=!1,e}))),localStorage.setItem("twits",JSON.stringify(t.data.data.map((function(e){return e.formActive=!1,e}))))):(console.log("Error found"),r("Error found"),r("Please check your network"));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:"GET",url:"".concat(f,"/auth/users"),headers:{"Content-Type":"application/json"}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:(t=e.sent)&&t.data.success?T(t.data.data.count):(console.log("Error found"),r("Error found"),r("Please check your network"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){console.log("checking open forms",i.filter((function(e){return e.formActive})));var e=i.map((function(e){return e.formActive=!1,e}));u(e),console.log("closing open forms",i.filter((function(e){return e.formActive})))};return Object(c.useEffect)((function(){return A||E.push("/"),G(),function(){console.log("cleanup twits 1")}}),[]),Object(c.useEffect)(Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(),e.abrupt("return",(function(){console.log("cleanup twits 2")}));case 2:case"end":return e.stop()}}),e)}))),[v]),Object(c.useEffect)((function(){setTimeout((function(){var e=window.location.hash.replace("#",""),t=document.getElementById(e);t&&t.scrollIntoView()}),0)})),Object(w.jsxs)("div",{style:{fontFamily:"Roboto",fontWeight:"600",height:"90vh"},className:"mb-5 p-3",children:[Object(w.jsx)("span",{style:{cursor:"pointer",borderRadius:"50%"},className:"fixed bottom-16 right-4 bg-green-500 p-4 text-white",children:Object(w.jsx)(L.a,{size:25,onClick:D})}),p&&Object(w.jsx)(W,{error:n,showForm:D,sync:v,setSync:y}),!p&&Object(w.jsxs)("div",{children:[Object(w.jsxs)("p",{style:{fontFamily:"Architects Daughter",fontWeight:"300"},className:"italic text-center mb-2",children:[Object(w.jsxs)("span",{style:{fontSize:"1.8em"},className:"text-purple-900 font-bold",children:["Twitee",Object(w.jsx)("br",{})]}),Object(w.jsx)("span",{style:{fontSize:"1em"},children:".... Feel free, express yourself, network ...."})]}),Object(w.jsxs)("div",{className:"py-2 px-2 rounded mb-4 flex justify-between",children:["null"!==z?Object(w.jsx)("span",{className:"cursor-pointer",onClick:function(e){return E.push("/".concat(I.split("@")[0]))},children:Object(w.jsx)("img",{src:z,alt:"Profile",style:{width:"30px",height:"30px",borderRadius:"50%"}})}):Object(w.jsx)("span",{className:"text-left",children:Object(w.jsx)(F.a,{size:25})}),C>0&&Object(w.jsxs)("span",{className:"text-left flex cursor-pointer",onClick:function(e){return E.push("people")},children:[Object(w.jsx)(P.a,{size:30}),Object(w.jsx)("span",{className:"pt-1 pl-1",children:C})]}),Object(w.jsx)("span",{style:{cursor:"pointer"},className:"text-right",onClick:function(){localStorage.removeItem("token"),E.push("/")},children:Object(w.jsx)(N,{})})]}),n&&Object(w.jsx)("div",{style:{fontFamily:"Roboto",backgroundColor:"white",fontWeight:"bold"},className:"text-red-500 text-center py-2 m-1 rounded",children:"Please check your network !"}),Object(w.jsx)("div",{className:"",children:i.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})).map((function(e,t){return Object(w.jsx)(H,{twit:e,email:I,apiCallHook:R,baseUrl:f,frontendUrl:"https://peaceful-leakey-ce2e49.netlify.app/twits",sync:v,setSync:y,showForm:D,formActive:p,checkOpenForms:B},t)}))})]})]})}var H=function(e){var t=e.twit,n=t.id,r=t.title,a=t.text,s=t.imageUrl,i=t.twits,u=t.likes,b=t.comments,m=t.createdAt,h=t.updatedAt,p=e.email,x=e.apiCallHook,f=e.baseUrl,g=e.frontendUrl,O=e.sync,v=e.setSync,y=e.checkOpenForms,S=Object(c.useState)(!1),N=Object(o.a)(S,2),k=N[0],C=N[1],T=Object(c.useState)(!1),I=Object(o.a)(T,2),z=I[0],P=I[1],L=Object(c.useState)(!1),D=Object(o.a)(L,2),R=D[0],W=D[1],G=Object(c.useState)(!1),H=Object(o.a)(G,2),_=H[0],M=H[1],Q=Object(c.useState)(a),V=Object(o.a)(Q,2),$=V[0],K=V[1],X=Object(c.useState)(!1),Y=Object(o.a)(X,2),Z=Y[0],ee=Y[1],te=Object(c.useState)(!1),ne=Object(o.a)(te,2),ce=ne[0],re=ne[1],ae=Object(l.f)(),se=function(){ee(!Z),K(a)},oe=u.filter((function(e){return e.isLiked})).length,ie=function(){C(!k),e.twit.formActive=!k},le=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("clipboard"in navigator)){e.next=8;break}return console.log("Link copied"),re(!0),e.next=5,navigator.clipboard.writeText(t);case 5:return e.abrupt("return",e.sent);case 8:console.log("Link copy is not supported");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{id:"".concat(n),style:{fontSize:"1.1em"},className:"shadow-lg border border-gray-200 rounded p-5 mb-4",children:[Object(w.jsxs)("p",{className:"flex justify-between mb-2",children:[Object(w.jsx)("span",{}),Object(w.jsx)("span",{style:{fontFamily:"Roboto Slab"},className:"text-xl font-bold self-center",children:r}),Object(w.jsx)("span",{className:ce?"mr-2 mb-1 text-xs self-end":"mr-2 mb-1 invisible text-xs self-end",children:"copied"})]}),Object(w.jsxs)("span",{className:"text-xs mb-5 flex justify-between",children:[Object(w.jsx)(E.a,{fromNow:!0,children:m}),Object(w.jsxs)("span",{className:"flex",children:[p===i.email&&!Z&&Object(w.jsx)("span",{className:"cursor-pointer mr-3 hover:bg-blue-400 text-black hover:text-white p-2 -mt-2 rounded-full",onClick:function(){return se()},children:Object(w.jsx)(U.a,{size:20})}),Object(w.jsx)("span",{className:ce?"flex-col hover:bg-blue-400 rounded-full p-2 text-white bg-blue-900 cursor-pointer -mt-2 mr-3":"rounded-full hover:bg-blue-400 p-2 cursor-pointer -mt-2 mr-3",onClick:function(){return le("".concat(g,"/#").concat(n)),void setTimeout((function(){re(!1)}),1e3)},children:Object(w.jsx)(A.c,{size:20})})]})]}),Z&&Object(w.jsxs)("div",{className:"mb-5",children:[Object(w.jsx)("textarea",{className:"border-gray-200 border-2 p-2 mb-2 rounded bg-white-300 focus:outline-none",style:{width:"100%"},cols:3,rows:4,maxLength:160,value:$,onChange:function(e){K(e.target.value)},required:!0}),Object(w.jsx)("br",{}),z?Object(w.jsx)(J,{height:20,width:20,color:"#00bfff"}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("span",{className:"cursor-pointer bg-gray-500 p-2 m-2 text-white rounded hover:bg-gray-400",onClick:function(){return se()},children:"Cancel"}),Object(w.jsx)("span",{className:"cursor-pointer bg-green-600 p-2 mb-2 text-white rounded hover:bg-green-400 hover:text-black",onClick:function(){return x("PATCH","".concat(f,"/twits/").concat(n),{text:$}),P(!0),void setTimeout((function(){P(!1),ee(!1)}),1e3)},children:"Update Story"})]})]}),!Z&&Object(w.jsxs)("div",{className:"p-3 font-semibold",children:[a,Object(w.jsx)("br",{}),new Date(h).getTime()-new Date(m).getTime()>0&&Object(w.jsxs)("span",{className:"text-xs",children:["Updated ",Object(w.jsx)(E.a,{fromNow:!0,children:h})]})]}),Object(w.jsx)("span",{children:s&&Object(w.jsx)("img",{src:s,width:"100%",alt:"imgurl",className:"rounded"})}),Object(w.jsxs)("div",{style:{fontSize:"0.8em"},className:"text-xs text-gray-800 flex mt-2",children:[Object(w.jsxs)("span",{className:"mx-2 flex cursor-pointer",onClick:function(e){return ae.push("/".concat(i.username))},children:[i.imageUrl?Object(w.jsx)("span",{className:"mr-1",children:Object(w.jsx)("img",{src:i.imageUrl,alt:"Profile",style:{width:"20px",height:"20px",borderRadius:"50%"}})}):Object(w.jsx)(A.b,{size:15}),p===i.email?"Me":i.username]}),Object(w.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){return W(!0),setTimeout((function(){W(!1)}),1e3),void x("POST","".concat(f,"/likes/like/").concat(n))},children:R?Object(w.jsx)(J,{height:20,width:20,color:"#00bfff"}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(F.c,{color:oe>0?"blue":"gray",size:15}),Object(w.jsx)("span",{className:"text-xs",children:oe})]})}),Object(w.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){return y(),void ie()},children:Object(w.jsx)(A.a,{size:15})}),p===i.email&&Object(w.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex hover:text-red-800",onClick:function(){return M(!0),setTimeout((function(){M(!1)}),1e3),void x("DELETE","".concat(f,"/twits/").concat(n))},children:_?Object(w.jsx)(J,{height:20,width:20,color:"#00bfff"}):Object(w.jsx)(F.b,{size:15,color:"red"})})]}),k&&Object(w.jsx)(q,{twitId:n,showCommentForm:ie,sync:O,setSync:v}),b.length>0&&Object(w.jsx)("div",{className:"mt-2 rounded",children:b.filter((function(e){return!e.isDeleted})).map((function(e,t){return Object(w.jsx)(B,{comment:e,apiCallHook:x,email:p},t)}))})]})},B=function(e){var t=e.comment,n=t.id,r=t.text,a=t.usercomments,s=t.likecomments,i=t.createdAt,u=e.email,d=e.apiCallHook,j=Object(c.useState)(!1),b=Object(o.a)(j,2),m=b[0],h=b[1],p=Object(c.useState)(!1),x=Object(o.a)(p,2),g=x[0],O=x[1],v=Object(l.f)(),y=null===s||void 0===s?void 0:s.filter((function(e){return e.isLiked})).length;return Object(w.jsxs)("div",{className:"bg-blue-200 mb-2 p-2 rounded",children:[Object(w.jsx)("span",{className:"text-xs mb-2",children:Object(w.jsx)(E.a,{fromNow:!0,children:i})}),Object(w.jsx)("p",{className:"p-3 font-semibold",children:r}),Object(w.jsxs)("span",{style:{fontSize:"0.8em"},className:"mx-2 flex items-justify text-xs mt-2",children:[a.imageUrl?Object(w.jsx)("span",{className:"mr-1 cursor-pointer",onClick:function(e){return v.push("/".concat(a.username))},children:Object(w.jsx)("img",{src:a.imageUrl,alt:"Profile",style:{width:"20px",height:"20px",borderRadius:"50%"}})}):Object(w.jsx)(A.b,{size:15}),Object(w.jsx)("span",{className:"cursor-pointer",onClick:function(e){return v.push("/".concat(a.username))},children:u===a.email?"Me":a.username}),Object(w.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex",onClick:function(){return h(!0),setTimeout((function(){h(!1)}),1e3),void d("POST","".concat(f,"/likecomments/like/").concat(n))},children:m?Object(w.jsx)(J,{height:20,width:20,color:"white"}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(F.c,{color:y>0?"blue":"gray",size:15}),Object(w.jsx)("span",{className:"text-xs",children:y})]})}),u===a.email&&Object(w.jsx)("span",{style:{cursor:"pointer"},className:"mx-2 flex hover:text-red-800",onClick:function(){return O(!0),setTimeout((function(){h(!1)}),1e3),void d("DELETE","".concat(f,"/comments/").concat(n))},children:g?Object(w.jsx)(J,{height:20,width:20,color:"white"}):Object(w.jsx)(F.b,{size:15,color:"red"})})]})]})},J=function(e){var t=e.height,n=e.width,c=e.color;return Object(w.jsx)("span",{className:"m-auto mr-4",children:Object(w.jsx)(p.a,{type:"ThreeDots",color:c,height:t,width:n})})},_=n(24);function M(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)({}),s=Object(o.a)(a,2),i=s[0],u=s[1],b=Object(c.useState)(!1),h=Object(o.a)(b,2),p=h[0],x=h[1],g=Object(c.useState)(!1),O=Object(o.a)(g,2),v=O[0],y=O[1],S=Object(c.useState)(0),N=Object(o.a)(S,2),k=N[0],C=N[1],T=Object(c.useState)(0),I=Object(o.a)(T,2),z=I[0],F=I[1],U=Object(c.useState)(!1),L=Object(o.a)(U,2),D=L[0],R=L[1],W=Object(c.useState)(!1),q=Object(o.a)(W,2),G=q[0],H=q[1],B=Object(l.g)().user,M=Object(l.f)(),Q=localStorage.getItem("email")?localStorage.getItem("email"):"",V=localStorage.getItem("token"),$=function(){var e=Object(j.a)(d.a.mark((function e(t,n,c){var a,s,o,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:t,url:n,data:c,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(V)}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:(a=e.sent)&&a.data.success?"GET"===t?(u(a.data.data.user),s=a.data.data.user.followers.filter((function(e){return e.follower.isFollowed})),o=a.data.data.user.following.filter((function(e){return e.follower.isFollowed})),C(s.length),F(o.length),i=s.filter((function(e){return e.email===Q})).length>0,l=o.filter((function(e){return e.email===Q})).length>0,x(i),y(l),r("")):H(!G):r("Please check your network");case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return $("GET","".concat(f,"/auth/users/").concat(B)),function(){console.log("cleanup profile page")}}),[G]),Object(w.jsxs)("div",{id:"".concat(B),style:{fontSize:"1.1em"},className:"shadow-lg border border-gray-200 bg-gray-200 h-full rounded p-5 mb-4",children:[Object(w.jsxs)("p",{className:"flex justify-between mb-2",children:[(null===i||void 0===i?void 0:i.imageUrl)?Object(w.jsx)("span",{children:Object(w.jsx)("img",{src:null===i||void 0===i?void 0:i.imageUrl,alt:"Profile",style:{width:"3em",height:"3em",borderRadius:"50%"}})}):Object(w.jsx)("span",{className:"text-left",children:Object(w.jsx)(A.b,{size:25})}),Object(w.jsx)("span",{style:{fontFamily:"Roboto Slab"},className:"text-xl font-bold self-center",children:null===i||void 0===i?void 0:i.username}),Object(w.jsx)("span",{className:"text-left flex cursor-pointer",onClick:function(e){return M.push("people")},children:Object(w.jsx)(P.a,{size:30})}),Object(w.jsx)("span",{className:"text-left bg-black-400 cursor-pointer hover:invisible",onClick:function(){return M.push("/twits")},children:Object(w.jsx)(_.a,{size:35})})]}),n&&Object(w.jsx)("div",{style:{backgroundColor:"white",fontWeight:"bold"},className:"text-red-500 text-center py-2 mb-5 rounded",children:"Please check your network !"}),Object(w.jsxs)("span",{className:"text-sm mt-3 mb-5 flex justify-between",children:[Object(w.jsxs)("span",{children:["Member since : ",Object(w.jsx)(E.a,{fromNow:!0,children:null===i||void 0===i?void 0:i.createdAt})]}),Object(w.jsx)("span",{className:"flex",children:Q!==(null===i||void 0===i?void 0:i.email)&&Object(w.jsx)(w.Fragment,{children:D?Object(w.jsx)(J,{height:20,width:20,color:""}):Object(w.jsx)("span",{className:" text-white bg-blue-900 rounded-lg hover:bg-blue-400 p-2 cursor-pointer -mt-2 mr-1",onClick:function(){return R(!0),setTimeout((function(){R(!1)}),1e3),void(p?$("PATCH","".concat(f,"/followers/unfollow"),{followerId:null===i||void 0===i?void 0:i.id}):$("POST","".concat(f,"/followers/follow"),{followerId:null===i||void 0===i?void 0:i.id}))},children:p?"Following":"Follow"})})})]}),Object(w.jsxs)("div",{className:"flex justify-between text-xs",children:[Object(w.jsxs)("span",{children:[k>0&&Object(w.jsxs)("span",{className:"text-xs text-white bg-blue-500 rounded hover:bg-blue-400 p-2 cursor-pointer",children:[k," ",k>1?"followers":"follower"]}),z>0&&Object(w.jsxs)("span",{className:" text-white bg-green-500 rounded hover:bg-green-400 p-2 cursor-pointer m-3",children:[z," following"]})]}),Object(w.jsx)("span",{children:v&&Object(w.jsx)("span",{className:" text-white bg-gray-500 rounded p-2 cursor-pointer m-1",children:"Follows you"})})]}),Object(w.jsx)("span",{children:(null===i||void 0===i?void 0:i.imageUrl)?Object(w.jsx)("img",{src:null===i||void 0===i?void 0:i.imageUrl,width:"100%",alt:"imgurl",className:"mt-3 rounded-lg"}):Object(w.jsx)("div",{className:"flex",children:Object(w.jsx)("span",{className:"m-auto",children:Object(w.jsx)(A.b,{size:300})})})})]})}function Q(e){var t=e.searchQuery,n=e.setSearchQuery,c=e.handleChange;return Object(w.jsxs)("div",{className:"flex mb-2 rounded",children:[Object(w.jsx)("div",{className:"flex-grow",children:Object(w.jsx)("input",{type:"text",name:"top-search",value:t,placeholder:"Search friends",required:!0,onChange:c,className:"p-2 text-dark-3 text-md rounded font-semibold text-center bg-white-200 w-full outline-none"})}),t&&Object(w.jsx)("div",{className:"flex text-white font-bold bg-blue-900 hover:bg-blue-500 cursor-pointer px-3 rounded items-center",onClick:function(){return n("")},children:"Clear"})]})}function V(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(o.a)(a,2),i=s[0],u=s[1],b=Object(c.useState)({}),h=Object(o.a)(b,2),p=(h[0],h[1]),x=Object(c.useState)([]),g=Object(o.a)(x,2),O=g[0],v=g[1],y=Object(c.useState)([]),S=Object(o.a)(y,2),N=S[0],k=S[1],C=Object(c.useState)(!1),T=Object(o.a)(C,2),I=(T[0],T[1],Object(c.useState)(!1)),z=Object(o.a)(I,2),E=(z[0],z[1],Object(c.useState)(0)),F=Object(o.a)(E,2),U=(F[0],F[1],Object(c.useState)(0)),L=Object(o.a)(U,2),D=(L[0],L[1],Object(c.useState)(!1)),R=Object(o.a)(D,2),W=(R[0],R[1],Object(c.useState)(!1)),q=Object(o.a)(W,2),G=q[0],H=q[1],B=Object(l.g)().user,J=Object(l.f)(),M=localStorage.getItem("email")?localStorage.getItem("email"):"",V=localStorage.getItem("token"),$=function(){var e=Object(j.a)(d.a.mark((function e(t,n,c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({method:t,url:n,data:c,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(V)}}).catch((function(e){e.isAxiosError&&console.log(e.isAxiosError)}));case 2:(a=e.sent)&&a.data.success?"GET"===t?(p(a.data.data.user),k(a.data.data.users),v(a.data.data.users),r("")):H(!G):r("Please check your network");case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return $("GET","".concat(f,"/auth/users")),v(N),function(){console.log("cleanup people page1")}}),[G]),Object(c.useEffect)((function(){return function(){var e=N.filter((function(e){return e.username.toLowerCase().indexOf(i.toLowerCase())>=0}));v(e)}(),function(){console.log("cleanup people page2")}}),[i]),Object(w.jsxs)("div",{id:"".concat(B),style:{fontSize:"1.1em"},className:"shadow-lg border border-gray-200 bg-gray-200 h-full rounded p-5 mb-4",children:[Object(w.jsxs)("p",{className:"flex justify-between mb-2",children:[Object(w.jsx)("span",{className:"text-left",children:Object(w.jsx)(P.a,{size:25})}),Object(w.jsx)("span",{style:{fontFamily:"Roboto Slab"},className:"text-xl font-bold self-center",children:"People"}),Object(w.jsx)("span",{className:"text-left bg-black-400 cursor-pointer hover:invisible",onClick:function(){return J.push("/twits")},children:Object(w.jsx)(_.a,{size:35})})]}),n&&Object(w.jsx)("div",{style:{backgroundColor:"white",fontWeight:"bold"},className:"text-red-500 text-center py-2 m-1 rounded",children:"Please check your network !"}),Object(w.jsx)("span",{className:"text-sm mt-3 mb-5"}),Object(w.jsx)(Q,{searchQuery:i,handleChange:function(e){var t=e.target.value;u(t)},setSearchQuery:u}),Object(w.jsx)("div",{className:"flex flex-col text-md",children:O.sort((function(e,t){return e.email.localeCompare(t.email)})).map((function(e,t){return Object(w.jsx)("span",{className:"text-white bg-blue-400 rounded hover:bg-blue-400 p-2 mb-2 cursor-pointer",onClick:function(){return J.push("/".concat(e.username))},children:Object(w.jsxs)("span",{className:"mx-2 flex cursor-pointer",onClick:function(t){return J.push("/".concat(e.username))},children:[e.imageUrl?Object(w.jsx)("span",{className:"mr-2",children:Object(w.jsx)("img",{src:e.imageUrl,alt:"Profile",style:{width:"1.5em",height:"1.5em",borderRadius:"50%"}})}):Object(w.jsx)("span",{className:"mr-2 text-black",children:Object(w.jsx)(A.b,{size:"1.5em"})}),M===e.email?"Me":e.username]})},t)}))}),Object(w.jsx)("div",{className:"flex",children:Object(w.jsx)("span",{className:"m-auto",children:Object(w.jsx)(P.a,{size:300})})})]})}var $=function(){var e=Object(c.useState)(JSON.parse(localStorage.getItem("loggedIn"))),t=Object(o.a)(e,2),n=(t[0],t[1],Object(c.useState)(JSON.parse(localStorage.getItem("signup"))||!1)),r=Object(o.a)(n,2),a=(r[0],r[1],localStorage.getItem("username"));function s(){var e=a?"Hello, ".concat(a):"Hello !";new Notification(e,{body:"Have you checked Twitee today?",icon:"https://res.cloudinary.com/thevetdoctor/image/upload/v1599332593/g1rozhabxswegvhp59h3.jpg"}),setTimeout(s,108e5)}return Notification.requestPermission().then((function(e){"granted"===e&&s()})),Object(w.jsx)(i.a,{children:Object(w.jsxs)(l.c,{children:[Object(w.jsx)(l.a,{exact:!0,path:"/",component:I}),Object(w.jsx)(l.a,{exact:!0,path:"/twits",component:G}),Object(w.jsx)(l.a,{exact:!0,path:"/people",component:V}),Object(w.jsx)(l.a,{path:"/:user",component:M})]})})},K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)($,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");K?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):X(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):X(t,e)}))}}()}},[[98,1,2]]]);
//# sourceMappingURL=main.6f6acdcd.chunk.js.map